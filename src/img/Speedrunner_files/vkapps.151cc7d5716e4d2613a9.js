(window.webpackJsonp=window.webpackJsonp||[]).push([["vkapps"],{"+cqQ":function(e,t,n){"use strict";function r(){var e=[],t=a.bind(e);return t.off=i.bind(e),t._fns=e,t}function a(){var e=this,t=arguments,n=t[0];if("function"!=typeof n){for(var r=e.length,a=!1,i=0;i<r;i++)!0===e[i].apply(null,t)&&(a=!0);return a}Array.prototype.slice.call(t).forEach((function(t){return e.push(t)}))}function i(e){e?function(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}}(this,e):this.length=0}function o(e,t){e((function n(){t(),setTimeout((function(){e.off(n)}))}))}n.r(t),n.d(t,"onEmitOnce",(function(){return o})),t.default=Object.assign(r,{kind:function(){var e={};return function(t){return e[t]||(e[t]=r())}}}),window.befall=r},"0hva":function(e,t,n){"use strict";n.r(t),n.d(t,"initAlbumPage",(function(){return h}));var r=n("vOib"),a=n("1VZq"),i=n("z1UI"),o=n("O5lf"),s=(n("tlMv"),n("z9sQ"));var c,u,l,d,p=function(e){void 0===e&&(e={});var t=window.lang,n=e.title||"",c=e.description||"",u=e.pretag,l=e.buttons||{},d=(e.photos||[]).map((function(e){return Object(a.default)({photo:e})})),p=null;if(e.is_loading)p=Wd.wrap(Object(o.default)({mix:"al_loading",type:"pageLoader"}));else{if(!d.length)return Object(i.default)({separator:!0,more_text:e.add_url?t.mobile_photos_placeholder_album_action:null,more_type:"primary",more_url:e.add_url,text:t.mobile_photos_placeholder_album_text});p={inner:[d],class:"AlbumPage__photos photos_page",tag:"div"}}var _=s.default.class("AlbumPage",{withoutDescription:!c},"--");return{inner:[Object(r.default)({inner:[{inner:[{inner:[n],class:"AlbumPage__title",tag:"h2"},c&&{inner:[c],class:"AlbumPage__description",tag:"span"}],class:"AlbumPage__info",tag:"div"},l.prev,p,l.more,u]})],class:_,tag:"div"}},_=n("OcsD");function h(){var e=$("#mhead");Object(_.getH)(e);$(".AlbumPage")&&(c=!1,u=!1,l=!1,d=!1,Object(_.onBodyScroll)(f),Object(_.onBodyScroll)(!0))}function f(){if(c||(c=$(".AlbumPage__title"),u=Object(_.getH)(c)),l||(l=$(".header__title",$("#mhead"))),!l)return Object(_.onBodyScroll)("__clear",f);d||(d=$(".header__text",l));var e=Math.min(40,Math.max(0,getY(c)-u-scrollTop()));_.setStyle.transform(d,1,[0,e]),l.classList.toggle("header__title--initial-position",0===e)}var m=n("Cbap");m.default.getRouter().addRoute(/\/(?:album|tag)(-?\d+(?:_\d+)?)/,h),m.default.getRouter().addRoute(/\/(?:attachments\?act=choose_photo).*(?:album|tag)=(-?\d+(?:_\d+)?)/,h);t.default=p},"1By4":function(e,t,n){"use strict";n.r(t);var r=n("2mXy"),a=n("fdw3"),i=n("OcsD");t.default={html:p,render:function(e){if(w(e))return e;return p(e)},preactRender:r.render,createElement:r.createElement,wrap:function(e){return e?{__raw__:e}:null},handle:function(){var e=C(arguments[0]),t=Array.prototype.slice.call(arguments,1),n=e[0];if(!n)return;w(n)||console.warn('Invalid handler "'+n+'"');var r=j(window,n);if(!k(r))return void console.warn("`"+n+"` is not a function");return r.apply(null,e.slice(1).concat(t))},handle2:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=e[0];if(!r)return;w(r)||console.warn('Invalid handler "'+r+'"');var a=j(window,r);if(!k(a))return void console.warn("`"+r+"` is not a function");for(var i=e.slice(1),o=0,s=i.length;o<s;o++)if("event"===i[o]){i[o]=t;break}a.apply(null,i.concat(n))},elem:function(e){return e?Object(i.ceFromString)(p(e)):""},preactElem:u,preact:d,hydrate:function(e,t,n){return Object(r.hydrate)(Object(r.createElement)(e,t),n)},class:f,style:m,getInternalData:function(){return{__is_wd_internal_data:!0}},innerItemToString:h,toFlatArray:I,prepareHandler:b,isAttrHandler:_,mountPreactComponent:function(e,t,n){if(!n)return;n.innerHTML="",Object(r.render)(Object(r.createElement)(e,t),n)},mountPreactTemplate:l,preactElemFromTemplate:function(e){return u((function(){return e}),{})}};var o=["tag","inner","attrs","innerHTML","outerHTML","_"],s=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],c=["abort","auxclick","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","stalled","submit","suspend","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","volumechange","waiting","wheel"].map((function(e){return"on"+e}));function u(e,t){var n=document.createElement("div");return l(e,t,n),n.children[0]}function l(e,t,n){Object(r.render)(d(e,t),n)}function d(e,t){return function e(t,n){return function(n){var o=k(t)?t(n):t;if(!o)return null;if("string"==typeof o||"number"==typeof o)return o;if(E(o))return o.map((function(t){return e(t)(t&&t.props)}));o.children=o.inner?E(o.inner)?o.inner:[o.inner]:null,delete o.inner,o.attrs=o.attrs||{},E(o.children)&&(o.children=Object(i.flatArray)(o.children),o.children=o.children.map((function(t){return t&&t.__raw__?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.__raw__}}):e(t)(t&&t.props)})));var s=Object(i.flatArray)([o.class,o.className]).reduce((function(e,t){return t&&e.push.apply(e,t.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}))),e}),[]);Object.keys(o).forEach((function(e){if(D(e)){var t=o[e];o[e]=Object(a.preactCallback)(t),o["preacted-"+e.toLowerCase()]=!0}}));var c=Object.assign({},o,{className:s.length?s.join(" "):null});return delete c.class,delete c.tag,delete c.attrs,Object(r.createElement)(o.tag||"div",c,o.children)}}((function(t){return e(t)}))(t)}function p(e){if(w(e))return e?{__raw__:e}:null;if(E(e))return e.map(p).join("");if(!y(e))throw"Invalid input, object is expected";if("outerHTML"in e){var t=e.outerHTML;if(w(t))return t;if(O(t))return t.toString();if(t)throw"Invalid outerHTML";return""}var n=function(e){if("tag"in e){var t=e.tag;if(w(t)&&/^[\w-]+$/.test(t))return t;throw"Invalid tag name"}if(S(e.href))return"a";return"div"}(e),r=function(e){if("innerHTML"in e){var t=e.innerHTML;if(w(t))return t;if(O(t))return t.toString();if(t)throw"Invalid innerHTML";return""}if("inner"in e)return I(e.inner).map(h).join("");return""}(e),a=function(e){var t="";y(e.attrs)&&Object.assign(e,e.attrs);for(var n in e)if(!A(n)){var r=e[n];"class"===n?r=f(r):_(n,r)?r=b(r):r&&(r=g(r)),"style"===n&&(r=m(r));var a=R(n);!0===r?t+=" "+a:O(r)?t+=" "+a+'="'+r+'"':w(r)?t+=" "+a+'="'+R(r)+'"':r&&(r=r.__raw__?r.__raw__:g(r))&&(t+=" "+a+'="'+r+'"')}w(e.attrs)&&(t+=" "+e.attrs.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return t}(e);return function(e){return s.includes(e.toLowerCase())}(n)?"<"+n+a+" />":"<"+n+a+">"+r+"</"+n+">"}function _(e,t){return D(e)&&(E(t)||w(n=t)&&/^[\w.]+$/.test(n));var n}function h(e){return O(e)?e.toString():w(e)?R(e):y(e)?e.__raw__?e.__raw__:p(e):""}function f(e){return I(e).filter(S).join(" ").trim().replace(/\s+/g," ")}function m(e){return y(e)?Object.entries(e).map((function(e){var t=e[0],n=e[1];return(t=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})))+":"+n})).join(";"):e}function b(e){var t=C(e);if(!t.length)return null;var n=t[0];return w(n)?n+"("+t.slice(1).map(v).join(", ")+")":e}function v(e){return O(e)||"this"===e||"event"===e||void 0===e?e:R(JSON.stringify(e),!0)}function g(e){return void 0===e&&(e=""),e="boolean"==typeof e||O(e)?e:w(e)?R(e,!0):y(e)?e.__raw__:R(JSON.stringify(e),!0)}function A(e){return o.includes(e)}function D(e){return c.includes(e.toLowerCase())}function O(e){return"number"==typeof e&&!isNaN(e)}function w(e){return"string"==typeof e}function E(e){return Array.isArray(e)}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return"[object Function]"===Object.prototype.toString.call(e)}function S(e){return w(e)&&e}function C(e){return E(e)?e:[e]}function R(e,t){return void 0===e&&(e=""),t?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(e=e.replace(/&(?!(#\d{0,4};|quot;|lt;|gt;|amp;))/g,"&amp;",e)).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(e){return E(e)?function e(t){var n=[];return t.forEach((function(t){E(t)?n=n.concat(e(t)):n.push(t)})),n}(e):[e]}function j(e,t){for(var n=t.split("."),r=n.length,a=e,i=0;i<r;i++)try{a=a[n[i]]}catch(e){return}return a}},"1VZq":function(e,t,n){"use strict";n.r(t);var r=n("Y6JH"),a=n("HaOv"),i=n("xTMR");var o=function(e){var t,n=e.photo,o=n.restriction;if(o&&"block"===o.type)t={inner:[{inner:[Object(r.default)({icon:Object(a.getDoNotDisturbOutline56Icon)()})],class:"PhotosPhotoItem__restriction",tag:"div"}],class:"_image PhotosPhotoItem__photo",tag:"div"};else{var s=["_image",Bem.class("PhotosPhotoItem__photo",{blur:o&&"blur"===o.type},"--")];t={inner:[o&&o.type?{inner:[Object(r.default)({icon:Object(i.getHideOutline56Icon)()})],class:"PhotosPhotoItem__restriction",tag:"div"}:null],style:"background-image: url("+n.src+")",attrs:n.attrs,class:s,tag:"div"}}return{inner:[t],href:n.href,class:"PhotosPhotoItem "+n.class,onclick:n.onclick,tag:"a"}};t.default=o},29:function(e,t,n){e.exports=n("uouo")},"29dZ":function(e,t,n){"use strict";n.r(t);var r=n("UvyM"),a=n("myok");n.d(t,"setDisabled",(function(){return a.setDisabled})),n.d(t,"setLoading",(function(){return a.setLoading})),Object.assign(r.default,a.default),window.Btn=r.default,t.default=r.default},"2IoG":function(e,t,n){"use strict";n.r(t);var r=n("MUpH"),a=n("bZ/P");function i(){var e=Object(r.default)(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);return i=function(){return e},e}t.default=function(e){void 0===e&&(e={});var t,n,r=a.default.list(e.inner);e.url?(t="a",n=a.default.attr("href",e.url)):(t=e.tag||"div",n="");return a.default.html(i(),t,e.mix,n,e.attrs,r,t)}},"4zn2":function(e,t,n){"use strict";n.r(t),n.d(t,"API_VERSION",(function(){return r})),n.d(t,"VKPAY_TRANSACTION_EVENT",(function(){return a})),n.d(t,"PLATFORM",(function(){return i})),n.d(t,"CLIENT_SCHEME",(function(){return o})),n.d(t,"ERROR_CODES",(function(){return s})),n.d(t,"ERROR_REASONS",(function(){return c})),n.d(t,"ERROR_TYPES",(function(){return u})),n.d(t,"CLOSE_STATUS",(function(){return l})),n.d(t,"GROUP_STATUS",(function(){return d})),n.d(t,"VKPAY_APPS",(function(){return p})),n.d(t,"TEXTLIVE_APPS",(function(){return _})),n.d(t,"VK_CONNECT_EVENTS",(function(){return h}));var r="5.95",a="VKWebAppActionDone",i={WEB:"web",MOBILE_WEB:"mobile-web"},o={BRIGHT_LIGHT:"bright_light",SPACE_GRAY:"space_gray"},s={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,CUSTOM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11},c={UNSUPPORTED_PLATFORM:"Unsupported platform",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",NETWORK_ERROR:"Network error"},u={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},l=["success","failed"],d={OPEN:0,CLOSED:1,PRIVATE:2},p=[6217559,7131443],_=[7512376],h={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityAuthToken:"get_community_token",VKWebAppGetCommunityAuthTokenPreload:"get_community_scope",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_scope",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppAllowNotificationsPreload:"are_notifications_allowed",VKWebAppAllowNotifications:"allow_notifications",VKWebAppDenyNotifications:"deny_notifications",VKWebAppAllowMessagesFromGroup:"allow_messages_from_group",VKWebAppAllowMessagesFromGroupPreload:"can_send_messages_from_group",VKWebAppJoinGroup:"join_group",VKWebAppJoinGroupPreload:"is_group_member",VKWebAppLeaveGroup:"leave_group",VKWebAppLeaveGroupPreload:"is_group_member",VKWebAppOpenApp:"open_app",VKWebAppGetUserInfo:"get_user_info",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppStorageGetKeys:"storage_get_keys",VKWebAppStorageSet:"storage_set",VKWebAppStorageGet:"storage_get",VKWebAppOpenArticleEditor:"open_article_edit",VKWebAppSubscribeStoryApp:"subscribe_story_app",VKWebAppClose:"close",VKWebAppGetGroupInfo:"get_group_info",VKWebAppGetGroupInfoPreload:"is_group_info_allowed"}},"8ZMO":function(e,t,n){"use strict";n.r(t);var r=function(e){return{class:["Anchor",e.mix],id:e.id,tag:"div"}};t.default=r},"9M99":function(e,t,n){"use strict";n.r(t),n.d(t,"emojiToHTML",(function(){return c}));var r=n("S6+Z"),a=n("TxR4"),i=n("vkmG");function o(e,t,n,r){return!n&&t?t:r?'<i class="emoji @'+e+'" emoji="'+e+'"'+(t?' title="'+t+'"':"")+"></i>":'<img class="emoji" src="/emoji/e/'+e+(window.devicePixelRatio>=2?"_2x":"")+'.png"'+(t?' alt="'+t+'"':"")+(browser.msie&&Number(browser.version)>8?' contenteditable="false"':"")+">"}function s(e){return o(Object(a.emojiSymbolToByteHex)(e),Object(i.encodeHTMLEntities)(e),!0)}var c=function(e){return function(e,t){if(browser.ipad||browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(var n=0;n<2;n++)Object.keys(r.EMOJI_PREFIXED_REPLACES).forEach((function(t){e.replace(r.EMOJI_PREFIXED_REPLACES[t],(function(e,n,r,a){return(n||"")+o(t)+(a||"")}))}));return Object.keys(r.EMOJI_REPLACES).forEach((function(t){e=e.replace(r.EMOJI_REPLACES[t],(function(e,n,r){return o(t)+(r||"")}))})),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace(Object(r.emojiRegex)(),s)),e}(e,!0)}},"9kLB":function(e,t,n){"use strict";var r,a;n.r(t),n.d(t,"EVENT_STATES",(function(){return r})),n.d(t,"CONNECT_EVENTS",(function(){return a})),function(e){e.FIRE="",e.FAILURE="Failed",e.SUCCESS="Result"}(r||(r={})),function(e){e.ADD_TO_COMMUNITY="VKWebAppAddToCommunity",e.ADD_TO_COMMUNITY_PRELOAD="VKWebAppAddToCommunityPreload",e.ADD_TO_FAVORITES="VKWebAppAddToFavorites",e.ADD_TO_MENU="VKWebAppAddToMenu",e.ADD_TO_HOME_SCREEN_INFO="VKWebAppAddToHomeScreenInfo",e.ALLOW_MESSAGES_FROM_GROUP="VKWebAppAllowMessagesFromGroup",e.ALLOW_MESSAGES_FROM_GROUP_PRELOAD="VKWebAppAllowMessagesFromGroupPreload",e.ALLOW_NOTIFICATIONS="VKWebAppAllowNotifications",e.ALLOW_NOTIFICATIONS_PRELOAD="VKWebAppAllowNotificationsPreload",e.COPY_TEXT="VKWebAppCopyText",e.CALL_API_METHOD="VKWebAppCallAPIMethod",e.CLOSE="VKWebAppClose",e.DENY_NOTIFICATIONS="VKWebAppDenyNotifications",e.FLASH_GET_INFO="VKWebAppFlashGetInfo",e.FLASH_SET_LEVEL="VKWebAppFlashSetLevel",e.GET_AUTH_TOKEN="VKWebAppGetAuthToken",e.GET_AUTH_TOKEN_PRELOAD="VKWebAppGetAuthTokenPreload",e.GET_CLIENT_VERSION="VKWebAppGetClientVersion",e.GET_COMMUNITY_AUTH_TOKEN="VKWebAppGetCommunityAuthToken",e.GET_COMMUNITY_TOKEN="VKWebAppGetCommunityToken",e.GET_COMMUNITY_AUTH_TOKEN_PRELOAD="VKWebAppGetCommunityAuthTokenPreload",e.GET_EMAIL_PRELOAD="VKWebAppGetEmailPreload",e.GET_EMAIL="VKWebAppGetEmail",e.GET_FRIENDS="VKWebAppGetFriends",e.GET_FLASH_INFO="VKWebAppGetFlashInfo",e.GET_GEODATA="VKWebAppGetGeodata",e.GET_PERSONAL_CARD="VKWebAppGetPersonalCard",e.GET_PHONE_NUMBER_PRELOAD="VKWebAppGetPhoneNumberPreload",e.GET_PHONE_NUMBER="VKWebAppGetPhoneNumber",e.GET_USER_INFO="VKWebAppGetUserInfo",e.INIT="VKWebAppInit",e.JOIN_GROUP="VKWebAppJoinGroup",e.JOIN_GROUP_PRELOAD="VKWebAppJoinGroupPreload",e.LEAVE_GROUP="VKWebAppLeaveGroup",e.LEAVE_GROUP_PRELOAD="VKWebAppLeaveGroupPreload",e.LOCATION_CHANGED="VKWebAppLocationChanged",e.OPEN_APP="VKWebAppOpenApp",e.OPEN_CONTACTS="VKWebAppOpenContacts",e.OPEN_IN_NATIVE_APP="VKWebAppOpenInNativeApp",e.OPEN_PAY_FORM="VKWebAppOpenPayForm",e.OPEN="VKWebAppOpenQR",e.REDIRECT="VKWebAppRedirect",e.RESIZE_WINDOW="VKWebAppResizeWindow",e.SCROLL="VKWebAppScroll",e.SEND_PAYLOAD="VKWebAppSendPayload",e.SEND_TO_CLIENT="VKWebAppSendToClient",e.SEND_TO_CLIENT_PRELOAD="VKWebAppSendToClientPreload",e.SETTINGS="VKWebAppSettings",e.SET_LOCATION="VKWebAppSetLocation",e.SET_TITLE="VKWebAppSetTitle",e.SET_VIEW_SETTINGS="VKWebAppSetViewSettings",e.SHARE="VKWebAppShare",e.SHOW_NEW_POST_BOX="VKWebAppShowNewPostBox",e.SHOW_IMAGES="VKWebAppShowImages",e.SHOW_INVITE_BOX="VKWebAppShowInviteBox",e.SHOW_STORY_BOX="VKWebAppShowStoryBox",e.SHOW_LEADER_BOARD_BOX="VKWebAppShowLeaderBoardBox",e.SHOW_ORDER_BOX="VKWebAppShowOrderBox",e.SHOW_REQUEST_BOX="VKWebAppShowRequestBox",e.SHOW_WALL_POST_BOX="VKWebAppShowWallPostBox",e.TAPTIC_IMPACT_OCCURRED="VKWebAppTapticImpactOccurred",e.TAPTIC_NOTIFICATION_OCCURRED="VKWebAppTapticNotificationOccurred",e.TAPTIC_SELECTION_CHANGED="VKWebAppTapticSelectionChanged",e.UPDATE_CONFIG="VKWebAppUpdateConfig",e.VIEW_UPDATE_NAVIGATION_STATE="VKWebAppViewUpdateNavigationState",e.OPEN_ARTICLE_EDIT="VKWebAppOpenArticleEditor",e.OPEN_ARTICLE="VKWebAppOpenArticle"}(a||(a={}))},"9y81":function(e,t,n){"use strict";n.r(t),n.d(t,"IconWd",(function(){return o}));var r=n("bZ/P"),a=n("Mc5h"),i=function(e){var t,n=e.icon,i=e.class||e.mix;return Object(a.default)({mix:r.default.class(i,"Icon",(t={},t[n]=!0,t.active=e.active,t.blue=e.blue,t.bluer=e.bluer,t.dark=e.dark,t.selected=e.selected,t.small=e.small,t.white=e.white,t)),url:e.url,attrs:e.attrs})};function o(e){var t,n=e.icon;return{class:[e.class,Bem.class("Icon",(t={},t[n]=!0,t.active=e.active,t.blue=e.blue,t.bluer=e.bluer,t.dark=e.dark,t.selected=e.selected,t.small=e.small,t.white=e.white,t))],href:e.url,attrs:e.attrs}}Object.assign(i,{toggleActive:function(e){e.classList.toggle(s)}});var s="Icon_active";t.default=i;window.Icon=i},BoyB:function(e,t,n){"use strict";n.r(t);var r=n("TYsd"),a=n("z9sQ"),i=n("Y6JH"),o=n("/0lW"),s=function(e){void 0===e&&(e={});var t=[e.class||e.mix,a.default.class("Loading",{white:e.white,large:e.large,spinner:e.spinner})];if(e.spinner)return r.default.html({inner:[Object(i.default)({icon:Object(o.getSpinner16Icon)()})],class:t,tag:"div"});return r.default.html({class:t,inner:{class:"Loading__items",inner:[{class:"Loading__item Loading__item_0"},{class:"Loading__item Loading__item_1"},{class:"Loading__item Loading__item_2"}]}})};t.default=s;window.Loading=s},CQvH:function(e,t,n){"use strict";n.r(t),n.d(t,"isTabbing",(function(){return D})),n.d(t,"setFocusTrap",(function(){return O})),n.d(t,"setMenuNavigation",(function(){return w})),n.d(t,"expandPopup",(function(){return E})),n.d(t,"onTransitionEnd",(function(){return y})),n.d(t,"sayIt",(function(){return o}));var r=n("OcsD"),a=n("H5mD"),i=n("UxAg");function o(e,t){var n=(void 0===t?{}:t).important,r=void 0!==n&&n;if(e){Object(i.$$)('[id^="say-it-"]').forEach((function(e){document.body.removeChild(e)}));var a=document.createElement("span"),o=r?"alert":"status";a.setAttribute("aria-live",r?"assertive":"polite"),a.setAttribute("role",o),a.classList.add("visually-hidden"),a.id="say-it-"+Date.now(),document.body.appendChild(a),setTimeout((function(){a.innerHTML=e}),10)}}var s=function(){function e(e){var t=e.capacity,n=void 0===t?1:t;this._capacity=n,this.clear()}var t=e.prototype;return t.add=function(e){this._cursor>=this._capacity&&(this._cursor=0),this._buffer[this._cursor]=e,this._cursor++,this._size<this._capacity&&this._size++},t.clear=function(){this._buffer=Array(this._capacity),this._cursor=0,this._size=0},t.size=function(){return this._size},t.toArray=function(){return this._buffer},e}(),c=n("DM2o"),u=n("Cz26"),l=n("W9Tc");!function(){var e=new s({capacity:15}),t=new s({capacity:15}),n=new s({capacity:15}),r=new s({capacity:15}),a=null;if(window.addEventListener("mousemove",(function(){if(a){var t=Date.now()-a;t>500&&(t-500<500&&e.add(!1),a=null)}else a=Date.now()}),{capture:!0,passive:!0}),new u.Timers({timer:1e4}).add((function(){e.add(!0)})),window.addEventListener("touchstart",(function(e){if(e&&e.touches)if(e.touches.length>1)t.add(!1);else{if(1===e.touches.length){var n=e.touches[0];if(0!==n.radiusX&&0!==n.radiusY)return void t.add(!1)}t.add(!0)}}),{capture:!0,passive:!0}),window.addEventListener("click",(function(a){if(a&&a.target){var i=0===a.pageX&&0===a.pageY&&0===a.screenX&&0===a.screenY,o=a.target.getBoundingClientRect(),s=Math.abs(o.width/2+o.left-a.clientX)<2&&Math.abs(o.height/2+o.top-a.clientY)<2;if(i||s){n.add(!0);try{r.add(function e(t){if(t.id)return"#"+t.id;var n=t.tagName.toLowerCase(),r="";t.name&&(r+='[name="'+t.name+'"]');var a="";!r&&t.className&&(a=t.className.split(/ +/g).map((function(e){return"."+e})).join(""));var i="";if(!r)for(var o=0,s=0;s<t.parentNode.children.length;s++){var c=t.parentNode.children[s];if(c.tagName===t.tagName&&o++,t===c){i=":nth-of-type("+o+")";break}}var u=n+r+a+i;return t.parentNode===document.body?"body > "+u:e(t.parentNode)+" > "+u}(a.target)+"—"+s+"—"+i)}catch(e){}}else n.add(!1),r.add(!1);if(n.size()>3){var u=e.toArray().filter((function(e){return e})).length>=Math.round(e.size()/2),l=t.toArray().filter((function(e){return e})).length>=Math.round(t.size()/2),d=n.toArray().filter((function(e){return e})).length>=Math.round(n.size()/2);if(localStorage&&localStorage.getItem){var p=localStorage.getItem("isKeyboardUser1"),_=d&&l&&u,h=document.querySelector(".keyboardUser");h&&(_?(h.style.display="block",h.innerHTML=e.toArray().filter((function(e){return e})).length+"."+t.toArray().filter((function(e){return e})).length+"."+n.toArray().filter((function(e){return e})).length):h.style.display="none"),(_&&null===p||null!==p&&p!==String(_))&&(localStorage.setItem("isKeyboardUser1",_),Object(c.statlogsValueEvent)("accessibility","is_keyboard_user",_))}}}}),{capture:!0,passive:!0}),Object(l.partConfigEnabled)("mvk_show_a11y_box")){var i=window.onDOMReady||function(e){setTimeout(e,5e3)};i&&i((function(){if(document.body&&!document.querySelector(".keyboardUser")){var e=document.createElement("div");e.style.background="rgba(230,0,255,.7)",e.style.position="fixed",e.style.top="3px",e.style.right="3px",e.style.color="#fff",e.style.fontSize="10px",e.style.minWidth="8px",e.style.height="14px",e.style.lineHeight="14px",e.style.textAlign="center",e.style.border="1px solid rgba(255,255,255, 0.2)",e.style.display="none",e.style.zIndex=9999999999,e.innerHTML="K",e.style.padding="0 3px",e.className="keyboardUser";var t=document.createElement("textarea");if(t.style.position="fixed",t.style.opacity=.9,t.style.top=0,t.style.right=0,t.style.bottom=0,t.style.left=0,t.style.width="100%",t.style.padding="10px",t.style.zIndex=9999999,t.style.display="none",document.body.appendChild(t),e.addEventListener("click",(function(){t.innerHTML=r.toArray().join("\n\n"),"none"===t.style.display?t.style.display="block":t.style.display="none"})),document.body.appendChild(e),localStorage&&localStorage.getItem)"true"===localStorage.getItem("isKeyboardUser1")&&(e.style.display="block")}}))}}();var d=38,p=40,_=36,h=35,f=32,m=13,b=27,v=9,g=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","audio","video","[contenteditable]","[tabindex]"];function A(){document.body.classList.add("tabbing")}function D(){return document.body.classList.contains("tabbing")}function O(e){if(a.isIOS&&a.iosMajor>8)return!1;if(!e)throw new Error("A11y: No element passed to setFocusTrap");var t=Array.from(e.querySelectorAll(g.join()));if(!(t=t.filter((function(e){return null!==e.offsetParent}))).length)return!1;var n=t[0],r=t[t.length-1],i=S(e,(function(e){var t=e.event,a=e.exit;t.keyCode===v&&(t.shiftKey?document.activeElement===n&&(t.preventDefault(),r.focus()):document.activeElement===r&&(t.preventDefault(),n.focus())),t.keyCode===b&&a()}));return cur.destroy.push((function(){i()})),setTimeout((function(){n.focus()})),i}function w(e,t){void 0===t&&(t={});var n=void 0===t.enableInitialFocus||t.enableInitialFocus;if(a.isIOS&&a.iosMajor>8)return!1;if(!e)throw new Error("A11y: No element passed to setMenuNavigation");if(!["menu","menubar"].includes(e.getAttribute("role")))throw new Error('A11y: Element must be `role="menu"` or `role="menubar"`');var r=['[role="menu"]','[role="menubar"]'].join(),i=['[role="menuitem"]','[role="menuitemradio"]','[role="menuitemcheckbox"]'].join(),o=Array.from(e.querySelectorAll(r)),s=Array.from(e.querySelectorAll(i));if(o.forEach((function(e){Array.from(e.querySelectorAll(i)).forEach((function(e){s[s.indexOf(e)]=null}))})),!(s=(s=s.filter((function(e){return e}))).filter((function(e){return null!==e.offsetParent}))).length)return!1;if("menu"===e.getAttribute("role")&&!s.every((function(e){return"-1"===e.getAttribute("tabindex")})))throw new Error('A11y: Every `menuitem` must have `tabindex="-1" attribute`');var c=S(e,(function(e){var t=e.event,n=e.exit,r=document.activeElement,a=s[0],i=s[s.length-1||0],o=s.indexOf(r),c=s[o+1],u=s[o-1];t.keyCode===d&&(u?k(u,t):i&&k(i,t)),t.keyCode===p&&(c?k(c,t):a&&k(a,t)),t.keyCode===_&&a&&k(a,t),t.keyCode===h&&i&&k(i,t),t.keyCode!==f&&t.keyCode!==m||(n(),r.click(),t.preventDefault()),t.keyCode!==b&&t.keyCode!==v||n()}),{onExit:function(){}});return n&&setTimeout((function(){k(s[0])})),c}function E(e){if(!e)throw new Error("A11y: No element passed to expandPopup");if(!e.getAttribute("aria-haspopup"))throw new Error("A11y: No `aria-haspopup` attribute on expanded element");if(null==e.getAttribute("aria-expanded"))throw new Error("A11y: No `aria-expanded` attribute on expanded element");if(null==e.getAttribute("aria-controls"))throw new Error("A11y: No `aria-controls` attribute on expanded element");if(!document.getElementById(e.getAttribute("aria-controls")))throw new Error("A11y: No element that the `aria-controls` refers to. Try to call `expandPopup` _after_ appending a popup");return e.setAttribute("aria-expanded",!0),S(e,(function(e){var t=e.event,n=e.exit;t.keyCode===b&&n()}),{onExit:function(){e.setAttribute("aria-expanded",!1)}})}function y(e,t){return void 0===t&&(t=10),new Promise((function(n){var r=setTimeout((function(){e.removeEventListener("transitionrun",a),n()}),t),a=function t(){clearTimeout(r),e.removeEventListener("transitionrun",t);e.addEventListener("transitionend",(function t(){e.removeEventListener("transitionend",t),n()}),!1)};e.addEventListener("transitionrun",a,!1)}))}function k(e,t){t&&(A(),t.preventDefault());var n=!1;null!=e.getAttribute("tabindex")&&(n=!0),n||e.setAttribute("tabindex",0),e.focus(),setTimeout((function(){n||e.removeAttribute("tabindex")}))}function S(e,t,n){void 0===n&&(n={}),e._enteredA11yElementKeyDownHandler&&document.removeEventListener("keydown",e._enteredA11yElementKeyDownHandler);var a=document.activeElement,i=!1;function o(t){if(t&&o.exitIntent&&!1===o.exitIntent(t))t.preventDefault();else if(!i){i=!0;var c=Object(r.scrollTop)(),u=Array.from(e.querySelectorAll(g.join()));document.activeElement&&!u.includes(document.activeElement)||(a&&k(a),Object(r.scrollTop)(c)),document.removeEventListener("keydown",s),n.onExit&&n.onExit()}}function s(e){e.ctrlKey||e.altKey||e.metaKey||t({event:e,exit:o.bind(null,e)})}return document.addEventListener("keydown",s),e._enteredA11yElementKeyDownHandler=s,o}addEvent(window,"keydown",(function(e){e.keyCode===v&&A()}),{passive:!0}),addEvent(window,"mousedown touchstart",(function(){document.body.classList.remove("tabbing")}),{capture:!0,passive:!0}),document._buttonA11yFix||(document._buttonA11yFix=!0,document.addEventListener("keydown",(function(e){e.ctrlKey||e.altKey||e.metaKey||(e.keyCode!==m&&e.keyCode!==f||"button"!==e.target.getAttribute("role")||(e.target.click(),e.preventDefault()),e.keyCode!==f||"checkbox"!==e.target.getAttribute("role")&&"radio"!==e.target.getAttribute("role")||(e.target.click(),e.preventDefault()))})))},Cbap:function(e,t,n){"use strict";n.r(t);var r=function(){function e(){this.routes=[]}e.getRouter=function(){return window.router||(window.router=new e),window.router};var t=e.prototype;return t.addRoute=function(e,t,n){this.routes.push({isActive:!1,test:e,activateCallback:t,deactivateCallback:n})},t.test=function(e){var t=e.test;if(nav.cur)return"function"==typeof t?t(window.nav.cur):t instanceof RegExp?t.test(window.nav.cur):!(!window.nav.cur||"string"!=typeof t)&&window.nav.cur.startsWith(t)},t.deactivateAllRoutes=function(){this.routes=this.routes.map((function(e){return e.isActive=!1,e.deactivateCallback&&e.deactivateCallback(),e}))},t.checkRoutes=function(){var e=this;this.routes=this.routes.map((function(t){var n=e.test(t);return n&&t.activateCallback&&t.activateCallback(),!n&&t.isActive&&t.deactivateCallback&&t.deactivateCallback(),t.isActive=n,t}))},e}();t.default=r,window.Router=r},Cz26:function(e,t,n){"use strict";n.r(t),n.d(t,"Timers",(function(){return r}));var r=function(){function e(e){var t=e.timer,n=void 0===t?1e3:t,r=e.autostart,a=void 0===r||r;this._list=[],this._timer=n,this._autostart=a}var t=e.prototype;return t._animate=function(e){var t=!1;return function n(){t||requestAnimationFrame((function(){t||(e(),n())}))}(),function(){t=!0}},t.add=function(e,t){var n=(void 0===t?{}:t).id;this.remove(e),n?(this.remove(n),this._list.push({id:n,callback:e})):this._list.push({callback:e}),!this._cancellation&&this._autostart&&this.start()},t.remove=function(e){this._list="function"==typeof e?this._list.filter((function(t){return t.callback!==e})):this._list.filter((function(t){return t.id!==e}))},t.start=function(){var e=this,t=Date.now();return this._cancellation=this._animate((function(){var n=Date.now();t+e._timer<n&&(e._list.forEach((function(n){var r=t;Promise.resolve().then((function(){var t=Date.now()-(r+e._timer);n.callback(Math.floor(t/e._timer)+1)}))})),t=n)})),this._cancellation},t.stop=function(){return!!this._cancellation&&(this._cancellation(),this._list=[],!0)},e}()},GVTI:function(e,t,n){"use strict";n.r(t),n.d(t,"_PhotoviewPage_tags",(function(){return _}));var r=n("vOib"),a=n("rc7J"),i=n("fdw3"),o=n("29dZ"),s=n("vk58"),c=n("Q8gl"),u=n("O5lf"),l=n("vhZE");function d(e){var t="wi_like_wrap";e.liked_people||(t+=" is_empty");var n="PhotoviewPage__description";return e.photo.description||(n+=" PhotoviewPage__description--empty"),{inner:[e.photo.caption?{inner:[Wd.wrap(e.photo.caption)],class:"PhotoviewPage__caption",tag:"div"}:null,{inner:[Wd.wrap(e.photo.description)],class:n,tag:"div"},{inner:[e.liked_people?e.liked_people:null],class:t,tag:"div"},e.buttons?{inner:[{inner:[e.buttons],class:"wi_buttons",tag:"div"}],class:"wi_buttons_wrap",tag:"div"}:null,e.author,e.replies],class:"PhotoviewPage__footer",tag:"div"}}function p(e){var t=window.lang;return{inner:[{inner:[e.edit_data.rotate.can_rotate?Object(s.default)({inner:[Object(o.default)({inner:[t.mobile_photos_edit_rotate_left],url:e.edit_data.rotate.left,stretch:!0}),Object(o.default)({inner:[t.mobile_photos_edit_rotate_right],url:e.edit_data.rotate.right,stretch:!0})],nowrap:!0}):null,{inner:[{inner:[t.mobile_photos_edit_desc_label],class:"fi_label",tag:"dt"},{inner:[{inner:[e.photo.description],name:"text",class:"textfield",rows:"4",tag:"textarea"}],class:"iwrap",tag:"dd"}],class:"fi_row",tag:"dl"},{inner:[{inner:[t.mobile_photos_edit_album_label],class:"fi_label",tag:"dt"},{inner:[{inner:[e.edit_data.albums.map((function(e){return{inner:[e.name],selected:e.selected?"selected":null,value:e.id,tag:"option"}}))],name:"aid",tag:"select"},{inner:[Object(c.default)({withoutWrap:!0,name:"cover",label:t.mobile_photos_edit_cover_label,type:"checkbox"})],class:"fi_subrow",tag:"div"}],class:"iwrap",tag:"dd"}],class:"fi_row",tag:"dl"},{inner:[Object(s.default)({inner:[Object(o.default)({inner:[t.mobile_photos_edit_save_btn],type:"submit"}),Object(o.default)({inner:[t.mobile_cancel],theme:"link",url:e.edit_data.back_url})]})],class:"fi_row",tag:"div"}],action:e.edit_data.action,method:"post",tag:"form"}],class:"form_item",tag:"div"}}function _(e){return void 0===e&&(e=[]),{inner:[Object.keys(e).map((function(t){return{inner:[{class:"fill",tag:"div"}],class:"pv_tag",id:"pv_tag"+t,style:function(e){if(!Object(i.isArray)(e))return"";var t=e[0];return Object(i.isArray)(t)?"left: "+t[0]+"%; top: "+t[1]+"%; width: "+t[2]+"%; height: "+t[3]+"%":""}(e[t]),tag:"div"}}))],class:"PhotoviewPage__tags",tag:"div"}}var h=function(e){void 0===e&&(e={});var t=e.info||{},n=e.photo||{},o=e.is_loading||!1,s=e.navigation_buttons||{},c=Object(i.concatValues)("PhotoviewPage ",e.class);e.info&&(e.author=Object(a.default)({url:t.url,author_url:t.author_url,avatar:t.avatar,title:t.title,subtitle:t.subtitle,withoutBottomBorder:!e.has_replies})),e.photo||(e.photo={}),e.photo.description||(e.photo.description="");var h,f="",m=null;o&&(c=Object(i.concatValues)(c," PhotoviewPage--skeleton"),n.width?f+=" width"+e.width+"px;":m=Wd.wrap(Object(u.default)({mix:"al_loading",type:"pageLoader"})));var b=["PhotoviewPage__photo"];e.photo.restriction&&("block"===e.photo.restriction.type?b.push("PhotoviewPage__photo--block"):"blur"===e.photo.restriction.type&&b.push("PhotoviewPage__photo--blur")),h=[{src:n.src,style:f,tag:"img"},_(e.tags)];var v,g=!!e.photo.restriction;return g&&((v=e.photo.restriction).width=e.width,v.height=e.height||e.width),Object(r.default)({inner:[{inner:[{inner:[m||{inner:[h],class:b,href:n.href,tag:"a"},{inner:[Object(l.default)(v)],class:"PhotoviewPage__restrictedInfo",style:g?"":"display: none;",tag:"div"},s],class:"PhotoviewPage__thumb",tag:"div"},e.edit_mode?p(e):d(e)],id:e.photo.id,tag:"div"}],class:c})};t.default=h},GtpT:function(e,t,n){"use strict";n.r(t),n.d(t,"getDataFromDOM",(function(){return c}));var r=n("Y6JH"),a=n("HaOv"),i=n("xTMR");var o=function(e){var t,n=e.album,o=n.url,s=n.title,c=n.photos_count_label,u=n.restriction,l="AlbumItem al_album";n.thumb?t=n.thumb:u||(l+=" AlbumItem--empty");var d,p="";if(u){var _={};_[u.type]=!0,p=Bem.class("AlbumItem__restriction",_,"--")}if(u&&"geo"===u.type)d={inner:[{inner:[Object(r.default)({icon:Object(a.getDoNotDisturbOutline56Icon)()})],class:p,tag:"div"}],class:"AlbumItem__thumb",tag:"div"};else{var h=[Bem.class("AlbumItem__thumb",{blur:u&&"blur"===u.type},"--")];d={inner:[u&&u.type?{inner:[Object(r.default)({icon:Object(i.getHideOutline56Icon)()})],class:p,tag:"div"}:null],class:h,"data-thumb-id":n.thumb_id,style:"background-image: url("+t+")",tag:"div"}}return{inner:[{inner:[d],class:"AlbumItem__thumbWrap",tag:"div"},{inner:[{inner:[s],class:"AlbumItemInfo__title",tag:"div"},{inner:[c],class:"AlbumItemInfo__subtitle",tag:"div"}],class:"AlbumItemInfo",tag:"div"}],href:o,class:l,onclick:e.onClick,tag:"a"}},s=n("OcsD");function c(e){if(!e.classList.contains("AlbumItem"))return{};var t=Object(s.val)($(".AlbumItemInfo__title",e))||"",n=Object(s.val)($(".AlbumItemInfo__subtitle",e))||"",r=e.getAttribute("href"),a=$(".AlbumItem__thumb",e),i=/url\("(.*)"\)/.exec(a.style.backgroundImage),o=!!i&&i[1],c=$(".AlbumItem__restriction",e),u=!1;return c&&(c.classList.contains("AlbumItem__restriction--blur")?u={type:"blur"}:c.classList.contains("AlbumItem__restriction--geo")&&(u={type:"geo"})),{album:{title:Wd.wrap(t),photos_count_label:n,url:r,thumb:o,restriction:u},onClick:e.getAttribute("onclick")}}t.default=o},H5mD:function(e,t,n){"use strict";n.r(t),n.d(t,"IPHONE_SAFARI_BOTTOM_BAR",(function(){return i})),n.d(t,"IPHONE_X_SAFARI_BOTTOM_BAR",(function(){return o})),n.d(t,"IPHONE_KEYBOARD_REJECT_OFFSET",(function(){return s})),n.d(t,"IOS_NO_KEYBOARD_ALLOWED_OFFSET",(function(){return c})),n.d(t,"isIPad",(function(){return d})),n.d(t,"isIPhone",(function(){return p})),n.d(t,"isIOS",(function(){return _})),n.d(t,"isIPadOS",(function(){return l})),n.d(t,"iosMajor",(function(){return r})),n.d(t,"iosMinor",(function(){return a})),n.d(t,"isWKWebView",(function(){return m})),n.d(t,"isScrollBasedViewport",(function(){return f})),n.d(t,"isIPhoneX",(function(){return b})),n.d(t,"isIOSChrome",(function(){return v})),n.d(t,"isLandscapePhone",(function(){return g})),n.d(t,"checkIPadOS",(function(){return A}));var r,a,i=45,o=85,s=180,c=70,u=navigator.userAgent.toLowerCase(),l=A(u),d=l||-1!==u.indexOf("ipad"),p=!d&&-1!==u.search(/iphone|ipod/),_=p||d,h=_&&navigator.userAgent.match(/OS ([\d_]+) like Mac OS X/i);l&&(r=13,a=0),h&&(h=h[1].split("_"),r=+h[0],a=+h[1]),h=null;var f=r<13&&!(11===r&&a<3),m=_&&function(e){if(window.webkit&&window.webkit.messageHandlers)return!0;var t=/constructor/i.test(window.HTMLElement),n=!!window.indexedDB;if(-1===e.indexOf("safari")||-1===e.indexOf("version")||navigator.standalone){if(!n&&t||!window.statusbar||!window.statusbar.visible);else if(!t||n)return!0}else;return!1}(u),b=_&&375===screen.width&&812===screen.height&&3===window.devicePixelRatio,v=-1!==u.search(/crios/i);function g(){return 90===Math.abs(window.orientation)&&!d}function A(e){var t=!/ipad|iphone|ipod/.test(e);return!(!/mac os/.test(e)||!t||"boolean"!=typeof navigator.standalone)}},I3vf:function(e,t,n){"use strict";n.r(t);var r=n("wx14"),a=n("JX7q"),i=n("dI71"),o=n("Vy5E"),s=n("Y96s"),c=n("gNaZ"),u=n("4zn2"),l=n("PU8N"),d={error_type:"client_error",code:u.ERROR_CODES.CONNECTION_LOST},p=function(e){function t(t){var n;return(n=e.call(this,t)||this).showConfirm=function(e){n.params.modal.pic=e.photo_url,n.params.modal.title=e.title,n.params.modal.text=e.message,n.modal=new s.default(Object(r.default)({},n.params.modal)),c.default.push(n.modal);var t=document.querySelector(".vk_app_modal_container__pic");t&&(t.onload=function(){t.classList.add("vk_app_modal_container__pic--loaded")})},n.loadItemData=function(){return new Promise((function(e,t){var r=0;n.interval=setInterval((function(){ajax.post(n.controller,{act:"handle_vk_connect_event",event:n.getEventName(),hash:n.getEventHash(),item_id:n.itemId,order_id:n.orderId,app_id:n.app.appId},{onDone:function(a){switch((a=JSON.parse(a)).hasOwnProperty("error")&&t(a.error),a.status){case"pending":n.orderId=a.order_id,r++>=30&&t({error_type:"client_error",code:u.ERROR_CODES.CUSTOM,reason:"Can't load product"});break;case"loaded":n.orderId=a.order_id,n.confirmHash=a.confirm_hash,n.orderHash=a.order_hash,e(a.item_data)}},onFail:function(){t(d)}})}),1e3)}))},n.confirmOrder=function(){n.hideLoader(),ajax.post(n.controller,{act:"handle_vk_connect_event",event:"confirm_order",item_id:n.itemId,order_id:n.orderId,app_id:n.app.appId,hash:n.confirmHash,order_hash:n.orderHash},{onDone:function(e){"charged"===(e=JSON.parse(e)).status?(n.successHandler(e),c.default.pop(n.modal)):(c.default.pop(n.modal),n.errorHandler(e.error))},onFail:function(){n.onError(d)}})},n.params.handlerName="VKWebAppShowOrderBox",n.useUI=!1,n.callApi=!1,n.controller="/apps",n.itemId="",n.orderId=0,n.params.modal={buttons:[{title:getLang("vkapps_connect_modal_cancel"),type:"deny",action:n.cancel.bind(Object(a.default)(n))},{title:getLang("vkapps_connect_modal_buy"),type:"success",action:n.confirmOrder}],containerClass:"vk_app_modal_container--order",allowAction:n.confirmOrder,cancelAction:n.cancel.bind(Object(a.default)(n)),picClass:"vk_app_modal_container__pic--buy",withoutAnimation:!0,onlyButtonHide:!0},n.rawData=null,n}Object(i.default)(t,e);var n=t.prototype;return n.setData=function(t,n){e.prototype.setData.call(this,t,n),this.itemId=this.itemId?this.itemId:t.item,this.rawData=t},n.showLoader=function(){var e={buttons:[{title:getLang("vkapps_connect_modal_cancel"),type:"deny",action:this.cancel.bind(this)},{title:getLang("vkapps_connect_modal_buy"),type:"success",action:this.cancel.bind(this),disabled:!0}],title:getLang("vkapps_connect_buy_waiting_item_title"),text:getLang("vkapps_connect_buy_waiting_item_desc"),cancelAction:this.cancel.bind(this),picClass:"vk_app_modal_container__pic--loader",pic:"/images/svg_icons/vk_apps/vk_app_spinner_100.svg",containerId:this.params.modal.containerId,onlyButtonHide:!0};this.loader=new s.default(Object(r.default)({},e)),c.default.push(this.loader)},n.hideLoader=function(){this.loader&&(c.default.pop(this.loader),this.loader.destroy()),this.loader=null},n.handler=function(e,t,n){var r=this;this.setData(e,t),this.callback=n,Object(l.isMvk)()?(this.showLoader(),this.makeOrder()):(window.cur.app.registerVkBridgeCallback("onOrderCancel",(function(){r.errorHandler({reason:"User denied",code:u.ERROR_CODES.USER_DENIED})})),window.cur.app.registerVkBridgeCallback("onOrderSuccess",(function(e){r.successHandler({success:!0,order_id:e})})),window.cur.app.registerVkBridgeCallback("onOrderFail",(function(e){r.errorHandler({reason:"Payment error",code:e})})),window.cur.app.funcs.showOrderBox(this.rawData))},n.makeOrder=function(){var e=this;this.loadItemData().then((function(t){clearInterval(e.interval),e.hideLoader(),e.showConfirm(t)})).catch((function(t){e.onError(t)}))},n.cancel=function(){clearInterval(this.interval),this.denyUIAction(),this.hideLoader()},n.onError=function(e){clearInterval(this.interval),this.errorHandler(e),c.default.pop(this.modal),this.hideLoader()},t}(o.default);t.default=p},I7Du:function(e,t,n){"use strict";n.r(t);var r=n("z9sQ");var a=function(e){void 0===e&&(e={});var t=e.on_change;return{class:[e.mix||e.class,r.default.class("Select",{disabled:e.disabled})],inner:[{class:"Select__native",tag:"select",name:e.name,disabled:e.disabled,onchange:e.nativeOnChange?e.onChange:t?["Select._onChange","this",t]:null,required:e.required,inner:e.options.map((function(e){return e?{class:"Select__option",tag:"option",value:e.value,selected:e.selected?"selected":null,inner:e.label,attrs:e.attrs}:null}))}]}};t.default=a},KiYr:function(e,t,n){"use strict";n.r(t);var r=n("LmmP");t.default=r.default},LmmP:function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",(function(){return a}));var r=n("z9sQ");function a(e){return{inner:[e.title?{inner:[e.title],class:"Alert__title",tag:"div"}:null,{inner:[e.text||e.inner],class:"Alert__description",tag:"div"}],class:[e.class,r.default.class("Alert",{theme:e.theme})].join(" "),tag:"div"}}t.default=a},Mc5h:function(e,t,n){"use strict";n.r(t);var r=n("2IoG");t.default=r.default,window.Brick=r.default},O5lf:function(e,t,n){"use strict";n.r(t);var r=n("9y81"),a=n("Y6JH"),i=n("z9sQ"),o=n("Fbxv"),s=function(e){void 0===e&&(e={});var t=e.mix||"",n="pageLoader"===(e.type||"gray"),s=i.default.class("Spinner",{pageLoader:n,hidden:e.isHidden,fixed:e.isFixed},"--"),c=t+" "+s;if(n)return Wd.html({inner:[Object(a.default)(Object(o.getLoading40Icon)())],class:c,tag:"div"});return Object(r.default)({mix:c,icon:"spinner"})};var c=n("jE6c");var u={show:function(e){Object(c.isElement)(e)&&e.classList.remove("Spinner--hidden")},hide:function(e){Object(c.isElement)(e)&&(e.classList.contains("Spinner--hidden")||e.classList.add("Spinner--hidden"))}};Object.assign(s,u),window.Spinner=s;t.default=s},OGfC:function(e,t,n){"use strict";n.r(t);var r=n("JX7q"),a=n("dI71"),i=n("W9Tc");function o(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}var s=n("W0P9"),c=n("Xrg9"),u=function(){function e(e,t){var n=this;this.sw=e,this.SWClient=t,vk.id&&this.canBeEnabled().then((function(e){e&&(n.listenPermission(),n.loadEndpoint()&&n.update().then(n.checkMessageState.bind(n)))}))}e.getPermission=function(){return Notification.permission};var t=e.prototype;return t.cleanNotification=function(){this.sw.action("cleanNotification")},t.canBeEnabled=function(){return Promise.resolve(this.isSupported())},t.isSupported=function(){return"PushManager"in window&&"Notification"in window&&this.SWClient.isSupported()},t.loadEndpoint=function(){return c.default.get("push_notifier_endpoint"+vk.id)||!1},t.saveEndpoint=function(e){c.default.set("push_notifier_endpoint"+vk.id,e||!1)},t.action=function(e,t){return this.sw.action(e,t)},t._needupdate=function(e){var t=Date.now(),n=this.loadEndpoint(),r=c.default.get("push_notifier_subscribed_ts"+vk.id),a=!1;return(n!==e.endpoint||!r||t-r>6e4)&&(c.default.set("push_notifier_subscribed_ts"+vk.id,t),a=!0),a},t.listenPermission=function(){var e=this;Object(i.partConfigEnabled)("push_notifier")&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then((function(t){t.onchange=function(){return e.update()}}))},t.update=function(){var t=this;return this.updatePermission().then((function(n){return n===e.PUSH_NOTIFIER_PERMISSION_GRANTED?t.subscribe().catch((function(t){t!==e.SUBSCRIBE_ERROR_NETWORK&&Object(s.error)("can not update subscribe")})):Promise.reject("premession_not_granted")})).catch(s.error)},t.updatePermission=function(){var t=e.getPermission();if(t!==e.PUSH_NOTIFIER_PERMISSION_GRANTED){var n=this.loadEndpoint();if(n)return this.unsubscribe(n).then((function(){return t}))}return Promise.resolve(t)},t.processSubscribe=function(t){return t.subscribe({userVisibleOnly:!0,applicationServerKey:o(e.SERVER_KEY)})},t.setupSubscription=function(){var t=this;return new Promise((function(n,r){var a=e.getPermission(),i=function(){t.subscribe(!0).then((function(){n()})).catch((function(){r()}))};a!==e.PUSH_NOTIFIER_PERMISSION_DENIED?a!==e.PUSH_NOTIFIER_PERMISSION_GRANTED?a===e.PUSH_NOTIFIER_PERMISSION_DEFAULT&&t.requestPermission().then((function(t){t===e.PUSH_NOTIFIER_PERMISSION_GRANTED?i():r()})):i():r(e.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)}))},t.subscribe=function(t){var n=this;return this.sw.getRegistration().then((function(e){var t=e.pushManager;return t.getSubscription().then((function(e){if(e){var r=e.expirationTime;return r&&Date.now()>r-432e6?n.unsubscribe(n.loadEndpoint()).then((function(){return n.processSubscribe(t)})):e}return n.processSubscribe(t)}))})).then((function(r){return new Promise((function(a,i){if(t||n._needupdate(r)){var o=r.getKey("p256dh"),s=r.getKey("auth");window.ajax.post(e.SERVER_URL,{act:"a_subscribe",hash:n.sw.getParams().push_hash,endpoint:r.endpoint,key:o?btoa(String.fromCharCode.apply(null,new Uint8Array(r.getKey("p256dh")))):null,token:s?btoa(String.fromCharCode.apply(null,new Uint8Array(r.getKey("auth")))):null},{onDone:function(e){e?(n.saveEndpoint(r.endpoint),a()):i()},onFail:function(){return i(e.SUBSCRIBE_ERROR_NETWORK),!0}})}else a()}))}))},t.unsubscribe=function(t){var n=this;return this.sw.register().then((function(r){return r.pushManager.getSubscription().then((function(r){return r?r.unsubscribe().then((function(r){return r?new Promise((function(r,a){ajax.post(e.SERVER_URL,{act:"a_unsubscribe",endpoint:t},{onDone:function(e){e?(n.saveEndpoint(!1),r()):a()}})})):Promise.reject("ERROR: can not unsubscribe")})):(n.saveEndpoint(!1),Promise.reject("ERROR: no subscription"))}))}))},t.requestPermission=function(){var t=e.getPermission();return t===e.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise((function(e,t){var n=Notification.requestPermission((function(t){e(t)}));n instanceof Promise&&n.then(e,t)})):Promise.resolve(t)},t.checkMessageState=function(){var t=this;return new Promise((function(e){return setTimeout(e,5e3)})).then((function(){return t.action("getMessagesMetaData")})).then((function(t){return"object"==typeof t&&Object.keys(t).length?new Promise((function(n,r){window.ajax.post(e.SERVER_URL,{act:"a_update_messages_state",data:Object.entries(t)},{onDone:function(e){e?n(e):r("ERROR: act error")},onFail:function(){return r("ERROR: network error"),!0}})})):Promise.resolve({})})).then((function(e){try{return JSON.parse(e)}catch(e){return{}}})).then((function(e){return t.action("updateMessageNotifications",e)})).catch((function(e){return Object(s.error)(e)}))},e}();u.SERVER_KEY="BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",u.SERVER_URL="push_notifier",u.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",u.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",u.PUSH_NOTIFIER_PERMISSION_DENIED="denied",u.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS="BLOCKED_BY_BROWSER_SETTINGS",u.SUBSCRIBE_ERROR_NETWORK="SUBSCRIBE_ERROR_NETWORK";var l=u,d=n("PovR"),p=function(e){function t(t,n){var a;return a=e.call(this,t,n)||this,vk.id&&a.canBeEnabled().then((function(e){e&&(a.updateHeadClass(),a.handlerMessagesLP=a.handlerMessagesLP.bind(Object(r.default)(a)),page.onChange((function(){return a.updateHeadClass()})))})),a}Object(a.default)(t,e);var n=t.prototype;return n.canBeEnabled=function(){return e.prototype.canBeEnabled.call(this).then((function(e){return e?t.isNativeAppInstalled().then((function(e){return!e})):Promise.resolve(!1)}))},n.isSupported=function(){return e.prototype.isSupported.call(this)&&(browser.chrome||browser.mozilla)},n.updateHeadClass=function(){var e=l.getPermission();document.head&&(removeClass(document.head,"push_notifier_"+l.PUSH_NOTIFIER_PERMISSION_GRANTED),removeClass(document.head,"push_notifier_"+l.PUSH_NOTIFIER_PERMISSION_DENIED),removeClass(document.head,"push_notifier_"+l.PUSH_NOTIFIER_PERMISSION_DEFAULT),e&&addClass(document.head,"push_notifier_"+e),addClass(document.head,"push_notifier_supported"))},n.handlerMessagesLP=function(e,t){this.sw.action("removeMessageNotification",{peerId:t,msgId:e})},n.cleanNotification=function(){this.sw.action("cleanNotification")},n.removeLongPollListener=function(){this.lp&&this.lp.off(),this.lp=null},n.addLongPollListener=function(){window.isNewMail&&window.isNewLongpoll&&!this.lp&&(this.lp=window.im.onMsgReadByMe(this.handlerMessagesLP))},t.isNativeAppInstalled=function(){var e=Date.now(),n=c.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS),r=c.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS);return new Promise((function(a){null!==r&&n&&e-n<t.PUSH_NOTIFIER_LS_TTL_RELATED_APPS?a(!!r):"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then((function(n){var r=Object.values(n).some((function(e){return"com.vkontakte.android"===e.id}));c.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS,e),c.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS,r),a(r)})).catch((function(){a(!1)})):a(!1)}))},n.update=function(){var t=this;return e.prototype.update.call(this).then((function(){t.updateHeadClass(),t.addLongPollListener()}))},n.unsubscribe=function(t){var n=this;return e.prototype.unsubscribe.call(this,t).then((function(){return n.removeLongPollListener()}))},t}(l);p.PUSH_NOTIFIER_LS_KEY_RELATED_APPS="push_notifier_related_apps",p.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS="push_notifier_related_apps_ts",p.PUSH_NOTIFIER_LS_TTL_RELATED_APPS=d.HOUR/2;t.default=p},PU8N:function(e,t,n){"use strict";n.r(t),n.d(t,"isMvk",(function(){return a})),n.d(t,"getVideoDuration",(function(){return i})),n.d(t,"getMediaBlob",(function(){return o})),n.d(t,"getBlobType",(function(){return s})),n.d(t,"noop",(function(){return c})),n.d(t,"getAverageRGB",(function(){return u})),n.d(t,"loadImage",(function(){return l})),n.d(t,"loadImages",(function(){return d})),n.d(t,"loadFontFace",(function(){return p})),n.d(t,"loadFontFacePromise",(function(){return _})),n.d(t,"getCroppedImage",(function(){return h}));var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(){return!!window.isMVK}function i(e){return void 0===e&&(e=""),new Promise((function(t,n){var r=document.createElement("video");r.addEventListener("loadedmetadata",(function(){return t(r.duration)}),{once:!0}),r.addEventListener("error",n,{once:!0}),r.crossOrigin="anonymous",r.preload="metadata",r.src=e}))}function o(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){if(404===r.response.status)return n();t(r.response)},r.onerror=n,r.send()}))}function s(e){try{return e.type.split("/").splice(-1)[0]}catch(e){return null}}var c=function(){};function u(e){var t,n={r:0,g:0,b:0};try{t=e.getImageData(0,0,e.canvas.width,e.canvas.height)}catch(e){return n}for(var r=-4,a=0;(r+=20)<t.data.length;)++a,n.r+=t.data[r],n.g+=t.data[r+1],n.b+=t.data[r+2];return n.r=~~(n.r/a),n.g=~~(n.g/a),n.b=~~(n.b/a),n}function l(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin=e.startsWith("data:")?null:"Anonymous",r.onerror=function(){return n(new Error("Failed to load image's URL: "+e))},r.onload=function(){return t(r)},r.src=e}))}var d=function(e){return new Promise((function(t){var n=e.map((function(e){return l(e)}));Promise.all(n).then((function(e){return t(e)})).catch((function(){}))}))};function p(e,t){var n,r,a,i,o,s,c,u,l={normal:"400",500:"500",600:"600",bold:"700"},d={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},p={display:"block","font-size":"48px","line-height":"normal","font-variant":"normal","white-space":"nowrap",position:"absolute",visibility:"hidden",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0"};function _(e){var t=[];return each(e,(function(e,n){t.push(e+":"+n)})),t.join(";")}function h(e,t,n){return Math.abs(e.width-t.offsetWidth)>n||Math.abs(e.height-t.offsetHeight)>n}function f(){i||(utilsNode.appendChild(o),i=!0,a={sansSerif:{width:c.offsetWidth,height:c.offsetHeight},serif:{width:s.offsetWidth,height:s.offsetHeight}},browser.opera&&!browser.chrome?(c.style.fontFamily='"'+e+'", sans-serif',s.style.fontFamily='"'+e+'", serif'):(setStyle(c,"font-family",'"'+e+'", sans-serif'),setStyle(s,"font-family",'"'+e+'", serif'))),i&&a&&(h(a.sansSerif,c,t.tolerance)||h(a.serif,s,t.tolerance))?(re(o),t.success()):(new Date).getTime()-r.getTime()>t.timeout?(re(o),t.error()):!i&&"requestAnimationFrame"in window?window.requestAnimationFrame(f):window.setTimeout(f,t.delay)}for(var m in d)t.hasOwnProperty(m)||(t[m]=d[m]);p["font-weight"]=t.weight,p["font-style"]=t.style,!t.glyphs&&"fonts"in document?(t.timeout&&(n=setTimeout((function(){t.error()}),t.timeout)),function(n){each(null===document||void 0===document?void 0:document.fonts,(function(r){r.family.toLowerCase()===e.toLowerCase()&&(l[r.weight]||r.weight)===""+t.weight&&r.style===t.style&&r.load().then((function(){t.success(),clearTimeout(n)}))}))}(n)):(u="AxmTYklsjo190QW"+t.glyphs,r=new Date,o=ce("div"),c=ce("div",{innerHTML:u}),s=ce("div",{innerHTML:u}),c.setAttribute("style",_(extend({"font-family":"sans-serif"},p))),s.setAttribute("style",_(extend({"font-family":"serif"},p))),o.appendChild(c),o.appendChild(s),f())}function _(e,t){return new Promise((function(n,a){p(e,r(r({},t),{glyphs:"",success:function(){var e=function(){n(),(null==t?void 0:t.success)&&t.success()};browser.safari?setTimeout(e,150):e()},error:function(){a(),(null==t?void 0:t.error)&&t.error()}}))}))}function h(e,t,n,r,a){return new Promise((function(i,o){("string"==typeof e?l(e):Promise.resolve(e)).then((function(e){var s=document.createElement("canvas");s.width=e.width,s.height=e.height;var c=s.getContext("2d");if(c){c.drawImage(e,0,0);var u=c.getImageData(t,n,r,a),d=document.createElement("canvas");d.width=r,d.height=a;var p=d.getContext("2d");if(p)return p.putImageData(u,0,0),l(d.toDataURL("image/jpeg",1)).then(i).catch(o);i(e)}else i(e)})).catch(o)}))}},"Po+v":function(e,t,n){"use strict";n.r(t),t.default=function(e){void 0===e&&(e={});var t=[];if(e.on_overlay_click_native)t=e.on_overlay_click_native;else{var n=!0;"boolean"==typeof e.hide_on_overlay_click&&(n=e.hide_on_overlay_click),t=["Popup._onOverlayClick","this",e.on_overlay_click||null,n]}e.content||(e.content=e.inner);return{id:e.id,class:[e.mix?e.mix:e.class,Bem.class("Popup",{open:e.open,scrollable:e.scrollable})],inner:[e.rel?e.rel:null,{class:"Popup__overlay",onclick:t},{class:"Popup__wrap",inner:{tag:"div",class:"Popup__content",role:"dialog","aria-modal":"true",inner:[e.header?{class:"Popup__header",inner:[e.header.title?{class:"Popup__headerTitle",inner:e.header.title}:null,e.header.corner?{class:["Popup__headerCorner",e.header.corner.class],inner:e.header.corner.text,href:e.header.corner.url,onclick:e.header.corner.onclick,attrs:e.header.corner.attrs}:null]}:null,e.scrollable?{class:"Popup__scroll ScrollView",inner:{class:"Popup__scrollContent",inner:e.content}}:e.content,e.footer?{class:"Popup__footer",inner:e.footer}:null]}}]}}},PovR:function(e,t,n){"use strict";n.r(t),n.d(t,"SECOND",(function(){return r})),n.d(t,"MINUTE",(function(){return a})),n.d(t,"HOUR",(function(){return i})),n.d(t,"DAY",(function(){return o})),n.d(t,"PUSH_NOTIFIER_PERMISSION_GRANTED",(function(){return s})),n.d(t,"PUSH_NOTIFIER_PERMISSION_DEFAULT",(function(){return c})),n.d(t,"PUSH_NOTIFIER_PERMISSION_DENIED",(function(){return u}));var r=1e3,a=60*r,i=60*a,o=24*i,s="granted",c="default",u="denied"},Q8gl:function(e,t,n){"use strict";n.r(t),n.d(t,"Control_switcher",(function(){return u})),n.d(t,"Control_checkbox",(function(){return s})),n.d(t,"Control_radio",(function(){return c}));var r=n("OcsD"),a=n("z9sQ"),i=n("UWnA"),o=n("fdw3");function s(e){return l(Object(o.extend)(e,{type:"checkbox"}))}function c(e){return l(Object(o.extend)(e,{type:"radio"}))}function u(e){return l(Object(o.extend)(e,{type:"switcher"}))}function l(e){void 0===e&&(e={});var t,n=e.name,r=e.description,s=e.label||e.inner,c=e.type,u=e.checked,l=e.disabled,d=e.on_change||e.onChange,p=e.ariaHiddenLabel?e.ariaHiddenLabel:"true",_="value"in e?e.value:"1",h=[e.class||e.mix,a.default.class("Control",{type:c})],f=e.attrs||[];f=Object(o.extend)({onclick:!0},f),"switcher"===c&&(t="switch");var m=e.name+"_"+_+"_label",b={inner:[{id:e.input_id,class:"Control__native",name:n,value:_,checked:!!u&&"checked",disabled:!!l&&"disabled",type:"switcher"===c?"checkbox":c,onChange:d?["Control._onChange","this",d]:null,"aria-labelledby":s?m:null,role:t,tag:"input"},{class:"Control__icon",tag:"div"},{inner:[{inner:[s],id:m,"aria-hidden":p,tag:"span"},r?{inner:[r],class:"Control__description",tag:"div"}:""],class:"Control__label",tag:"div"}],tag:"div"}.inner;return e.withoutWrap?{inner:[b],class:h,attrs:f,tag:"label"}:(f.role="menuitem",Object(i.default)({inner:[b],tag:"label",class:h,attrs:f}))}var d=l,p=n("TYsd"),_={setChecked:function(e,t){void 0===t&&(t=!0);v(e).checked=t},isChecked:function(e){return v(e).checked}},h=_;_._onChange=b;var f=".Control",m=".Control__native";function b(e,t){p.default.handle(t,{$control:e.closest(f),name:e.name,checked:e.checked,value:e.value})}function v(e){return e.$(m)}var g=Object(r.extend)(d,h);t.default=g;window.Control=g},RQ7Z:function(e,t,n){"use strict";n.r(t),n.d(t,"screenfull",(function(){return r}));var r=function(){var e=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,a=n.length,i={};r<a;r++)if((e=n[r])&&e[1]in document){for(r=0,t=e.length;r<t;r++)i[n[0][r]]=e[r];return i}return!1}(),t={request:function(t){var n=e.requestFullscreen;(t=t||document.documentElement)[n]()},exit:function(){document[e.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:e};return!!e&&(Object.defineProperties(t,{isFullscreen:{get:function(){return Boolean(document[e.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[e.fullscreenEnabled])}}}),t)}()},"S6+Z":function(e,t,n){"use strict";n.r(t),n.d(t,"emojiRegex",(function(){return r})),n.d(t,"skinToneModifierRegex",(function(){return a})),n.d(t,"EMOJI_PREFIXED_REPLACES",(function(){return i})),n.d(t,"EMOJI_REPLACES",(function(){return o})),n.d(t,"EMOJI_HINTS",(function(){return s}));var r=function(){return/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g},a=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/,i={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g},o={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g},s={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},TYsd:function(e,t,n){"use strict";n.r(t),n.d(t,"_Wd_toFlatArray",(function(){return a})),n.d(t,"_Wd_innerItemToString",(function(){return i}));var r=n("1By4");t.default=r.default;var a=r.default._Wd_toFlatArray,i=r.default._Wd_innerItemToString;window.Wd=r.default},TxR4:function(e,t,n){"use strict";n.r(t),n.d(t,"emojiSymbolToByteHex",(function(){return a})),n.d(t,"emojiByteHexToSymbol",(function(){return i})),n.d(t,"emojiRemoveSkinToneModifiers",(function(){return o}));var r=n("S6+Z");function a(e){return encodeURIComponent(e.replace(/\uFE0F/gi,"")).replace(/%/gi,"").toLowerCase()}function i(e){var t,n=e.length%2==1,r=n?e.slice(0,1):"",a=n?e.slice(1):e,i="";try{i=decodeURIComponent("%"+(t=a,t.split("").reduce((function(e,t,n){return e+t+((n+1)%2==0?" ":"")}),"").trim().split(/\s+/)).join("%"))}catch(e){}return r+i}function o(e){return e.replace(Object(r.emojiRegex)(),s)}function s(e){return e.replace(r.skinToneModifierRegex,"")}},UWnA:function(e,t,n){"use strict";n.r(t);var r=n("WWoJ");n.d(t,"RowLabeledSelect",(function(){return r.RowLabeledSelect})),n.d(t,"RowLabeledInput",(function(){return r.RowLabeledInput})),t.default=r.default},UlUB:function(e,t,n){"use strict";function r(e,t){var n,r,a=!1;return function i(){if(a)return n=arguments,void(r=this);e.apply(this,arguments),a=!0,setTimeout((function(){a=!1,n&&(i.apply(r,n),n=r=null)}),t)}}n.r(t),n.d(t,"throttle",(function(){return r}))},UvyM:function(e,t,n){"use strict";n.r(t);var r=n("z9sQ"),a=n("BoyB"),i=n("TYsd"),o=n("fdw3");t.default=function(e){void 0===e&&(e={});var t=e.url,n=e.is_icon,s=e.icon,c=e.tag||"button",u=e.on_click||e.onClick||e.onclick,l=e.use_native_onclick,d=e.inner||e.children;Object(o.isArray)(d)&&1===d.length&&"string"==typeof d[0]&&(d=d[0]);var p=!1;"function"==typeof u&&(l=!0,p=!0);u&&!l&&(u=["Btn._onClick","event","this",u]);var _={class:[e.class,r.default.class("Btn",{theme:e.theme||"regular",size:e.size||"",stretch:e.stretch})],onclick:u,attrs:e.attrs,ref:e.ref};p&&(_.onClick=u,delete _.onclick);var h=e.hide?"; display: none;":"",f=e.style?e.style+h:h,m=null;e.isLoading&&(_.class.push("Btn_loading"),m=i.default.wrap(Object(a.default)({mix:"Btn__loader",white:"secondary"===e.theme?"white":"",large:!0,spinner:e.spinner})));if(t)return Object(o.mergeObjects)(_,{_:i.default.getInternalData(),tag:"a",href:t,role:"button",style:f,inner:s?[{class:"Btn__icon",inner:s},{class:"Btn__text",inner:d}]:n?d:{class:"Btn__text",inner:d},target:(e.open_in_new_tab?"_blank":e.target)||""});var b=e.is_submit?"submit":null,v=e.type||b;return Object(o.mergeObjects)(_,{_:i.default.getInternalData(),"aria-label":e["aria-label"]||"",tag:c,style:f,disabled:e.disabled,type:v,inner:s?[m,{class:"Btn__icon",inner:s},{class:"Btn__text",inner:d}]:n?[m,d]:[m,{class:"Btn__text",inner:d}]})}},V4qE:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return k})),n.d(t,"close",(function(){return R})),n.d(t,"SNACKBAR_POSITION_COMMON",(function(){return b})),n.d(t,"SNACKBAR_POSITION_MAIL",(function(){return v})),n.d(t,"SNACKBAR_TYPE_SUCCESS",(function(){return D})),n.d(t,"SNACKBAR_TYPE_ERROR",(function(){return O})),n.d(t,"SNACKBAR_TYPE_BOOKMARK",(function(){return w})),n.d(t,"SNACKBAR_TYPE_BULLYING",(function(){return E}));var r=n("z9sQ"),a=n("29dZ"),i=n("Y6JH"),o=n("fdw3"),s=n("xlrz"),c=n("XJmI"),u=n("EXPB"),l=n("0qaj"),d=function(e){void 0===e&&(e={});var t=e.position||"bottom",n=!(!e.type||e.image),d={class:r.default.class("SnackbarItem__cell",{left:!0,image:!!e.image,top:e.avatar&&"left"===e.avatar_position,icon:n})},p={class:r.default.class("SnackbarItem__cell",{right:!0,avatar:!!e.avatar})},_=!1,h=!1;if(e.type){_=!0;var f=null;switch(e.type){case 1:f=Object(i.default)(Object(s.getSnackbarDone24Icon)());break;case 2:f=Object(i.default)(Object(c.getSnackbarError24Icon)());break;case 3:f=Object(i.default)(Object(u.getFavorites24Icon)());break;case 4:f=Object(i.default)(Object(l.getErrorFill24Icon)())}d.inner={class:"SnackbarItem__icon",inner:f}}e.image&&(_=!0,d.inner={class:"SnackbarItem__image",inner:{tag:"img",src:e.image}});e.action&&(h=!0,p.inner=Object(a.default)({theme:"none",class:"SnackbarItem__action",url:e.action.url,target:e.action.target,on_click:e.action.onclick,use_native_onclick:!0,inner:Wd.wrap(e.action.text),attrs:e.action.attrs}));if(e.avatar){var m={tag:"img",class:"SnackbarItem__avatar",src:e.avatar};e.avatar_position&&"right"!==e.avatar_position?"left"===e.avatar_position&&(_=!0,d.inner=m):(h=!0,p.inner=m)}return{style:e.style?e.style:"",class:Object(o.concatValues)("SnackbarItem_"+e.id+" SnackbarItem--"+t+" ",r.default.class("SnackbarItem",{static:!!e.static,vertical:!!e.vertical,hasIcon:n},"--")),attrs:{"data-snackbar-id":e.id},inner:[{class:"SnackbarItem__table",inner:[_?d:null,e.text?{class:r.default.class("SnackbarItem__cell",{text:!0}),inner:{class:"SnackbarItem__text",inner:Object(o.isObject)(e.text)?e.text:Wd.wrap(e.text)}}:null,h?p:null]}]}};var p=n("OcsD"),_=n("UxAg"),h=n("kr3z"),f=n("zq7H"),m=n("ZMWW");window.Snackbar={init:k,close:R,_onActionClick:function(e,t){var n=A[t];if(!n)return void Object(p.hide)(t);var r=n.callback,a=n.url;r?"function"==typeof r?r.call(null,e,{id:t,url:a}):Wd.handle2(r,e,{id:t,url:a}):Object(p.hide)(t)},_onRestoreClick:function(e,t,n){var r=t.closest(".SnackbarItem"),a=Object(p.domData)(r,"snackbar-id"),i=A[a];e.stopPropagation(),e.preventDefault();var o=i.callback;o&&("function"==typeof o?o.call(null,e,{id:a,url:n}):Wd.handle2(o,e,{id:a,url:n}));R(a),h.default.click(n,null,{url_params:{_ajax:1,_snackbar:1}})}};var b="common",v="mail",g=0,A={},D=1,O=2,w=3,E=4,y=[];function k(e){if(!m.SAKIntegration.isIntegrated){var t=isFinite(e.duration)?e.duration:5e3,n=g++,r=e.action&&e.action.callback,a=e.action&&e.action.url;e.position=e.position||b;var i=e.position;e.id=n,r&&!e.action.onclick&&(e.action.onclick=["Snackbar._onActionClick","event",n]),e.bottom&&(e.style="bottom: "+e.bottom+"px");var o,s=Wd.elem(SnackbarItem(e));return function(e,t){if(t.position===b)Object(p.append)(e,document.body);else if(t.position===v){var n="msg"===window.store.mail.cur.page?Object(_.$)(".messenger__layer_page .messenger__header"):Object(_.$)(".messenger__layer_convo .messenger__header");Object(p.append)(e,n)}setTimeout((function(){e.classList.add("SnackbarItem_added")}),100)}(s,e),t&&(o=C(n,t)),Object(p.addEvent)(s,"touchstart",L,{passive:!0}),Object(p.addEvent)(s,"touchmove",B,{capture:!1}),Object(p.addEvent)(s,"touchcancel touchend",F,{passive:!0}),A[n]={id:n,timer:o,callback:r,url:a,duration:t,position:i},y.push(n),S(),n}m.SAKIntegration.sendMessage("show_snackbar",{type:e.type,text:e.text})}function S(){var e=(y=y.filter((function(e){var t=A[e],n=I(e);return!(!t||!n)}))).reduce((function(e,t){var n=A[t];return e[n.position]||(e[n.position]=[]),e[n.position].push(t),e}),{});Object.keys(e).forEach((function(t){var n=e[t],r=0,a=t===v?8:12;n.forEach((function(e,n){var i=I(e),o=Object(p.getH)(i);A[e].vertical=t===v?r:-r,p.setStyle.transform(i,1,[0,A[e].vertical]),r+=o+a}))}))}function C(e,t){return setTimeout((function(){R(e,!1)}),t)}function R(e,t){var n=A[e],r=I(e);n&&(n.timer&&clearTimeout(n.timer),delete A[e]),r&&function(e,t){if(Object(p.removeEvent)(e,"touchstart",L,{passive:!0}),Object(p.removeEvent)(e,"touchmove",B,{capture:!1}),Object(p.removeEvent)(e,"touchcancel touchend",F,{passive:!0}),t)return Object(p.remove)(e),void S();e.classList.add("SnackbarItem--closing");if(!e)return;e.classList.add("SnackbarItem_removed"),setTimeout((function(){Object(p.remove)(e),S()}),600)}(r,t)}function I(e){return Object(_.$)(".SnackbarItem_"+e)}onDOMReady((function(){onBodyResize(S)}));var j=!1,P=null,T=!1,N=0,M=!1,x=Object(p.getCw)();function L(e){if(x=Object(p.getCw)(),e.touches&&e.touches.length>1)j=!1;else{var t=e.target.closest(".SnackbarItem");t.classList.add("SnackbarItem--dragging");var n=Object(p.domData)(t,"snackbar-id");if(x>=f.DESKTOP_WIDTH&&(M=!0),A[n].position===v){M=!1;var r=Object(_.$)(".messenger");x=Object(p.getW)(r),A[n].parentXY=Object(p.getXY)(r)}else A[n].parentXY=Object(p.getXY)(bodyNode);A[n].timer&&clearTimeout(A[n].timer),P=e.touches[0],N=e.touches[0].clientX,j=!0,T=n,document.body.style.overflow="hidden"}}function B(e){var t=T;if(e.preventDefault(),e.touches&&e.touches.length>1)j=!1;else if(P&&j){var n=e.touches[0],r=e.target.closest(".SnackbarItem"),a=-(N-n.clientX);M&&(a=Math.min(a,0));var i=Object(p.getX)(r),o=(Object(p.getW)(r)+a)/2+i-A[t].parentXY[0],s=o>=.95*x||o<=x/.95-x;A[t].canClose=s,p.setStyle.transform(r,1,[a,A[t].vertical])}}function F(e){var t=e.target.closest(".SnackbarItem");t.classList.remove("SnackbarItem--dragging");var n=Object(p.domData)(t,"snackbar-id"),r=A[n];if(A[n].dragging=!1,T=!1,document.body.style.overflow="visible",r.canClose){var a=Object(p.getX)(t)>0?Object(p.getCw)():-Object(p.getCw)();return Object(p.getCw)()>=f.DESKTOP_WIDTH&&(a=Object(p.getX)(t)>Object(p.getCw)()/2?Object(p.getCw)():-Object(p.getCw)()),p.setStyle.transform(t,1,[a,A[n].vertical||0]),void R(n)}A[n].timer=C(n,r.duration),t&&p.setStyle.transform(t,1,[0,A[n].vertical||0])}t.default=d;window.SnackbarItem=d},Vy5E:function(e,t,n){"use strict";n.r(t);var r=n("wx14"),a=n("vuIU"),i=n("gNaZ"),o=n("4zn2"),s=function(){function e(e,t,n){void 0===n&&(n=o.ERROR_TYPES.CLIENT),this.data=t||{},this.method=e,this.type=n}var t=e.prototype;return t._errorStrucuture=function(e,t){var n={type:this.method,data:{error_type:this.type,error_data:{error_code:e}}};return this.type===o.ERROR_TYPES.API?n.data.error_data.error_msg=t:n.data.error_data.error_reason=t,this.data.request_id&&(n.data.request_id=this.data.request_id),n},t.selectErrorType=function(){if(!this.data.hasOwnProperty("code"))return this.data.error_msg&&"operation denied by user"===this.data.error_msg.toLowerCase()?this._errorStrucuture(o.ERROR_CODES.USER_DENIED,"User denied"):this._errorStrucuture(o.ERROR_CODES.UNKNOWN,this.data.reason||this.data.error_msg||"Unknown error");switch(this.data.code){case o.ERROR_CODES.MISSING_PARAM:return this._errorStrucuture(o.ERROR_CODES.MISSING_PARAM,this.data.reason||"Missing required params or wrong type of param");case o.ERROR_CODES.CONNECTION_LOST:return this._errorStrucuture(o.ERROR_CODES.CONNECTION_LOST,this.data.reason||"Connection lost");case o.ERROR_CODES.USER_DENIED:return this._errorStrucuture(o.ERROR_CODES.USER_DENIED,this.data.reason||"User denied");case o.ERROR_CODES.INVALID_PARAMS:return this._errorStrucuture(o.ERROR_CODES.INVALID_PARAMS,this.data.reason||"Invalid params");case o.ERROR_CODES.CUSTOM:return this._errorStrucuture(o.ERROR_CODES.CUSTOM,this.data.reason||this.data.error_msg);case o.ERROR_CODES.REQUESTS_LIMIT_REACHED:return this._errorStrucuture(o.ERROR_CODES.REQUESTS_LIMIT_REACHED,"Requests limit reached");default:return this._errorStrucuture(this.data.code?this.data.code:o.ERROR_CODES.UNKNOWN,this.data.reason||this.data.error_msg||"Unknown error")}},e}(),c=n("Y96s"),u=n("PU8N"),l=n("jE6c"),d=function(){function e(e){void 0===e&&(e={}),this.params=Object(r.default)({handlerName:"handler",method:"method"},e),this.callApi=!0,this.useUI=!1,this.callback=null,this.modal=null,this.actionHandler=this.actionHandler.bind(this),this.errorHandler=this.errorHandler.bind(this),this.successHandler=this.successHandler.bind(this),this.denyUIAction=this.denyUIAction.bind(this),this.allowUIAction=this.allowUIAction.bind(this),cur.vkAppSuccessHandler=this.successHandler,cur.vkAppErrorHandler=this.errorHandler,this.checkResponse=this.checkResponse.bind(this)}var t=e.prototype;return t.getEventHash=function(e){return void 0===e&&(e=!1),cur.app.options[o.VK_CONNECT_EVENTS[this.params.handlerName+(e?"Preload":"")]+"_hash"]},t.getEventHashes=function(e){return void 0===e&&(e=!1),cur.app.options[o.VK_CONNECT_EVENTS[this.params.handlerName+(e?"Preload":"")]+"_hashes"]},t.getEventName=function(e){return void 0===e&&(e=!1),o.VK_CONNECT_EVENTS[this.params.handlerName+(e?"Preload":"")]},t.sendNetworkError=function(){this.errorHandler({code:o.ERROR_CODES.UNKNOWN,error_type:o.ERROR_TYPES.CLIENT,reason:o.ERROR_REASONS.UNKNOWN_ERROR})},t.checkParams=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=r.param,i=r.type,s=r.isRequired,c=r.extraChecks;if(!e.hasOwnProperty(a)&&s)return this.errorHandler({code:o.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "'+a+'"'}),!1;if(e.hasOwnProperty(a)&&typeof e[a]!==i)return this.errorHandler({code:o.ERROR_CODES.INVALID_PARAMS,reason:'Param "'+a+'" should be '+i},this.callback),!1;if(e.hasOwnProperty(a)&&c&&c.length>0)for(var u=0;u<c.length;u++)if(!c[u].check(e[a]))return this.errorHandler({code:o.ERROR_CODES.INVALID_PARAMS,reason:c[u].error(a)},this.callback),!1}return!0},t.actionHandler=function(e){var t=this;return this.callApi?ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName(),app_id:this.app.appId},e),{onDone:function(n){t.handleResponse(n,e,t.checkResponse)},onFail:function(e){return t.errorHandler(e),!0}}):{}},t.checkResponse=function(e){1===e||0===e?this.successHandler(Boolean(e)):this.successHandler(e)},t.scopeStringToArray=function(e){return e?e.replace(/ /g,"").split(","):[]},t.denyUIAction=function(){this.errorHandler({error_type:"client_error",code:o.ERROR_CODES.USER_DENIED},null),i.default.pop(this.modal)},t.allowUIAction=function(e){this.actionHandler(e),i.default.pop(this.modal)},t.createDenyUIAction=function(e){var t=this;this.params.modal.cancelAction=void 0!==e?function(){return t.denyUIAction(e)}:this.denyUIAction},t.createAllowUIAction=function(e){var t=this;this.params.modal.allowAction=void 0!==e?function(){return t.allowUIAction(e)}:this.allowUIAction},t.launchUI=function(e){this.createDenyUIAction(),this.createAllowUIAction(),this.modal=new c.default(Object(r.default)({},this.params.modal,{},e)),i.default.push(this.modal)},t._enhanceBtnsWithActions=function(){var e=this;this.params.modal.buttons&&this.params.modal.buttons.forEach((function(t,n){"deny"===t.type?e.params.modal.buttons[n].action=e.params.modal.cancelAction:e.params.modal.buttons[n].action=e.params.modal.allowAction}))},t.setData=function(e,t){e.request_id&&(this.params.request_id=e.request_id),this.params.modal||(this.params.modal={}),e.containerId&&(this.params.modal.containerId=e.containerId),e.pic&&(this.params.modal.pic=e.pic),this.app=t},t.handleResponse=function(e,t,n,r){try{var a=JSON.parse(e);a.hasOwnProperty("error")?this.errorHandler(a.error):n(a,t)}catch(e){r?r(e):this.errorHandler(e)}},t.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.useUI?this.launchUI(e):this.useUI||this.actionHandler(e)},t.successHandler=function(e,t){void 0===t&&(t=void 0),t&&t(),Object(l.isObject)(e)||(e={result:e}),this.params.request_id&&e&&(e.request_id=this.params.request_id),this.callback({type:this.successDescriptor,data:e},this.params.handlerName),Object(u.isMvk)()&&cur.app.frame.focus()},t.errorHandler=function(e,t,n){"string"==typeof e&&(e={reason:e}),this.params.request_id&&(e.request_id=this.params.request_id);var r=new s(this.errorDescriptor,e,n);t&&t(),this.callback(r.selectErrorType()),Object(u.isMvk)()&&cur.app.frame.focus()},Object(a.default)(e,[{key:"successDescriptor",get:function(){return this.params.handlerName+"Result"}},{key:"errorDescriptor",get:function(){return this.params.handlerName+"Failed"}}]),e}();t.default=d},VzJG:function(e,t,n){"use strict";n.r(t),n.d(t,"rebuildNotifications",(function(){return s})),n.d(t,"recordClick",(function(){return c})),n.d(t,"showMenuItems",(function(){return u}));var r=n("UxAg"),a=n("TYsd"),i=n("dONA"),o=n("zq7H");function s(){var e=Object(r.$)(".MainMenu__menu");if(e){var t=store.menuNotifications;if(t){var n=Object(r.$)(".MainMenu__menuItem--apps .MainMenu__menuItemTitle",e);if(n){var s=Object(r.$)('[data-id="menu-apps-notification"]',n);!t[o.COUNTERS_POS_APPS]&&s&&s.remove(),t[o.COUNTERS_POS_APPS]&&!s&&(n.innerHTML+=a.default.render(Object(i.default)({id:"menu-apps-notification"})))}}}}function c(e){ajax.post("/",{act:"menu_item_click_record",menu_item:e})}function u(e){Object(r.$$)(".MainMenu__menuItem--hidden").forEach((function(e){e.classList.remove("MainMenu__menuItem--hidden")})),e.classList.add("MainMenu__menuItem--hidden")}},W0P9:function(e,t,n){"use strict";n.r(t),n.d(t,"log",(function(){return i})),n.d(t,"warn",(function(){return o})),n.d(t,"error",(function(){return s})),n.d(t,"debug",(function(){return c}));var r=n("W9Tc");function a(){return window.console&&Object(r.partConfigEnabled)("js_console_logs")}function i(){var e;a()&&(window.console.log&&(e=window.console).log.apply(e,arguments))}function o(){var e;a()&&(window.console.warn?(e=window.console).warn.apply(e,arguments):i.apply(void 0,arguments))}function s(){var e;a()&&(window.console.error?(e=window.console).error.apply(e,arguments):i.apply(void 0,arguments))}function c(){var e;a()&&(window.console.debug?(e=window.console).debug.apply(e,arguments):i.apply(void 0,arguments))}},WWoJ:function(e,t,n){"use strict";n.r(t),n.d(t,"Row",(function(){return u})),n.d(t,"RowBtn",(function(){return l})),n.d(t,"RowLabeledText",(function(){return d})),n.d(t,"RowLabeledInput",(function(){return p})),n.d(t,"RowLabeledSelect",(function(){return _}));var r=n("8ZMO"),a=n("p5n7"),i=n("I7Du"),o=n("9y81"),s=n("29dZ"),c=n("z9sQ");function u(e){void 0===e&&(e={});var t=e.anchor,n=e.attrs||{},a=e.style||{},i=e.url,s=e.count,u=i&&!a.no_go_icon&&!s,l=e.tag;l||(l=i?"a":"div");var d=null;return u?d=Wd.wrap(Object(o.default)({mix:"Row__right",icon:"chevron_right"})):s&&(d={inner:[s],class:"Row__right Row__count",tag:"div"}),{class:[e.mix||e.class,c.default.class("Row",{go:u,style_withBorder:a.with_border,style_withBorderForce:a.with_border_force,style_withHover:a.with_hover,style_smallPaddings:a.small_paddings,style_noPaddingTop:a.no_padding_top,style_noPaddingBottom:a.no_padding_bottom,style_tinyPaddingTop:a.tiny_padding_top,style_tinyPaddingBottom:a.tiny_padding_bottom,paddingTop_short:a.padding_top_short})],tag:l,href:i,attrs:n,role:e.role,inner:[t?Object(r.default)({id:t}):null,d,e.icon?{inner:[e.icon],class:"Row__icon "+e.icon_class,tag:"div"}:null,e.content||e.inner]}}function l(e){return u({content:Object(s.default)(e)})}function d(e){return h({anchor:e.anchor,url:e.url,label:e.label,content:e.text,is_mini:!0})}function p(e){return h({anchor:e.anchor,label:e.label,style:e.style,content:Object(a.default)(e)})}function _(e){return h({anchor:e.anchor,style:e.style,label:e.label,content:Object(i.default)(e)})}function h(e){return u({anchor:e.anchor,url:e.url,style:e.style,content:[f({is_mini:e.is_mini,label:e.label}),m({content:e.content})]})}function f(e){return{inner:[e.label],class:[c.default.class("Row__label",{mini:e.is_mini}),e.class||""].join(" "),tag:"div"}}function m(e){return{inner:[e.content],class:["Row__labeledContent",e.class||""].join(" "),tag:"div"}}t.default=u},Y6JH:function(e,t,n){"use strict";n.r(t);var r=n("fdw3");var a=function(e,t){var n,a;if(void 0===t&&(t=""),t){var i=Object(r.inlineIconResolver)(t);i&&(n=i.icon,a=i.name)}else Object(r.isObject)(e)&&(n=e.icon,a=e.name,Object(r.isObject)(e.icon)&&(n=e.icon.icon,a=e.icon.name));return{inner:[Wd.wrap(n)],"aria-hidden":"true",class:"svgIcon svgIcon-"+a,tag:"div"}};t.default=a;window.SVGIcon=a},Y96s:function(e,t,n){"use strict";n.r(t);var r=n("wx14"),a=n("PU8N"),i=n("UlUB"),o=function(){function e(e,t){this.props=Object(r.default)({},e),t&&(this.callback=t),this.props.buttons=this.props.buttons||[],this.appNode=ge(this.props.containerId),this.modal=null,this.onAction=this.onAction.bind(this),this.addScroll=Object(i.throttle)(this.addScroll.bind(this),300),this.renderModal(),this._destroyed=!1}var t=e.prototype;return t.addScroll=function(){!function(e,t){var n=t?t.scrollTop:window.pageYOffset,r=window.cur.app;if(r&&!Object(a.isMvk)()){var i=r.frame.clientHeight-360,o=Math.max(103,Math.min(n,i));requestAnimationFrame((function(){e.style.transform="translateX(-50%) translateY("+o+"px)"}))}}(this.modal.children[0])},t.init=function(){this.appNode&&this.appNode.appendChild(this.modal),window.addEventListener("scroll",this.addScroll)},t.show=function(){var e=this;Object(a.isMvk)()&&document.body.classList.add("vk_app_fixed"),this.props.withoutAnimation?this.modal.classList.add("show"):setTimeout((function(){return e.modal.classList.add("show")}),300),this.initMvkCloseActions(),this.addScroll()},t.initMvkCloseActions=function(){var e=this;if(Object(a.isMvk)()){if(!window.DirectGames||!cur.app.isDirectGame)return;window.DirectGames.onBoxOpen(this),this.props.onlyButtonHide||(this.modal.onclick=function(t){t.target===e.modal&&e.onAction(e.props.cancelAction)})}},t.close=function(){this.props.onlyButtonHide||this.onAction(this.props.cancelAction)},t.destroy=function(){window.removeEventListener("scroll",this.addScroll),this._destroyed||(Object(a.isMvk)()&&(document.body.classList.remove("vk_app_fixed"),window.DirectGames&&cur.app.isDirectGame&&(window.DirectGames.onBoxClose(this),cur.app.frame.focus())),this.modal.parentNode.removeChild(this.modal),this.callback&&this.callback(),this._destroyed=!0)},t.onAction=function(e){e(),this.destroy()},t._renderBtn=function(e){var t=this,n=document.createElement("button");return n.setAttribute("type","button"),n.classList.add("vk_app_modal_btn"),n.classList.add("vk_app_modal_btn--"+e.type),e.disabled&&(n.disabled=e.disabled),n.innerText=e.title,n.addEventListener("click",(function(){return t.onAction(e.action)})),n},t._renderBtns=function(e){var t=this,n=e.getElementsByClassName("vk_app_modal_btns")[0];n&&(this.props.buttons.map((function(e){n.appendChild(t._renderBtn(e))})),1===this.props.buttons.length&&n.classList.add("vk_app_modal_btns--single-btn"))},t._renderCloseBtn=function(e){var t=this,n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("vk_app_modal_close_btn"),n.innerHTML='<svg class="vk_app_modal_close_btn__icon" viewBox="0 0 24 24" id="cancel_24" width="24" height="24">\n        <g fill="none" fill-rule="evenodd">\n          <path d="M0 0h24v24H0z"></path>\n          <path\n              d="M18.3 5.7a.99.99 0 0 0-1.4 0L12 10.6 7.1 5.7a.99.99 0 0 0-1.4 1.4l4.9 4.9-4.9 4.9a.99.99 0 0 0 1.4 1.4l4.9-4.9 4.9 4.9a.99.99 0 0 0 1.4-1.4L13.4 12l4.9-4.9a.99.99 0 0 0 0-1.4z"\n              fill="currentColor"></path>\n        </g>\n      </svg>',n.addEventListener("click",(function(){return t.onAction(t.props.cancelAction)})),e.children[0].appendChild(n)},t._renderOuter=function(){var e=document.createElement("div");return e.classList.add("vk_app_modal_outer"),e},t._enhanceBtnsWithActions=function(){var e=this;this.props.buttons&&this.props.buttons.forEach((function(t,n){"deny"===t.type?e.props.buttons[n].action=e.props.cancelAction:e.props.buttons[n].action=e.props.allowAction}))},t._renderScopes=function(e){return e.map((function(e,t){return 0===t?getLang("vkapps_scope_"+e):getLang("vkapps_scope_"+e).toLowerCase()})).join(", ")},t.prepareScopes=function(e){return 0===e.length?["general"]:e},t.prepareExtraBtn=function(){var e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("vk_app_modal_btn","vk_app_modal_btn--transparent"),e.innerHTML=getLang("apps_connect_modal_messages_scopes_edit"),e.addEventListener("click",this.props.extraAction),e},t.getThumb=function(){if(this.props.svgIcon)return this.props.svgIcon;var e=this.props.picClass?this.props.picClass:"";return this.props.pic?'<img src="'+this.props.pic+'" class="vk_app_modal_container__pic MiniAppModalContainer__pic '+e+'" alt aria-label="product">':""},t.renderModal=function(){var e='\n    <div class="vk_app_modal_container vk_app_modal_container--flex '+(this.props.containerClass||"")+'">\n      <div class="vk_app_modal_content">\n        '+this.getThumb()+'\n        <h2 class="vk_app_modal_container__heading">'+this.props.title+"</h2>\n        "+(this.props.text?'<p class="vk_app_modal_container__text">'+this.props.text+"</p>":"")+"\n      ";this.props.scopes&&(e+='\n          <p class="vk_app_modal_container__text">'+getLang("apps_connect_modal_messages_scopes_text")+'</p>\n          <p class="vk_app_modal_container__list">'+this._renderScopes(this.prepareScopes(this.props.scopes))+".</p>"),e+='\n          </div>\n          <div class="vk_app_modal_btns"></div>\n      </div>',this._enhanceBtnsWithActions(),this.modal=this._renderOuter(),this.modal.innerHTML=e,this.props.showCloseBtn&&this._renderCloseBtn(this.modal),this.props.scopes&&this.props.scopes.length&&this.props.extraAction&&this.modal.getElementsByClassName("vk_app_modal_content")[0].appendChild(this.prepareExtraBtn()),this._renderBtns(this.modal)},e}();t.default=o},ZMWW:function(e,t,n){"use strict";n.r(t),n.d(t,"SAKIntegration",(function(){return a}));var r=n("Bm7g"),a={isIntegrated:!1,origin:"",name:"",type:"",onMessage:new(n("uQjJ").default),init:function(e){if(a.isIntegrated=!0,a.origin=function(e){var t=e.origin;if(!t)try{t=sessionStorage.getItem("_sak_embed_origin")}catch(e){}if(t)try{sessionStorage.setItem("_sak_embed_origin",t)}catch(e){}return t||""}(e),a.type=e.type,a.isNewMail=e.isNewMail,a.origin||window.parent!==window){var t=e.name||(a.isNewMail?"mvk_embedded_mail":"mvk_embedded_other");document.documentElement.style.setProperty("display","none","important"),a.name=t,a.embedded=new r.Embedded({name:t,target:window.parent,origin:a.origin,onMessage:function(e,t){a.onMessage.emit("embed",e,t),"click"===e&&a.doClick(t.selector)}}),a._ready=a.embedded.sendMessage("ready",{}).then((function(){document.documentElement.classList.remove("vk_sak_embed_hidden"),document.documentElement.style.removeProperty("display")}))}else document.documentElement.classList.remove("vk_sak_embed_hidden")},sendMessage:function(e,t,n){if(void 0===n&&(n=""),a.isIntegrated)if(a._ready){if(!n||!a.name||a.name===n)return a._ready.then((function(){return a.embedded.sendMessage(e,t)}))}else console.error("SAKIntegration not ready")},doClick:function(e){if(e){var t=document.querySelector(e);t&&t.click()}}}},a0wW:function(e,t,n){"use strict";n.r(t),n.d(t,"FLAG_MP4",(function(){return o})),n.d(t,"FLAG_GIF_AUTOPLAY",(function(){return s})),n.d(t,"FLAG_SUPPORTS_HISTORY_API",(function(){return c}));var r=n("jk6M"),a=n("J8bf"),i={},o=0,s=1,c=2,u=function(){function e(){}return e.getFeatures=function(){return i},e.detectMp4Support=function(){var e=r.default.meizu||r.default.mi||r.default.uc_mini||0!==r.default.ios&&r.default.ios<10||r.default.chrome&&r.default.version.split(".")[0]<53,t=!1,n=document.createElement("video");return n.canPlayType&&""!==n.canPlayType("video/mp4")&&(t=!0),i.mp4=t,this.setFlag(o,t&&!e),t},e.detectAutoplay=function(){var e=this;return new Promise((function(t){if(i.autoplay)t(!0);else{if(r.default.ios&&r.default.safari_mobile&&parseInt(r.default.version,10)>=10)return i.autoplay=!0,void t(!0);i.autoplay=!1;var n=ce("video"),a=ce("source");a.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var o=ce("source");o.src="data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",append(o,n),append(a,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),append(n,document.body);var s=ge("base64testvideo");if(r.default.mobile&&r.default.ios&&r.default.ios<10)return i.autoplay=!1,remove(n),t(!1),void clearTimeout(e.autoDetectTimeout);if(!r.default.safari_mobile||r.default.safari_mobile&&parseInt(r.default.version,10)>=10){var c=n.play();void 0!==c&&c.then((function(){i.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)})).catch((function(r){i.autoplay=!1,remove(n),t(!1),clearTimeout(e.autoDetectTimeout)}))}s.onplay=function(){i.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout((function(){s.paused||(i.autoplay=!0),remove(n),t(i.autoplay)}),250)}}))},e.getFlags=function(){return(Object(a.getCookie)("remixff")||"").split("").map((function(e){return+e?"1":"0"})).join("")},e.getFlag=function(e){var t=this.getFlags();return!!toInt(t[e])},e.setFlag=function(e,t){void 0===t&&(t=!1);var n=(Object(a.getCookie)("remixff")||"").split("");e>=n.length&&(n=Array.from(Array(e),(function(e,t){return n[t]||"0"}))),n[e]=t?"1":"0";var r=n.join("");Object(a.setCookie)("remixff",r,10)},e}();onDOMReady((function(){u.detectMp4Support()})),t.default=u},aJgW:function(e,t,n){"use strict";n.r(t),n.d(t,"ColorSchemeMode",(function(){return r})),n.d(t,"ColorSchemeName",(function(){return a})),n.d(t,"ColorScheme",(function(){return s})),n.d(t,"colorScheme",(function(){return o}));var r,a,i=n("J8bf");!function(e){e.Light="light",e.Dark="dark",e.Auto="auto"}(r||(r={})),function(e){e.Dark="space_gray",e.Light="bright_light"}(a||(a={}));var o,s=function(){function e(){this.currentMode="",this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}return e.prototype.init=function(t){var n=this;this.isExecuted||(this.schemesMap=t.schemesMap,this.setMode(t.mode),this.initSubscribers.forEach((function(e){e()})),e.isSchemesAutoSwitchingSupported()&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){n.currentMode===r.Auto&&n.setScheme(e.matches)})),this.isExecuted=!0))},e.prototype.setScheme=function(t){e.isSchemesSupported()&&(this.applyScheme(document.body,t?a.Dark:a.Light),this.currentIsDark=t,this.isSchemeSavingAllowed&&Object(i.setCookie)("remixdark_color_scheme",Number(t),365),this.subscribers.forEach((function(e){e()})))},e.prototype.isDarkScheme=function(){return this.currentIsDark},e.prototype.getMode=function(){return this.currentMode},e.prototype.setMode=function(t){this.currentMode=t;var n=!1;switch(t){case r.Light:n=!1;break;case r.Dark:n=!0;break;case r.Auto:if(e.isSchemesAutoSwitchingSupported())n=window.matchMedia("(prefers-color-scheme: dark)").matches}this.setScheme(n),this.isModeSavingAllowed&&Object(i.setCookie)("remixcolor_scheme_mode",t,365)},e.prototype.applyScheme=function(e,t){var n,r=(null===(n=this.schemesMap)||void 0===n?void 0:n[t])||t;e.setAttribute("scheme",r)},e.prototype.subscribe=function(e){var t=this;return this.subscribers.push(e),function(){t.subscribers=t.subscribers.filter((function(t){return e!==t}))}},e.prototype.onInit=function(e){var t=this;return this.initSubscribers.push(e),function(){t.initSubscribers=t.initSubscribers.filter((function(t){return e!==t}))}},e.isSchemesSupported=function(){return window.isNewMail&&window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")},e.isSchemesAutoSwitchingSupported=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches},e}();o=window.colorScheme?window.colorScheme:new s,window.colorScheme=o,window.isSchemesSupported=s.isSchemesSupported.bind(null)},bKAG:function(e,t,n){"use strict";n.r(t),n.d(t,"MAX_STORY_VIDEO_DURATION",(function(){return u})),n.d(t,"StoryType",(function(){return r})),n.d(t,"StoryEntryPoint",(function(){return a})),n.d(t,"StorySource",(function(){return i})),n.d(t,"getStoryUploadUrl",(function(){return l})),n.d(t,"uploadStoryBlobToServer",(function(){return d})),n.d(t,"saveStoryOnServer",(function(){return p}));var r,a,i,o=n("jE6c"),s=n("PU8N"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=16;function l(e){return new Promise((function(t,n){window.ajax.post(Object(s.isMvk)()?"stories.php":"al_stories.php",c({act:"get_upload_url"},e),{onDone:t,onError:n,onFail:n})}))}function d(e,t){var n=new FormData,r=encodeURIComponent("edited_"+Object(o.irand)(0,99999)+".jpg");return n.append("file0",e,r),fetch(t,{method:"POST",body:n}).then((function(e){return e.json()}))}function p(e,t){return new Promise((function(n,r){window.ajax.post(Object(s.isMvk)()?"stories.php":"al_stories.php",{act:"save",upload_result:e,hash:t},{onDone:n,onError:r,onFail:r})}))}!function(e){e.PHOTO="photo",e.VIDEO="video"}(r||(r={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(a||(a={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar"}(i||(i={}))},"bZ/P":function(e,t,n){"use strict";n.r(t);var r={};function a(e,t){return e+'="'+t+'"'}function i(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a(e,o(n))}}function o(e){return e[0]+"("+e.slice(1).map(s).join(", ")+")"}function s(e){return"number"==typeof e||"event"===e||"this"===e?e:JSON.stringify(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,t){var n,r=[];"string"==typeof t&&((n={})[t]=!0,t=n);return Object.keys(t).forEach((function(n){var a=t[n];!0===a?r.push(e+"_"+n):a&&r.push(e+"_"+n+"_"+a)})),r}Object.assign(r,{html:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a="";return e.forEach((function(e,t){var r=n[t];a+=e+(r||0===r?r:"")})),a}}),Object.assign(r,{attr:a,onBlur:i("onblur"),onClick:i("onclick"),onFocus:i("onfocus"),onInput:i("oninput"),onKeyDown:i("onkeydown"),onKeyPress:i("onkeypress"),onKeyUp:i("onkeyup"),onMouseDown:i("onmousedown"),onMouseUp:i("onmouseup"),onScroll:i("onscroll"),onSubmit:i("onsubmit"),onTouchEnd:i("ontouchend"),onTouchMove:i("ontouchmove"),onTouchStart:i("ontouchstart"),onWheel:i("onwheel"),onChange:i("onchange")}),Object.assign(r,{list:function(e,t){void 0===t&&(t=null);Array.isArray(e)||(e=[e]);return t?e.map(t).join(""):e.join("")}}),Object.assign(r,{class:function(){for(var e=[],t=null,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return r.forEach((function(n){"string"==typeof n?(e.push(n),t=n):n&&(e=e.concat(c(t,n)))})),e.join(" ")},parseClass:function(e,t){var n={};return t.trim().split(/\s+/).forEach((function(t){if(t!==e){var r=t.replace(e+"_","").split("_");n[r[0]]=!(r.length>1)||r[1]}})),n}});t.default=r;window.q=r},cGUQ:function(e,t,n){"use strict";n.r(t),n.d(t,"fromQueryString",(function(){return c})),n.d(t,"toQueryString",(function(){return s}));var r=n("jE6c"),a={},i=function(e){if(a[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},o=function(e){try{return decodeURIComponent(e)}catch(t){return a[e]=1,e}};function s(e,t){var n=[];for(var a in e)if(e.hasOwnProperty(a)&&null!=e[a]&&!Object(r.isFunction)(e[a]))if(Object(r.isArray)(e[a]))for(var o=0,s=0,c=e[a].length;o<c;++o)null==e[a][o]||Object(r.isFunction)(e[a][o])||(n.push(i(a)+"["+s+"]="+i(e[a][o])),++s);else n.push(i(a)+"="+i(e[a]));return t||n.sort(),n.join("&")}function c(e){if(!e)return{};var t={};return e=e.split("&"),Object(r.each)(e,(function(e,n){var r=n.split("=");if(r[0]){var a=o(r[1]+"");if("[]"===r[0].substr(r.length-2)){var i=o(r[0].substr(0,r.length-2));t[i]||(t[i]=[]),t[i].push(a)}else t[o(r[0])]=a}})),t}},d4g6:function(e,t,n){"use strict";n.r(t),n.d(t,"objectToQuerystring",(function(){return a})),n.d(t,"getHostName",(function(){return i})),n.d(t,"destroyOpenedApp",(function(){return o})),n.d(t,"isVKPayApp",(function(){return s})),n.d(t,"filterPostMessageOrigin",(function(){return c})),n.d(t,"isAllowedPostMessageOriginHost",(function(){return u}));var r=n("4zn2"),a=function(e){return Object.keys(e).reduce((function(t,n,r){return[t,0===r?"?":"&",encodeURIComponent(n),"=",encodeURIComponent(e[n])].join("")}),"")},i=function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2].toLowerCase():null},o=function(e){if(cur.vkAppQueue){var t=Object.keys(cur.vkAppQueue).filter((function(t){return~t.indexOf(e)}));if(t.length>0){var n=t[0];cur.vkAppQueue[n].destroyView(),delete cur.vkAppQueue[n]}}},s=function(e){return r.VKPAY_APPS.includes(e)};function c(e,t){var n=i(t),r=e.vkApp?e.vk_app_url:e.src,a=i(r);if(n!==a&&!u(e,n))throw Error("Insecure method call from "+n+". Call must be from "+a);return!0}function u(e,t){return!!e.allowed_origin_regexp&&new RegExp(e.allowed_origin_regexp).test(t)}},dONA:function(e,t,n){"use strict";n.r(t);var r=function(e){return{class:"MainMenuNotificationDot","data-id":e.id,tag:"span"}};t.default=r},eGQV:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return l})),n.d(t,"isStandalone",(function(){return d})),n.d(t,"isOfflineCapable",(function(){return p}));var r=function(){function e(){this.registration=null,this._handlers=[],this.params=null}e.isSupported=function(){try{return!(!window.fetch||window.fetch.polyfill&&!window.fetch.forcedPolyfill||!navigator.serviceWorker)}catch(e){return!1}};var t=e.prototype;return t.listenMessages=function(){navigator.serviceWorker.addEventListener("message",this._onmessage.bind(this))},t.register=function(t){if(!e.isSupported())return Promise.reject("SW: serviceWorker is unavailable");var n=t&&t.url;return n?(this.params=t,navigator.serviceWorker.register(n,{scope:"/",updateViaCache:"none"}).then(function(e){return this.registration||(this.registration=e),e}.bind(this))):Promise.reject("SW: incorrect url")},t.getRegistration=function(){return e.isSupported()?navigator.serviceWorker.ready.then(function(e){return this.registration||(this.registration=e),e}.bind(this)):Promise.reject("SW: serviceWorker is unavailable")},t.unregister=function(){this.registration&&this.registration.unregister(),this._handlers.forEach((function(e){return e[0].removeEventListener(e[1],e[2])})),this._handlers=[]},t.update=function(){this.registration&&this.registration.update()},t.getParams=function(){return this.params||{}},t._addEventListener=function(e,t,n,r){void 0===r&&(r=!0);var a=!1;this._handlers.forEach((function(r){r[0]===e&&r[1]===t&&r[2]===n&&(a=!0)})),a&&!r||(this._handlers.push([e,t,n]),e.addEventListener(t,n))},t.action_devicePixelRatio=function(){return window.devicePixelRatio},t.action_pushHash=function(){return this.getParams().push_hash},t.storePushHash=function(){var e=this.getParams().push_hash;this.action("storePushHash",{hash:e})},t.action=function(e,t){var n=null;return n=Array.isArray(e)?e:[[e,t]],this._message({actions:n}).then((function(e){return e.answers?Promise.resolve(1===n.length?e.answers[0]:e.answers):Promise.reject(new Error("ServiceWorker answer is incorrect"))}))},t._message=function(e){var t=this;return this.getRegistration().then((function(){return new Promise(function(t,n){var r=new MessageChannel;r.port1.onmessage=function(e){this._messageCheck(e)?t(e.data.data):n(new Error("ServiceWorker message is incorrect"))}.bind(this),this.registration.active.postMessage(this._messageWrap(e),[r.port2])}.bind(t))}))},t._onmessage=function(e){if(this._messageCheck(e)){var t=e.data.data;if(t.actions&&Array.isArray(t.actions)){var n=[];t.actions.forEach(function(t){var r="action_"+t[0],a=t[1],i=this[r]?this[r](a,e):void 0;i instanceof Promise||(i=Promise.resolve(i)),n.push(i)}.bind(this)),Promise.all(n).then(function(t){var n={};t.forEach((function(e,t){void 0!==e&&(n[t]=e)})),Object.keys(n).length&&e.ports[0].postMessage(this._messageWrap({answers:n}))}.bind(this))}}},t._messageCheck=function(e){return(""===e.origin||e.origin.match(/^https:\/\/([a-zA-Z0-9\-\.]+\.)?vk\.com$/))&&e.data&&e.data.data&&"sw"===e.data.type},t._messageWrap=function(e){return{type:"sw",data:e}},e}();r.SW_NOT_AVAILABLE_ERROR="SW: serviceWorker is unavailable";var a,i=n("H5mD"),o=function(){if(!("fetch"in window))return function(){};var e=["standalone","fullscreen","minimal-ui"],t=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple");function n(e,t,n){void 0===n&&(n=!1);var a=r(e);if((a.drawImage(e,0,0),!n)&&255==a.getImageData(0,0,1,1).data[3])return null;return a.globalCompositeOperation="destination-over",a.fillStyle=t,a.fillRect(0,0,e.width,e.height),a.canvas.toDataURL()}function r(e){var t=void 0===e?{width:1,height:1}:e,n=t.width,r=t.height,a=document.createElement("canvas");return a.width=n,a.height=r,a.getContext("2d")}return function(){if(t){var a=document.head.querySelector('link[rel="manifest"]'),o=a?a.href:"",s=function(e){for(var t=function(t){var n=e[t];try{return new URL("",n),{v:function(e){return new URL(e,n).toString()}}}catch(e){}},n=0;n<e.length;++n){var r=t(n);if("object"==typeof r)return r.v}return function(e){return e}}([o,window.location]);Promise.resolve().then((function(){if(!o)throw'can\'t find <link rel="manifest" href=".." />\'';var e={};return"use-credentials"===o.crossOrigin&&(e.credentials="include"),window.fetch(o,e)})).then((function(e){return e.json()})).then((function(t){return function(t,a){var o=(t.icons||[]).filter((function(e){return"apple-splashscreen"===e.purpose}));o.sort((function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)}));var s=o.map((function(e){return{href:a(e.src),sizes:e.sizes}})),c=t.display,u=-1!==e.indexOf(c);(function(e){var t=function(e){var t=r();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}(e).map((function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),n=.2126*t[0]+.7152*t[1]+.0722*t[2];Math.abs(1.05/(n+.05))})(t.background_color||"#ffffff"),t.name||t.short_name||document.title;navigator.standalone||(l="apple-mobile-web-app-capable",(d=u)&&(!0===d&&(d="yes"),function(e,t){var n=document.createElement(e);for(var r in t)n.setAttribute(r,t[r]);document.head.appendChild(n)}("meta",{name:l,content:d})));var l,d;function p(e,n,a){var i=e.width,o=e.height,s=window.devicePixelRatio,c=r({width:i*s,height:o*s});if(c.scale(s,s),c.fillStyle=t.background_color||"#ffffff",c.fillRect(0,0,i,o),c.translate(i/2,(o-32)/2),a){var u=a.width/s,l=a.height/s;l>128&&(u/=l/128,l=128),u>=48&&l>=48&&(c.drawImage(a,u/-2,l/-2,u,l),c.translate(0,l/2+32))}var d=document.createElement("link");return d.setAttribute("rel","apple-touch-startup-image"),d.setAttribute("media","screen and (orientation: "+n+")"),d.setAttribute("href",c.canvas.toDataURL()),d}var _=new Set;function h(e){var t=p(window.screen,"portrait",e),n=p({width:window.screen.height,height:i.isIPad?window.screen.height:window.screen.width},"landscape",e);_.forEach((function(e){return e.remove()})),document.head.appendChild(t),document.head.appendChild(n),_.add(t),_.add(n)}if(h(null),!s.length)return;var f=s[0],m=new Image;m.crossOrigin="anonymous",m.onload=function(){if(h(m),t.background_color){var e=n(m,t.background_color);null!==e&&(f.href=e,s.slice(1).forEach((function(e){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var a=n(r,t.background_color,!0);e.href=a},r.src=e.href})))}},m.src=f.href}(t,s)})).catch((function(e){return console.warn("pwacompat.js error",e)}))}}}(),s=n("OGfC"),c=new r;window.sw_client=c,window.SWClient=r,window.initPushNotifier=function(){try{window.PushNotifier=s.default,window.pushNotifier=new s.default(c,r)}catch(e){}};var u=!1;function l(){window.addEventListener&&(!function(){if(u=!0===navigator.standalone||window.matchMedia&&matchMedia("(display-mode: standalone)").matches,!history.replaceState)return;var e=location.search;if((e=(e=(e=e.replace(/(\?|&)mode\=([^&]+)(&)?/,"$1")).replace(/(\?|&)__appshell_fallback\=([^&]+)(&)?/,"$1")).replace(/(\?|&)+$/,""))!==location.search){var t=location.pathname+e+location.hash;history.replaceState(null,"",t)}}(),function(){if(!r.isSupported())return;c.listenMessages()}(),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault()})),window.addEventListener("appinstalled",(function(){statlogsValueEvent("pwa_installed_event",1)})),"complete"===document.readyState?_():window.addEventListener("load",(function(){_()})))}function d(){return u}function p(){return void 0===a&&(a=!(!r.isSupported()||!navigator.serviceWorker.controller)),a}function _(){window.vk&&window.vk.sw&&(c.register(window.vk.sw).then((function(e){c.storePushHash()}),(function(e){if(e!==r.SW_NOT_AVAILABLE_ERROR)throw e})),r.isSupported()&&navigator.serviceWorker.getRegistration().then((function(e){!function(e){if(!p())return;e&&e.active&&e.installing&&e.installing.postMessage({action:"activate"})}(e)})),o())}l()},fdw3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"isObject",(function(){return isObject})),__webpack_require__.d(__webpack_exports__,"isJS",(function(){return isJS})),__webpack_require__.d(__webpack_exports__,"log",(function(){return log})),__webpack_require__.d(__webpack_exports__,"mergeObjects",(function(){return mergeObjects})),__webpack_require__.d(__webpack_exports__,"mergeArrays",(function(){return mergeArrays})),__webpack_require__.d(__webpack_exports__,"concatValues",(function(){return concatValues})),__webpack_require__.d(__webpack_exports__,"isFinite",(function(){return isFinite})),__webpack_require__.d(__webpack_exports__,"getLang",(function(){return getLang})),__webpack_require__.d(__webpack_exports__,"getLangNumeric",(function(){return getLangNumeric})),__webpack_require__.d(__webpack_exports__,"langNumeric",(function(){return langNumeric})),__webpack_require__.d(__webpack_exports__,"insertBetween",(function(){return insertBetween})),__webpack_require__.d(__webpack_exports__,"stringifyJSON",(function(){return stringifyJSON})),__webpack_require__.d(__webpack_exports__,"parseJSON",(function(){return parseJSON})),__webpack_require__.d(__webpack_exports__,"wrapCommunityMailUrl",(function(){return wrapCommunityMailUrl})),__webpack_require__.d(__webpack_exports__,"mailReplaceMentions",(function(){return mailReplaceMentions})),__webpack_require__.d(__webpack_exports__,"mailReplaceDomainMentions",(function(){return mailReplaceDomainMentions})),__webpack_require__.d(__webpack_exports__,"getState",(function(){return getState})),__webpack_require__.d(__webpack_exports__,"wdToFlatArray",(function(){return wdToFlatArray})),__webpack_require__.d(__webpack_exports__,"fromCharCode",(function(){return fromCharCode})),__webpack_require__.d(__webpack_exports__,"timestamp",(function(){return timestamp})),__webpack_require__.d(__webpack_exports__,"formatDuration",(function(){return formatDuration})),__webpack_require__.d(__webpack_exports__,"arrayUnique",(function(){return arrayUnique})),__webpack_require__.d(__webpack_exports__,"arrayFlat",(function(){return arrayFlat})),__webpack_require__.d(__webpack_exports__,"isArray",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"arrayIncludes",(function(){return arrayIncludes})),__webpack_require__.d(__webpack_exports__,"inlineIconResolver",(function(){return inlineIconResolver})),__webpack_require__.d(__webpack_exports__,"isSAKIntegration",(function(){return isSAKIntegration})),__webpack_require__.d(__webpack_exports__,"classNames",(function(){return classNames})),__webpack_require__.d(__webpack_exports__,"arraySomeEqual",(function(){return arraySomeEqual})),__webpack_require__.d(__webpack_exports__,"preactCallback",(function(){return preactCallback})),__webpack_require__.d(__webpack_exports__,"getLangReplace",(function(){return getLangReplace})),__webpack_require__.d(__webpack_exports__,"winToUtf",(function(){return winToUtf})),__webpack_require__.d(__webpack_exports__,"getNumShort",(function(){return getNumShort}));var _mobile_emoji_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("9M99");__webpack_require__.d(__webpack_exports__,"emojiToHTML",(function(){return _mobile_emoji_html__WEBPACK_IMPORTED_MODULE_0__.emojiToHTML}));var _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("qHA9");__webpack_require__.d(__webpack_exports__,"isChatPeer",(function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isChatPeer})),__webpack_require__.d(__webpack_exports__,"isContactPeer",(function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isContactPeer})),__webpack_require__.d(__webpack_exports__,"isCommunityPeer",(function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isCommunityPeer})),__webpack_require__.d(__webpack_exports__,"isForwardedMessageId",(function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isForwardedMessageId}));var _mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("OcsD");__webpack_require__.d(__webpack_exports__,"extend",(function(){return _mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.extend})),__webpack_require__.d(__webpack_exports__,"isFunction",(function(){return _mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction}));var _mobile_lib_Url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("j80l");__webpack_require__.d(__webpack_exports__,"makeUrl",(function(){return _mobile_lib_Url__WEBPACK_IMPORTED_MODULE_3__.makeUrl}));var _mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("TYsd"),_shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ZMWW"),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("xt6h");function _createForOfIteratorHelperLoose(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function isObject(e){return Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)}function isJS(){return!0}function log(){var e;(e=console).log.apply(e,arguments)}function mergeObjects(){return Object.assign.apply(Object,arguments)}function mergeArrays(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):[]}function concatValues(e,t){return e+t}function isFinite(e){return window.isFinite(e)}function getLang(){var e;return(e=window).getLang.apply(e,arguments)}function getLangNumeric(){return _mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.langNumeric.apply(void 0,arguments)}function langNumeric(e,t,n){return void 0===n&&(n=!1),Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.langNumeric)(e,t,n)}function insertBetween(e,t){var n=[];return e.forEach((function(r,a){var i=e[a+1],o=e[a+2];r&&n.push(r),r&&(i||o)&&n.push(t)})),n}function stringifyJSON(e){return JSON.stringify(e)}function parseJSON(e){return JSON.parse(e)}function wrapCommunityMailUrl(e){return Object(_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.wrapCommunityUrl)(e)}function mailReplaceMentions(e,t){return e.replace(_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.MENTION_REGEXP,t)}function mailReplaceDomainMentions(e,t){return e.replace(_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.MENTION_DOMAIN_REGEXP,t)}function getState(e){return window.isomorphicState&&window.isomorphicState[e]||[]}function wdToFlatArray(e){return _mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_4__.default.toFlatArray(e).map(_mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_4__.default.innerItemToString)}function fromCharCode(e){return String.fromCharCode(e)}function timestamp(){return Date.now()/1e3}function formatDuration(e){if(!e)return"";var t=Math.floor(e/3600),n=Math.floor(e/60)%60,r=e%60;return r>=3600?[t].concat([n,r].map((function(e){return e<10?"0"+e:""+e}))).join(":"):[n].concat([r].map((function(e){return e<10?"0"+e:""+e}))).join(":")}function arrayUnique(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function arrayFlat(e){return e.flat()}function isArray(e){return Array.isArray(e)}function arrayIncludes(e,t){return e.includes(t)}function inlineIconResolver(){return null}function isSAKIntegration(){return _shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_5__.SAKIntegration.isIntegrated}function classNames(){return _vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_6__.classNames.apply(void 0,arguments)}function arraySomeEqual(e,t,n){for(var r,a=_createForOfIteratorHelperLoose(e);!(r=a()).done;){if(r.value[t]===n)return!0}return!1}function preactCallbackKeywordsReplace(e,t,n){return e.map((function(e){return"event"===e?n:"this"===e?t:e}))}function preactCallback(callback){for(var _len=arguments.length,argsA=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)argsA[_key-1]=arguments[_key];if(!callback)return null;if(Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(callback)&&0===argsA.length)return callback;if(isArray(callback)&&Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.flatArray)(callback).every((function(e){return!Boolean(e)})))return null;var evalCaller=function evalCaller(code,context){return function(){return code.includes("return")?eval("(function(event) { "+code+" }).call(this, event)"):void eval("(function(event) { "+code+" }).call(this, event)")}.call(context)};return function(e){void 0===e&&(e={});var t=e.target;if(Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isString)(callback))return evalCaller(callback,t);if(Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(callback))return callback.apply(void 0,preactCallbackKeywordsReplace(argsA,t,e));if(isArray(callback)){var n=callback[0],r=callback.slice(1).concat(argsA),a=preactCallbackKeywordsReplace(r,t,e);if(Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(n))return n.apply(void 0,a);if(Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isString)(n)){var i=r.reduce((function(e,t,n,r){return e+="event"!==t&&"this"!==t?"'"+t+"'":t,n!==r.length-1?e+=", ":e=e.trim(),e}),"");return evalCaller(n+"("+i+");",t)}}}}function getLangReplace(e,t){for(var n in void 0===t&&(t={}),t)if(t.hasOwnProperty(n)){var r="{"+n+"}";e=e.replace(r,t[n])}return e}function winToUtf(e){return Object(_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.winToUtf)(e)}function getNumShort(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=e;(e>=1e4&&e<1e6?r=Math.floor(e/1e3)+"K":e>=1e6&&(r=Math.round(e/1e6,1)+"M"),t)&&(r=e<1e4?getLangNumeric(e,t,n):getLangNumeric(789,t).replace(new RegExp(789,"g"),r));return r}},g3t9:function(e,t,n){"use strict";n.r(t),n.d(t,"Separator",(function(){return a}));var r=n("z9sQ");function a(e){return void 0===e&&(e={}),{class:[e.class,r.default.class("Separator",{hideOnDesktop:e.hideOnDesktop,noOffset:e.noOffset,gray:e.gray},"--")],tag:"div"}}t.default=a},gF8j:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o})),n.d(t,"getVisibilityState",(function(){return u})),n.d(t,"getVisiblityEvent",(function(){return l}));var r=n("uQjJ"),a=n("PU8N"),i=browser.iphone||browser.ipad||browser.ipod;function o(e){this.started=!1,this.is_idle=!0,this.activeTimeStart=null,this.cbActiveB=this.cbActive.bind(this),this.cbInactiveB=this.cbInactive.bind(this),this.onVisiblityChange=this.onVisiblityChange.bind(this),this.opts=extend({triggerEvents:"mousemove keydown",onIdleCb:function(){},onUnIdleCb:function(){},focusElement:e.element,element:null,idleTimeout:3e4},e)}function s(e,t,n){Object(a.isMvk)()?window.addEvent(e,t,n,{passive:!0}):window.addEvent(e,t,n)}function c(e,t,n){Object(a.isMvk)()?window.removeEvent(e,t,n,{passive:!0}):window.removeEvent(e,t,n)}function u(){return document.visibilityState||document.webkitVisibilityState}function l(){var e="visibilitychange";return document.visibilityState||(document.webkitVisibilityState?e+="webkit":e=""),e}extend(o.prototype,r.default.prototype),extend(o.prototype,{stop:function(){this.started=!1,c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),Object(a.isMvk)()&&this._isTopLevel()&&l()&&c(document,l(),this.onVisiblityChange),Object(a.isMvk)()&&i||(c(this.opts.focusElement,"focus",this.cbActiveB),c(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.setIdleTo),clearTimeout(this.checkIdleCbTo),clearTimeout(this.sendCbTO),this.is_idle=!0,this.opts.parentManager&&this.opts.parentManager.off("idle",this.cbInactiveB)},idle:function(e){this.is_idle=!0,e||this.opts.onIdleCb(),this.emit("idle")},unidle:function(e){this.is_idle=!1,e||this.opts.onUnIdleCb(),this.emit("unidle")},start:function(){this.started=!0,!Object(a.isMvk)()&&browser.mobile||(this.is_idle=!this._isFocused(),this.opts.parentManager&&this.opts.parentManager.on("idle",this.cbInactiveB),Object(a.isMvk)()&&this._isTopLevel()&&l()&&s(document,l(),this.onVisiblityChange),Object(a.isMvk)()&&i||(s(this.opts.focusElement,"focus",this.cbActiveB),s(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.checkIdleCbTo),this.checkIdleCb(),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},checkIdleCb:function(){this.started&&(s(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.setIdleTo),this.setIdleTo=setTimeout(this.cbInactiveB,this.opts.idleTimeout))},cbActive:function(){this.started&&(this.activeTimeStart=(new Date).getTime(),clearTimeout(this.setIdleTo),this.is_idle&&(this.is_idle=!1,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("unidle"),this.opts.onUnIdleCb&&this.opts.onUnIdleCb()}.bind(this),100)),c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.checkIdleCbTo),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},cbInactive:function(){this.started&&(this.activeTimeStart=null,this.is_idle||(this.is_idle=!0,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("idle"),this.opts.onIdleCb&&this.opts.onIdleCb()}.bind(this),100)),clearTimeout(this.checkIdleCbTo),c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),s(this.opts.element,this.opts.triggerEvents,this.cbActiveB),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout))},getActiveTime:function(){return!this.is_idle&&this.activeTimeStart?(new Date).getTime()-this.activeTimeStart:0},onVisiblityChange:function(){"visible"===u()?this.cbActiveB():this.cbInactiveB()},_isTopLevel:function(){var e=this.opts.focusElement;return e===window||e===document},_isFocused:function(){var e=this.opts.focusElement;if(this._isTopLevel()){var t=u();return"string"==typeof t&&"visible"===t}return document.activeElement===e}})},gNaZ:function(e,t,n){"use strict";n.r(t);var r=function(){function e(){this.checkStack=function(){cur.vkMiniAppsStack||(cur.vkMiniAppsStack=[])},this.checkStack(),cur.clearVKMiniAppsLayerPopups=this.clearLayerPopups.bind(this)}var t=e.prototype;return t.push=function(e){e.init(),this.checkStack(),0===cur.vkMiniAppsStack.length&&e.show(),cur.vkMiniAppsStack.push(e)},t.clearLayerPopups=function(){this.checkStack(),cur.vkMiniAppsStack.length>0&&(cur.vkMiniAppsStack=cur.vkMiniAppsStack.filter((function(e){return!~e.appNode.id.indexOf("container_layer")})))},t.pop=function(e){var t=cur.vkMiniAppsStack.indexOf(e);~t&&(cur.vkMiniAppsStack.splice(t,1),this.checkForNext())},t.checkForNext=function(){cur.vkMiniAppsStack.length>0&&cur.vkMiniAppsStack[0].show()},e}();t.default=new r},he4e:function(e,t,n){"use strict";n.r(t),n.d(t,"clear",(function(){return d})),n.d(t,"onClear",(function(){return c})),n.d(t,"onClearConfirm",(function(){return p})),n.d(t,"onClearDecline",(function(){return _})),n.d(t,"isCleared",(function(){return l}));var r=n("OcsD"),a=n("+cqQ"),i=n("UxAg"),o=n("r/ag"),s=n("29dZ"),c=Object(a.default)(),u={};function l(e){var t=/([a-z]*)(-?\d+)?(?:_(-?\d+))?/.exec(e)[2];return!!u[t]||!!u[e]}function d(e,t,n,a,i,o){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),o){s.default.setLoading(e,!0,"white");var c="restr_"+Object(r.srand)(),u=e.closest(".PostPhotoRestriction");Object(r.domData)(u,"clear-id",c),function(e,t,n,r,a){photoview._toggleTouches(!1),clog("[PostPhotoRestriction] Show confirm to unblur "+r),Confirm(t,"PostPhotoRestriction.onClearConfirm('"+e+"', '"+r+"', '"+a+"')","PostPhotoRestriction.onClearDecline('"+e+"')",{id:e,ok_text:n})}(c,n,a,i,o)}else clog("[PostPhotoRestriction] No hash was provided")}function p(e,t,n){o.default.close(Object(r.ge)(e)),photoview._toggleTouches(!0),ajax.post(t+"?act=unblur&hash="+n,{},{onDone:function(n){var a=Object(i.$)('[data-clear-id="'+e+'"]');if(a){var o=Object(i.$)(".SplashScreen__more .Btn",a);s.default.setLoading(o,!1),a.classList.add("PostPhotoRestriction--clear")}else clog("[PostPhotoRestriction] Can't find restriction el with clear id "+e);var l=/([a-z]*)(-?\d+)?(?:_(-?\d+))?/.exec(t),d=l[2],p=l[3],_=[];n?(_.push.apply(_,Object(i.$$)('.thumb_map_img--blur[data-id^="'+d+'"]')),_.push.apply(_,Object(i.$$)('.thumb_map_img--blur[href^="/photo'+d+'"]'))):(_.push(Object(i.$)('.thumb_map_img--blur[data-id="'+d+"_"+p+'"]')),_.push(Object(i.$)('.thumb_map_img--blur[href^="/photo'+d+"_"+p+'"]'))),_.forEach((function(e){if(e){e.classList.remove("thumb_map_img--blur");var t=Object(i.$)(".PostPhotoRestriction--blur,.PostPhotoRestriction--blurWithText",e);Object(r.re)(t)}})),n&&(u[""+d]=!0),u[t]=!0,c(t);var h=[];n?h.push.apply(h,Object(i.$$)('.PhotosPhotoItem__photo[data-id^="'+d+'"]')):h.push(Object(i.$)('.PhotosPhotoItem__photo[data-id="'+t.replace("photo","")+'"]')),h.forEach((function(e){if(e){e.classList.remove("PhotosPhotoItem__photo--blur");var t=Object(i.$)(".PhotosPhotoItem__restriction",e);Object(r.re)(t)}}));var f=[];n?f.push.apply(f,Object(i.$$)('.AlbumItem__thumb--blur[data-thumb-id^="'+d+'"]')):f.push(Object(i.$)('.AlbumItem__thumb--blur[data-thumb-id="'+t.replace("photo","")+'"]')),f.forEach((function(e){if(e){e.classList.remove("AlbumItem__thumb--blur");var t=Object(i.$)(".AlbumItem__restriction",e);Object(r.re)(t)}})),setTimeout((function(){Object(r.remove)(a)}),500)}})}function _(e){var t=Object(i.$)('[data-clear-id="'+e+'"]'),n=Object(i.$)(".SplashScreen__more .Btn",t);photoview._toggleTouches(!0),o.default.close(Object(r.ge)(e)),s.default.setLoading(n,!1)}nav.onBeforeGo((function(){Object(i.$$)(".Confirm[id^=restr]").forEach((function(e){_(e.id)}))}))},izth:function(e,t,n){"use strict";function r(){var e=document.domain||"";if(!["oauth.","api."].some((function(t){return e.includes(t)}))){var t=e.match(/(m\.)?([a-zA-Z]+\.[a-zA-Z]+\.?)$/);window.locDomain="https:"===location.protocol?t[2]:t[0];var n=navigator.userAgent.toLowerCase();!/opera/i.test(n)&&/msie 6/i.test(n)&&document.domain===window.locDomain||(document.domain=window.locDomain)}}n.r(t),n.d(t,"setDocumentDomain",(function(){return r}))},j1wj:function(e,t,n){"use strict";n.r(t),n.d(t,"getTimeFromStart",(function(){return a}));var r=0;function a(){return performance?performance.now():r?Date.now()-r:0}window.onDOMReady((function(){r=Date.now()}))},j80l:function(e,t,n){"use strict";function r(e,t){var n=need("nav");if(!t)return e;var r=e.split("?"),a=r[0],i=r[1],o={},s=[];return i&&i.split("&").map((function(e){var n=e.split("="),r=n[0],a=n[1];r in t||(t[r]=a)})),Object.keys(t).forEach((function(e){var r,a=t[e];!0===a&&(a=n.getQuery(e)),("string"==typeof(r=a)&&r||function(e){return"number"==typeof e&&!isNaN(e)}(a))&&(o[e]=a)})),Object.keys(o).forEach((function(e){s.push(e+"="+encodeURIComponent(o[e]))})),0===s.length?a:a+"?"+s.join("&")}n.r(t),n.d(t,"makeUrl",(function(){return r})),n.d(t,"parseURL",(function(){return i})),t.default=window.Url={make:r};var a=["protocol","hostname","host","pathname","port","search","hash","href"];function i(e){var t=window.ce("a",{href:e}),n=a.reduce((function(e,n){return e[n]=t[n],e}),{});return n.requestUri=""+n.pathname+n.search,n}},"k+Df":function(e,t,n){"use strict";n.r(t);var r=n("z9sQ"),a=n("TYsd"),i=n("9y81"),o=n("29dZ"),s=n("tlMv");t.default=function(e){void 0===e&&(e={});var t=null;e.icon_raw?t=e.icon_raw:e.icon&&(t=Object(i.IconWd)({class:"SplashScreen__icon",icon:e.icon,svg:e.is_svg_icon}));var n=a.default.wrap(e.more_text);"primary"!==e.more_type&&"regular"!==e.more_type&&"outlineMono"!==e.more_type||(n=Object(o.default)({inner:[e.more_text],theme:e.more_type,url:e.more_url,onClick:e.more_onclick,attrs:{ontouchend:e.more_ontouchend},use_native_onclick:e.more_native_onclick}),e.more_url=null);var c=[e.class,r.default.class("SplashScreen",e.mix||{})];e.small&&c.push("SplashScreen--small");return[e.separator?Object(s.default)({hideOnDesktop:!e.separator_desktop}):null,{class:c,inner:e.inner||[e.before,t,e.title?{class:"SplashScreen__title",inner:a.default.wrap(e.title)}:null,e.text?{class:[e.text_class,"SplashScreen__text"],inner:a.default.wrap(e.text)}:null,e.more_text?{class:"SplashScreen__more",inner:n,href:e.more_url}:null,e.action_text?{class:"SplashScreen__action",inner:{class:"SplashScreen__actionButton",inner:a.default.wrap(e.action_text),href:e.action_url}}:null]}].filter((function(e){return e}))}},kr3z:function(e,t,n){"use strict";n.r(t);var r=n("wx14"),a=n("UxAg"),i=n("+cqQ"),o=n("jk6M"),s=n("jE6c"),c=n("OcsD"),u=n("j80l"),l=n("eGQV"),d=n("tgcV"),p=n("cGUQ"),_=n("izth"),h=n("Cbap"),f=function(e){void 0===e&&(e={});var t=["AudioPlaylistRoot",e.class].filter((function(e){return e})).join(" ");return{attrs:{"data-playlist-id":e.playlist_id},inner:e.inner,class:t}};var m=n("g3t9"),b=n("fdw3"),v=n("0hva"),g=n("z1UI"),A=n("GtpT"),D=n("vOib"),O=n("v+Uj");var w=function(e){void 0===e&&(e={});var t=window.lang,n=e.items||[],r=e.count||null,a=e.href,i=n.map((function(e){return{inner:[Object(A.default)({album:e})],class:"AlbumsBlock__album",tag:"div"}})),o={text:Object(b.getLang)("mobile_subheader_show_all"),class:"al_albums",url:a},s=Object(O.default)({inner:[{inner:[i],class:"AlbumsBlock__albums",tag:"div"}]});return{inner:[{name:"albums",tag:"a"},Object(D.default)({title:t.mobile_photos_block_albums_title,count:r,corner:o,content:s,no_border:!0,noShadow:!0})],class:"AlbumsBlock",tag:"div"}},E=n("1VZq");var y=function(e){var t=window.lang,n=e.items||[],r=e.count||null,a=e.buttons||{},i=e.href,o=e.hide_header||!1,s=e.label||t.mobile_photos_block_photos_title,c="PhotosBlock",u="PhotosBlock__photos";!!e.autoload&&(c+=" PhotosBlock--autoload",u+=" photos_page");var l={inner:[n.map((function(e){return Object(E.default)({photo:e})}))],class:u,tag:"div"},d=null;return i&&(d={text:Object(b.getLang)("mobile_subheader_show_all"),class:"al_empty",url:i}),{inner:[{name:"photos",tag:"a"},Object(D.default)({inner:[{inner:[a.prev,l,a.more],tag:"div"}],title:o?null:s,corner:d,count:r,noShadow:!0,no_border:!0})],class:c,tag:"div"}},k=n("tlMv");var S=function(e){var t=window.lang,n=e.pretag,r=e.buttons||{},a=e.is_owner,i=[],o=e.section,s=e.albums,c=e.albums_count,u=e.albums_href,l=e.photos,d=e.photos_count,p=e.new_tags_photos,_=e.new_tags_count,h=e.new_tags_href;if("all"===o){var f=s.map((function(e){return Object(A.default)({album:e})}));f&&i.push({inner:[r.prev?r.prev:null,{inner:[f],class:"AlbumsPage__items album_items photos_page bl_cont",tag:"div"},r.more?r.more:null],tag:"div"})}else s&&s.length&&i.push(w({items:s,count:c,href:u})),p&&p.length&&i.push(y({label:t.mobile_photos_block_tags_title,items:p,count:_,href:h})),l&&l.length&&i.push(y({autoload:!0,items:l,count:d,buttons:r}));if(!i.length){var m=a?t.mobile_albums_can_store_photos:t.mobile_albums_no_albums;return Object(g.default)({separator:!0,text:m,more_type:"primary",more_text:e.add_url?t.mobile_photos_placeholder_album_action:null,more_url:e.add_url})}return{inner:["all"!==o?Object(k.default)({hideOnDesktop:!0}):null,{inner:[i],class:"upanel bl_cont",tag:"div"},n],class:"AlbumsPage PageBlock PageBlock_bottomPadding",tag:"div"}},C=n("GVTI"),R=n("W9Tc"),I=n("gF8j"),j=n("r/ag"),P=n("29dZ"),T=n("vk58");var N,M=function(e){var t=function(e){var t=e.buttons,n=Object.keys(t).map((function(n){var r=t[n],a=r.theme;a="yes"!==n||a?"secondary":"regular";var i={"data-key":n,"data-force":e.force?1:0};return Object(P.default)({inner:[r.text],theme:a,url:r.href,attrs:i,on_click:"ConfirmPopup.onButtonClick(this, event);",use_native_onclick:!0})}));return Object(T.default)({inner:[n]})}(e),n={title:e.title};return Object(j.default)({inner:[Wd.wrap(e.text),{inner:[t],class:"Popup__buttons",tag:"div"}],class:"ConfirmPopup",header:n,scrollable:!0,on_overlay_click_native:"ConfirmPopup.onOverlayClick(this, event);"})},x=n("zq7H"),L=n("j1wj");if(!window.ajax){var B={onBeforeRedirect:Object(i.default)("url"),onBeforePageParse:Object(i.default)(),onPostsLoad:Object(i.default)(),onRedirect:Object(c.se)(),onNavDone:Object(i.default)(),_tStart:!1,_tAlStart:!1,RESPONSE_ARGUMENTS:0,RESPONSE_REDIRECT:1,RESPONSE_CAPTCHA:2,RESPONSE_PAGE:3,RESPONSE_FAILED_AUTH:4,RESPONSE_CONFIRM:5,RESPONSE_IGNORE:100,_getreq:function(){return new XMLHttpRequest},_al_reqs:[],_last_req:null,save_req:function(e){B._al_reqs.push(e||B._last_req)},abort_reqs:function(){Object(c.each)(B._al_reqs,(function(e,t){t.abort()})),B._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,t,n,r){B._failed_reqs.push([e,t,n,r])},repeat_reqs:function(){Object(c.each)(B._failed_reqs,(function(){var e=this.shift();B._post.apply(null,this),Object(c.remove)(e)})),B._failed_reqs=[]},_error_displayed:null,plainpost:function(e,t,n,r,a,i,o,s){var u="string"!=typeof t?Object(p.toQueryString)(t,!0):t,d={"Content-Type":"application/x-www-form-urlencoded"};a||s||(d["X-Requested-With"]="XMLHttpRequest"),s||(Object(l.isStandalone)()&&(d["X-View-Mode"]="pwa"),i&&i.headers&&Object.assign(d,i.headers));var _=new AbortController,h=_.signal,f=new Request(e,{credentials:"same-origin",method:"POST",headers:d,body:u,signal:h}),m=fetch(f).then((function(e){return e.text().then((function(t){return e.status>=200&&e.status<300?n&&n(t,e):r&&r(t,e),{response:e,text:t}}))})).catch((function(e){var t=!1;if(r&&r(e&&e.message,null)&&(t=!0),"AbortError"===e.name)return null;if(window.isBasicOffline&&("true"===f.headers.get("X-Ajax-Nav")&&history.back(),!t&&(!B._error_displayed||B._error_displayed<=Date.now()-1e4))){var n=Object(c.getLang)("mobile_general_snackbar_error");navigator.onLine||(n=Object(c.getLang)("mobile_pwa_offline_network_lost")),Object(c.statlogsValueEvent)("mvk_ajax_error_snackbar",Number(navigator.onLine)),Snackbar.init({text:n}),B._error_displayed=Date.now()}throw e})),b={request:f,abort:_.abort.bind(_),promise:m};return B._last_req=b,b},post:function(e,t,n){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],B._post(e,t,n||{})},onPrepared:Object(c.se)(),prepare_click:function(e){var t=window.al;if(o.default.ios&&!(o.default.ios>=7)&&window.al&&t.ver){var n=[],r=!1;e&&"a"==(e.tagName||"").toLowerCase()?n.push(e):Object(c.isArray)(e)?n=e:(n=Object(c.geByTag)("a",e),r=!0);for(var a=0,i=n.length;a<i;a++){var s=n[a],u=s&&s.target||"";if(s&&s.getAttribute&&(!r||!s.getAttribute("data-href")&&Object(c.checkElementNav)(s,{skip_onclick:!0})&&"_blank"!=u)){var l=s.getAttribute("href");if(null==l||!Object(c.isHttpHref)(l))continue;Object(c.attr)(s,"data-href",Object(c.getHref)(s)),Object(c.attr)(s,"href",!1)}}}},click:function(e,t,n){var r=window.nav;t=t||{};var a,i=!1,o={_ajax:1},s=Object(c.extend)(t,{link:e});if(n=n||{},(n=Object(c.extend)({closeContextMenu:!0},n)).closeContextMenu&&ContextMenu.close(),t.onStart){var u=B.tAlGetParam();B.tAlStart=(new Date).getTime(),u&&(o._talstat=u)}if(n.use_cache){var l=Object(c.ge)(!0===n.use_cache?"preload_data":n.use_cache),d=l.innerHTML.replace(/(^<!--|-->$)/g,""),p=d.split("--\x3e\x3c!--");if(d)l.innerHTML="",t.onStart&&t.onStart.apply(s),n.nav&&r.go(i,null,{push_only:!0}),t.onDone&&t.onDone.apply(s,p),(e=Object(c.geByClass1)("show_more",Object(c.geByClass1)("pcont","mcont")))&&B.click(e,{onDone:function(){var e="";Object(c.each)(arguments,(function(t,n){e+="\x3c!--"+(n||"")+"--\x3e"})),l.innerHTML=e,Object(c.ge)("show_more_loading")&&B.click(!1,t,n),B.onPostsLoad()}},{closeContextMenu:!1});else t.onStart&&t.onStart.apply(s),n.nav&&r.go(i,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var _=e.form,h={};i=(_.action||"").replace(/^https?:\/\/[^\/]+/i,""),Object(c.each)(_,(function(t,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("checkbox"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==e||("image"===n.type&&n!==e||void(h[n.name]=n.value))))))})),"image"==e.type&&(h[e.name]=e.value,h[e.name+".x"]=1,h[e.name+".y"]=1),_.method&&"get"!=_.method?Object(c.extend)(o,h):i=i.split("?",1).shift()+Object(c.obj2qs)(h)}else e.getAttribute&&(i=e.getAttribute("data-href")||e.getAttribute("href"));if(i||(i=e.pathname?e.pathname+e.search+e.hash:e),!i)return!0;Object(c.extend)(o,n.url_params||{});var f=window.pStats,m=f.getSeenData();if(m){var b=window.cur;o._pstat=m.data,b&&b.module&&(o._pstatref=b.module)}return(a=B.post(i,o,{onDone:function(){m&&f.onSend(m.seen),n.lock&&Object(c.unlockButton)(e),t.onDone&&t.onDone.apply(s,arguments),(n.nav||n.scroll)&&Object(c.scrollToHash)()},onFail:function(){n.lock&&Object(c.unlockButton)(e),t.onFail&&t.onFail.apply(s,arguments),(n.nav||n.scroll)&&Object(c.scrollToHash)()}}))&&(t.onStart&&t.onStart.apply(s),n.nav&&r.go(i,null,{push_only:!0}),n.lock&&Object(c.lockButton)(e)),!a},nav:function(e,t){var n=window.nav,i=window.page,l=window.menu,p=window.cur,_=window.Tabbar;(t=t||{}).nav=t.nav||{};var h,g=Object(c.getHref)(e),D=i.getHash(t.nav);if(!(g=n.checkUrl(g)))return!1;"/"!=g.substr(0,1)&&(g="/"+g),l.close(null,!0),B.navStart=Object(L.getTimeFromStart)();var O=B.tGetParam();if(B.tStart=(new Date).getTime(),t.need_restore&&l&&l.closeSearch(),window.isNewMail&&(t.need_restore&&t.nav.push&&!t.need_check_updates&&B.abort_reqs(),n.onBeforeGo2(t.nav.path,Object.assign({},Object(c.qs2obj)(t.nav.params),t.params),t.nav.push,t)))return B.abort_reqs(),!0;if(t.need_restore&&t.nav.push&&(h=i.restore(D))&&(B.abort_reqs(),B._failed_relogin=!1,h.lm&&Object(c.extend)(h.lm,{tn:!1,bn:!1}),i.set(D,h,{restored:!0},t),t.zProcess&&(t.zProcess(h.st),delete t.zProcess),n.set(t),B.tModule=window.cur.module,B.tRestoreRender=(new Date).getTime(),!t.need_check_updates))return!0;var w=!1,E=!1;if(t.need_check_updates&&n.isTabHaveCache(t.tab,D));else if(t.fast)w=!0,i.set(D,!1,{before:!0,beforeAppend:t.beforeAppend,afterAppend:t.afterAppend}),E=t.onAfterFast||!1;else if(t.target&&t.target.className&&!p.ignoreFastNav){(y=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(t.target.className))&&y[1];var y,k=y&&y[2]||!1;switch(k){case"menu":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){var n=Object(a.$)(".vk__page");if(n.className=n.className.replace("vk__page_notifications",""),window.isNewMail){var r=Object(c.geByClass1)("mcont",e)||Object(c.geByClass1)("layout__basis");Object(c.val)(r,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else Object(c.val)(Object(c.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');i.setMhead(e,Object(c.attr)(t.target,"data-header"),"/")},afterAppend:function(){window.isNewMail&&"/mail"===D?Object(c.alLoadingFix)(Object(c.geByClass1)("layout").offsetHeight):Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"tab":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){Object(c.val)(Object(c.geByClass1)("upanel",e),'<div id="al_loading"></div>'),Object(c.val)(Object(c.geByClass1)("basisDefault",e),'<div id="al_loading"></div>');var t=Object(c.geByClass1)("tabs_block",e)||Object(c.geByClass1)("tabs",e),n=Object(c.geByClass1)("active",t);n&&(Object(c.hasClass)("tab_item_top",n)?(Object(c.removeClass)("tab_item_cur",Object(c.geByClass1)("tab_item_cur",t)),Object(c.addClass)("tab_item_cur",Object(c.geByClass1)("tab_item",t))):(Object(c.removeClass)("tab_item_cur",Object(c.geByClass1)("tab_item_cur",t)),Object(c.addClass)("tab_item_cur",n)))},afterAppend:function(){Object(c.alLoadingFix)()}},t);break;case"post":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){var n=window.lang,r=Object(c.clone)(Object(c.gpeByClass)("post_item",t.target)),a=r.id,o=Object(c.outer)(Object(c.gpeByTag)("a",Object(c.geByClass1)("pi_img",r))).replace("pi_img","op_img"),s=Object(c.gpeByTag)("div",Object(c.geByClass1)("pi_author",r)),u=Object(c.remove)(Object(c.geByClass1)("pi_date",r)),l=Object(c.outer)(Object(c.remove)(Object(c.geByClass1)("explain",s))),d=Object(c.remove)(Object(c.geByClass1)("pi_fronly",r)),p=Object(c.outer)(s),_=Object(c.geByClass1)("pi_body",r),h=Object(c.geByClass1)("pi_text_more",_),f=(u=Object(c.geByClass1)("pi_date",r),Object(c.geByClass1)("pi_info",_)),m=Object(c.geByClass1)("pi_links",_),b=Object(c.geByClass1)("replies_link",m),v=Object(c.val)(Object(c.remove)(Object(c.geByClass1)("pi_actions_wrap",r))),g=Object(c.val)(Object(c.remove)(Object(c.geByClass1)("item_replies",f)))?Object(c.val)(b):n.mobile_wall_post_replies_title,A=b?'<a name="comments"></a><h3 class="slim_header">'+(g||"")+'</h3><div id="al_loading"></div>':"";if(h){var D=h.nextSibling?h:h.parentNode;D.nextSibling.style.display="inline",D.style.display="none"}Object(c.val)(m,Object(c.outer)(Object(c.geByClass1)("like_wrap",_))),u&&Object(c.attr)(u,"data-date")&&Object(c.val)(u,Object(c.attr)(u,"data-date")),i.setMhead(e,Object(c.attr)(t.target,"data-header"),!0),Object(c.val)(Object(c.geByClass1)("mcont",e),function(e,t,n,r,a,i,o,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(t||"")+'<div class="op_cont">'+(n||"")+'<div class="op_info"><span class="item_date">'+(r||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(a||"")+'</div><div class="pi_body">'+(i||"")+"</div></div>"+(s||"")+"</div>"+(o||"")+"</div>"}(a,o,p,Object(c.val)(u)+(d?'<b class="pi_fronly"></b>':""),l,Object(c.val)(_),A,v))},afterAppend:function(e){var n=Object(c.geByTag1)("h3",e);n&&Object(c.alLoadingFix)(t.nav.hash?Object(c.getCh)()-n.offsetHeight:0),t.nav.hash?Object(c.scrollToHash)(t.nav.hash):Object(c.scrollTop)(0)}},t);break;case"wall":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){var n=window.lang,r=Object(c.clone)(Object(c.hasClass)("wall_item",t.target)?t.target:Object(c.gpeByClass)("wall_item",t.target)),a=r.id,o=Object(c.geByClass1)("wi_body",r),s=Object(c.geByClass1)("wi_buttons",r),u=Object(c.geByClass1)("item_like",s),l=Object(c.geByClass1)("v_like",u),d=Object(c.geByClass1)("item_share",s),p=Object(c.geByClass1)("v_share",d),_=Object(c.remove)(Object(c.geByClass1)("item_replies",s)),h=!!_&&Object(c.geByClass1)("v_replies",_),f=+Object(c.stripTags)(Object(c.val)(h)).replace(/\D/g,""),b=Object(c.geByClass1)("pi_text_more",o),v=Object(c.geByClass1)("wi_date",r),g=f?Object(c.langNumeric)(f,n.mobile_wall_post_comments):n.mobile_wall_post_replies_title,A=_&&f<50?'<a name="comments"></a><h3 class="slim_header">'+(g||"")+'</h3><div id="al_loading"></div>':"";if(clog("item_replies",_),Object(c.remove)(Object(c.geByClass1)("wi_actions_btn",r)),Object(c.remove)(Object(c.geByClass1)("post__subscribeBtn",r)),Object(c.remove)(Object(c.geByClass1)("post__extraHeader",r)),l?Object(c.val)(l):Object(c.append)(Object(c.ce)("span",{className:"v_like"}),u),p?Object(c.val)(p):Object(c.append)(Object(c.ce)("span",{className:"v_share"}),d),b){var D=b.nextSibling?b:b.parentNode;D.nextSibling.style.display="inline",D.style.display="none"}v&&Object(c.attr)(v,"data-date")&&Object(c.val)(v,Object(c.attr)(v,"data-date")),i.setMhead(e,Object(c.attr)(t.target,"data-header"),!0);var O=Wd.html(Object(m.Separator)({hideOnDesktop:!0}));Object(c.val)(Object(c.geByClass1)("mcont",e),function(e,t,n,r){return'<div class="pcont"><div class="PageBlock">'+e+'<div class="wall_item single_wall_item" id="'+(t||"")+'">'+(n||"")+"</div>"+(r||"")+"</div></div>"}(O,a,Object(c.val)(r),A)),Object(c.addClass)("vk__page_singlePost",document.body)},afterAppend:function(e){var n=Object(c.geByTag1)("h3",e);n&&Object(c.alLoadingFix)(t.nav.hash?Object(c.getCh)()-n.offsetHeight:0),t.nav.hash?Object(c.scrollToHash)(t.nav.hash):Object(c.scrollTop)(0)}},t);break;case"pinfo":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){var t=window.lang,n=Object(c.geByClass1)("owner_panel",e),r=Object(c.geByClass1)("pp_img",n),a=Object(c.geByClass1)("op_header",n),o=Object(c.geByClass1)("lvi",a),s=Object(c.geByClass1)("pp_last_activity",n),u=Object(c.ce)("div");Object(c.addClass)("mhi_back",Object(c.geByClass1)("mh_header",e)),Object(c.val)(n,'<img src="'+Object(c.escapeAttr)(Object(c.attr)(r,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+Object(c.stripTags)(Object(c.val)(a))+'</h2><div class="pp_online">'+(o?t.mobile_online:Object(c.val)(s))+"</div></div>"),Object(c.val)(Object(c.geByClass1)("ipanel",e),"<div>"+Object(c.val)(u)+'</div><div id="al_loading"></div>'),i.setMhead(e,!1,!0)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0,10)}},t);break;case"player":w=!0;var I=Object(c.qs2obj)(t.nav.params).playlist_id;i.set(D,!1,{before:!0,beforeAppend:function(e){var t=window,n=t.lang,r=t.audio,a=(r.playlist(),r.playlist_q());i.setMhead(e,n.mobile_menu_player_head_title,!0),Object(c.val)(Object(c.geByClass1)("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '+AudioPlaylist.tplPlayerSearch(I)+'\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(a)+'"></div>\n                    </div>\n                  </div>\n                </div>'),Object(c.val)("m",e.innerHTML)}},t),E=function(){var e=window,n=e.qsearch,r=e.audio,a=r.playlist(),s="/audio"+Object(c.obj2qs)({act:"player",list:I}),u=[],l={},d=r.getCurrentId();Object(c.each)(a,(function(e,t){t.chartInfo=null,u.push(t.fullId),l[t.fullId]=[t.performer+" "+t.title,t]}));var p=u.indexOf(d),_=p>-1?Math.min(p+10,u.length):50,h=[];n.init({action:s,al_action:s,container:"au_search_items",field:Object(c.ge)("au_search_field"),btn:Object(c.ge)("au_search_btn"),top_items:u,_cache:l,forceRerender:!0,tpl:function(e,t,n,a){var i="";if(t){if(a)return a;i=""==a?'<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(t)+'">'+e+"</div>":'<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(t)+'"><div class="al_loading qs_loading">&nbsp;</div></div>'}else i='<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(r.playlist_q())+'">'+e+"</div>";return Wd.html(f({playlist_id:I,inner:Wd.wrap(i)}))},item_tpl:function(e){var t=window.audioplayer;return h.push(e),t&&t.getDOMFromAudio(e,!0,this.q,!0)||""},null_tpl:function(e){var t=window.lang;return'<div class="service_msg_box">\n                  <div class="service_msg service_msg_null">\n                  '+(e?t.mobile_audio_search_not_found.replace("%s",Object(c.htsc)(e)):t.mobile_audio_no_audio)+"\n                  </div>\n                </div>"},soft_filter:!0,need_invalid_keys:o.default.desktop,top_len:_,global_search:!0,onRendered:function(){var e=window,t=e.audioplayer,n=e.audio;t&&t.initAudio(),n.addToPlaylist(h),Object(c.alLoadingFix)()},al_need:!0,init_offset:0});var m=window.audioplayer.getCurrentElem();if(m){var b=Object(c.getY)(m)+m.offsetHeight/2-Object(c.getCh)()/2;Object(c.scrollTop)(b,100),i.save(D,{html:null,st:Object(c.scrollTop)(),page:Object(c.ge)("m"),state:i.stash(),cur:window.cur,options:t||{}},!1)}};break;case"photo":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e);var n=Object(c.geByTag1)("img",t.target),r=(Object(c.attr)(n,"data-src_big")||"").split("|"),a=(r[0],r[1],r[2],n&&n.src||"/images/mobile/blank.gif"),o=n&&n.width||+r[1]||0,s=n&&n.height||+r[2]||0,u=(domData(n,"info-title"),domData(n,"info-subtitle"),function(e,t){return Wd.html(Object(C.default)({is_loading:!0,photo:e}))}({src:a,width:o,height:s}));Object(c.val)(Object(c.geByClass1)("mcont",e),u),Object(c.alLoadingFix)(),i.setMhead(e,lang.mobile_photos_photo_title)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"album":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e);var n,o=t.target.href,s=/((?:album|tag)(-?\d+)(?:(?:_(\d+))?))/.exec(o);s&&(n=s[1]);var l=n&&Object(b.getState)(n)||{},d=Object(a.$)(".AlbumItemInfo__title",t.target),p=!1;t.target.classList.contains("AlbumItem--empty")&&(p=!0);var h=Object(u.makeUrl)("/"+n,{act:"select_album"}),f=Object(r.default)({},l,{title:l.title||Object(c.val)(d)||lang.mobile_page_title_album,description:Wd.wrap(l.description),is_empty:p,add_url:h}),m=function(e){return void 0===e&&(e={}),Wd.html(Object(v.default)(Object(r.default)({},e,{title:Wd.wrap(e.title),is_loading:!e.is_empty})))}(f);Object(c.val)(Object(c.geByClass1)("mcont",e),m),Object(c.alLoadingFix)(),i.setMhead(e,f.title,!0,!1,{movable:!0})},afterAppend:function(){Object(v.initAlbumPage)(),Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"albums":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e);var n=t.target.closest(".AlbumsBlock"),i=[];n&&(i=Array.from(Object(a.$$)(".AlbumItem",n)).map((function(e){return Object(A.getDataFromDOM)(e).album})));var o=function(e){return void 0===e&&(e={}),Wd.html(S(Object(r.default)({},e,{section:"all"})))}({albums:i});Object(c.val)(Object(c.geByClass1)("mcont",e),o),Object(c.alLoadingFix)()},afterAppend:function(){Object(v.initAlbumPage)(),Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"u":case"g":case"p":case"e":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"playlists":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"empty":case"artist":case"playlist":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){_.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"news_subsection":w=!0,i.set(D,!1,{before:!0,beforeAppend:function(e){var t=Object(c.geByClass1)("news_subsections",e);t&&!Object(c.hasClass)("summary_loading",t.firstChild)&&Object(c.before)(Object(c.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)}});break;case"tabbar":w=!0,t.is_fast=!0;var j=!1,P={options:{is_fast:!0,tab:t.tab,prev_tab:t.prev_tab}};t.need_check_updates&&h&&(P=Object(c.extend)(P,h),j=!0),i.set(D,P,{before:!j,beforeAppend:function(e){i.setMhead(e,Object(c.attr)(t.target,"data-header"),!1),_.drawSkeletonLoader(e,t.tab),document.body.classList.contains("vk_tabbar_bottom")&&i.hideHeader(e)},afterAppend:function(){Object(c.alLoadingFix)()}});break;default:p=window.cur;var T=!!Object(c.geByClass1)("mhi_logo","mhead");if(w=!0,p.al_fast&&p.al_fast[k])i.set(D,!1,p.al_fast[k](t),t);else if(!T){var N={options:{is_fast:!0,tab:t.tab,removeAfterNextResponse:t.removeAfterNextResponse}};i.set(D,N,{before:!0,afterAppend:function(){Object(c.alLoadingFix)()}})}}}if(t.need_check_updates||B.abort_reqs(),t.local){var M=!0;i.set(D,{},{after:!0,no_scroll:!0,force:!0},!1),E&&E()}else{var x=Object(R.partConfigEnabled)("mvk_fix_nav_params")?{}:Object(c.qs2obj)(t.nav.params);Object(c.extend)(x,t.params||{}),window.al&&!window.al.inited?x[l.NEED_MENU_PARAM]=l.FORCE_NEED_MENU:window.al&&window.al.menu||(x[l.NEED_MENU_PARAM]=l.NEED_MENU),O&&(x._tstat=O);var F=window.pStats,H=F.getSeenData();H&&(x._pstat=H.data,p&&p.module&&(x._pstatref=p.module)),t.target&&Object(s.isElement)(t.target)&&(x._ref=domData(t.target,"ref")),x._ref||(x._ref=(n.path||"").substr(1));var V=g.split("#");!x._hash&&V.length>1&&(x._hash="#"+V[1]),Object(d.preloadStaticForNavigation)(g);var U=Object.assign({},t.headers,{"X-Ajax-Nav":"true"});M=B.post(g,x,{onPageDone:function(e,n,r,o,s){B.fastNav=!1;var c=window.cur;if(H&&F.onSend(H.seen),B.tProcess=(new Date).getTime(),i.set(D,{title:e,html:n,js:r,lm:o,bc:s,st:t.st||0},{after:w,no_scroll:w,al_transition:!0},!w&&t),t.back){var u=Object(a.$)(".layout");i.setMhead(u,!1,t.back)}B.tModule=c.module,B.tRender=(new Date).getTime(),B.onNavDone()},redirectToLoginPage:t.redirectToLoginPage,headers:U});B.save_req()}return w&&(t.zProcess&&(t.zProcess(),delete t.zProcess),n.set(t),B.tModule=p.module,B.tFastRender=(new Date).getTime(),B.fastNav=!0),M},confirm:function(e){function t(t,n,r,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r){return!!confirm(t)&&B.click(e,r,{url_params:{hash:n}})})),_post:function(e,t,n){var r=function(e,t){n.onFail&&n.onFail.call(window,0,e,t)},a=window.debuglogSent?window.debuglogSent(e):-1;return B.plainpost(e,t,(function(i,o){if(204===o.status&&o.headers.get("X-AppShell-Fallback")){var s=location.href;return history.replaceState(null,null,Object(u.makeUrl)(location.href,{__appshell_fallback:o.headers.get("X-AppShell-Fallback")})),void location.replace(s)}var l=!1;try{l=Object(c.parseJSON)(i)}catch(t){if(o.getResponseHeader("Content-Type").includes("text/html"))return nav.hard_go(e,null,n);l=!1}!1===l?r():(B.parseResponse(l,e,t,n),B._debugLog(a,l.debugLog))}),r,null,{headers:n.headers})},_debugLog:function(e,t){window.debuglogGot&&window.debuglogGot(e,t)},parseResponse:function(e,t,n,r){var i,o=window.al,s=window.nav,u=window.menu,l=window.page,p=e.version,f=e.counters,m=e.notifications,b=e.type,v=e.statsMeta,g=t.indexOf("community")>=0,A=!1;if(b!==B.RESPONSE_IGNORE)switch(g?(A=!(!window.al||p===o.ver))&&Object(c.statlogsValueEvent)("mvk_version_reload",1,p,o.ver,"old_force_reload_community"):window.al&&p!==o.ver?Object(R.partConfigEnabled)("mvk_lazy_static_reload")?b===B.RESPONSE_ARGUMENTS?N||(N=new I.default({id:"mvk_static_manager",element:document,focusElement:window,triggerEvents:"mouseover mousedown keypress touchstart",idleTimeout:6e5,onIdleCb:function(){Object(c.statlogsValueEvent)("mvk_version_reload",1,p,o.ver,"new_idle_reload"),N.stop(),location.reload()}})).start():(Object(c.statlogsValueEvent)("mvk_version_reload",1,p,o.ver,"new_force_reload"),A=!0):(Object(c.statlogsValueEvent)("mvk_version_reload",1,p,o.ver,"old_force_reload"),A=!0):!window.menu||e.lm_data&&e.lm_data.lm||u.isMenuHasItems()&&((A=!u.refreshCounters(f))&&Object(c.statlogsValueEvent)("mvk_version_reload",1,p,o.ver,"old_force_reload_change_menu"),u.refreshNotifications(m)),void 0===f||!1===f||g||Object(c.setNotify)(f[x.COUNTERS_POS_MESSAGES]),e.lm_data&&e.lm_data.lm&&(f&&(e.lm_data.counters=f),m&&(e.lm_data.notifications=m)),v&&window.vk&&(window.vk.statsMeta=v),b){case B.RESPONSE_ARGUMENTS:if(A)return s.hard_go(s.cur,null,{replace:!0});var D=e.data;if(i=D&&Object(c.isObject)(D[0])&&D[0]._snackbar){if(Snackbar.init(i),2===i.type)return photoview.opened()?void photoview.close():Stories.opened?void Stories.close():zlayer.opened()?void zlayer.close():void(B.fastNav&&history.back());delete D[0]._snackbar}r&&r.onDone&&r.onDone.apply(window,D);break;case B.RESPONSE_REDIRECT:var O=e.location;B.onRedirect(!0,O);var w=e.hard,E=e.frame,y=e.clear,k=e.restore,S=e.replace;if(!E&&window.isNewMail&&B.onBeforeRedirect(O))break;if(y&&s.clear(),(i=e._snackbar)&&(Snackbar.init(i),delete e.snackbar),A||w)s.hard_go(O,null,{replace:S});else if(E){Object(_.setDocumentDomain)();var C=O+(-1==O.indexOf("?")?"?":"&")+"__extra=1",j=Object(c.createIframe)({src:C})}else S&&O===s.prev_cur?history.back():s.go(O,null,{ignore_cur_process:!0,need_restore:k,replace:S});break;case B.RESPONSE_CAPTCHA:var P=e.location,T=e.img,L=e.post,F=e.key;r&&r.onFail?r.onFail(b,P,{location:P,img:T,post:L,key:F}):s.hard_go(P);break;case B.RESPONSE_PAGE:var H=e.lm_data;if(l.need_hard_go=A,H&&H.rdr&&window.al&&o.menu&&Object(c.getW)("vk_wrap")>=614){s.go(H.rdr,null,{replace:!0});break}h.default.getRouter().deactivateAllRoutes(),cur.share&&"destroy"in cur.share&&cur.share.destroy(),(r=r||{}).onPageDone||(r.onPageDone=function(e,n,r,a,i){s.go(t,null,{push_only:!0}),l.set(l.getHash(s),{title:e,html:n,js:r,lm:a,bc:i})});var V=e.title,U=e.html,W=e.js,K=e.body_class,q=e.top_bar,G=Object(c.ge)("vk_topbar");q&&!G?(G=Object(c.ce)("div",{id:"vk_topbar",innerHTML:q}),Object(c.before)(G,Object(a.$)(".layout"))):Object(c.val)(G,q),e.env&&e.env.pe&&(window.vk.pe=e.env.pe),Object(d.addStatic)(e.static_files).then((function(){r.onPageDone(V,U,W,H,K)}));break;case B.RESPONSE_FAILED_AUTH:if(r.redirectToLoginPage)return window.location=e.location,!1;if(!B._failed_relogin){var z=e.location;Object(_.setDocumentDomain)();j=Object(c.createIframe)({src:z})}B._failed_relogin=!0,B.save_failed_req(j,t,n,r);break;case B.RESPONSE_CONFIRM:var Q=e.data,Y=M(Q),$=Wd.elem(Y);Popup.open($,!0);break;case B.RESPONSE_IGNORE:return}},onReLoginDone:function(){B.repeat_reqs(),B._failed_relogin=!1},tGetParam:function(){if(B.tStart&&B.tModule){var e=B.tFastRender-B.tStart,t=B.tRestoreRender-B.tStart,n=B.tProcess-B.tStart,r=B.tRender-B.tProcess,a=["/"==B.tModule.substr(0,1)?B.tModule.substr(1):B.tModule,e,t,n,r];for(var i in a)(!a[i]||a[i]<0)&&(a[i]=0);return B.tStart=!1,a.join(",")}},tAlGetParam:function(){if(B.tAlStart&&B.tAlModule){var e=B.tAlProcess-B.tAlStart,t=B.tAlRender-B.tAlProcess,n=["al_"+("/"==B.tAlModule.substr(0,1)?B.tAlModule.substr(1):B.tAlModule),e,t];for(var r in n)(!n[r]||n[r]<0)&&(n[r]=0);return B.tAlStart=!1,n.join(",")}},refreshLinks:function(e,t){if(e){var n=Object(c.geByClass1)("mmi_fv","lm_cont"),r=n&&Object(c.geByClass1)("lfm_item",n),a=Object(c.geByClass1)("mmi_fv","mfoot"),i=a&&Object(c.geByClass1)("lfm_item",a),o=Object(c.ge)("fv_link"),s=Object(c.ge)("menu_fv_link"),u=Object(c.geBySel1)('link[rel="canonical"]');Object(c.attr)(r,"href",e),Object(c.attr)(i,"href",e),Object(c.attr)(o,"href",e),Object(c.attr)(u,"href",Object(c.attr)(Object(c.ge)("mcont"),"data-canonical")),window.nav.prev_fv_link&&Object(c.attr)(s,"href",window.nav.prev_fv_link),window.nav.fv_link=e}if(t){var l=Object(c.geByClass1)("mmi_app","lm_cont"),d=l&&Object(c.geByClass1)("lfm_item",l),p=Object(c.geByClass1)("mmi_app","mfoot"),_=p&&Object(c.geByClass1)("lfm_item",p),h=Object(c.ge)("app_link"),f=!!t&&"return nav.app_go(this, event, '"+Object(c.escapeStr)(t)+"');";Object(c.attr)(d,"onclick",f),Object(c.attr)(_,"onclick",f),Object(c.attr)(h,"onclick",f)}}};window.ajax=B}t.default=window.ajax},lMzL:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n("wx14"),a=n("d4g6"),i=n("lNyc"),o=n("4zn2"),s=n("9kLB"),c=n("UlUB"),u=n("gF8j"),l={id:"active_time",triggerEvents:"mouseover mousedown keypress",timeout:15e3,maxChainInterval:0,doesScrollTriggerIdle:!1,callback:function(){}},d=function(){function e(e){void 0===e&&(e={}),this._timeChainStart=void 0,this._timeStart=0,this._timeActivityStart=0,this._sumActiveTime=0,this.opts=Object.assign({},l,e),this._idle=new u.default({id:this.opts.id,element:document,focusElement:window,triggerEvents:this.opts.triggerEvents,idleTimeout:this.opts.timeout}),window.addEventListener("beforeunload",this._onTabClose.bind(this)),this.opts.doesScrollTriggerIdle&&window.addEventListener("scroll",Object(c.throttle)(this._onScroll.bind(this),this.opts.timeout)),this._idle.on("idle",this._onTabInactive.bind(this)),this._idle.on("unidle",this._onTabActive.bind(this)),this._idle.start(),this._timeChainStart=Date.now(),document.activeElement===document.body&&this.start()}var t=e.prototype;return t._checkTimeLimit=function(){this._timeStart&&this.opts.maxChainInterval&&(Date.now()-this._timeStart>this.opts.maxChainInterval&&this.endInterval())},t._sessionEnd=function(){this.opts.callback(this.getData())},t.getData=function(){var e=Date.now(),t=this._sumActiveTime;return this._timeActivityStart&&(t+=e-this._timeActivityStart),{timeChainStart:this._timeChainStart,timeStart:this._timeStart,timeEnd:e,activeTime:t}},t._onTabActive=function(){this.start()},t._onTabInactive=function(){this.stop()},t._onTabClose=function(){this.endInterval()},t._onScroll=function(){var e=this;this._idle.unidle(),clearTimeout(this._idleTimeoutHandler),this._idleTimeoutHandler=setTimeout((function(){return e._idle.idle()}),2*this.opts.timeout)},t.stop=function(){this._timeActivityStart&&(this._sumActiveTime+=Date.now()-this._timeActivityStart,this._checkTimeLimit(),this._timeActivityStart=0)},t.start=function(){if(this._checkTimeLimit(),!this._timeActivityStart){var e=Date.now();this._timeStart||(this._timeStart=e),this._timeActivityStart=e}},t.resetToNewTimer=function(){this._timeStart=0,this._sumActiveTime=0,this._timeActivityStart=0},t.endInterval=function(e){return void 0===e&&(e=!0),this._timeActivityStart?(e&&this._sessionEnd(),this._idle.stop(),this.resetToNewTimer(),this):this},t.startInterval=function(){return this._idle.start(),this.start(),this},e}(),p=n("J8bf"),_=n("W0P9"),h={triggerEvents:"mousemove keydown keypress",timeout:18e4},f=function(){function e(e,t){void 0===t&&(t={}),this.opts=Object.assign({},h,t),this.activeTime=null,this.sessionId=null,this.sessions={},this.appId=e,this.lastIdleTs=0}var t=e.prototype;return t.start=function(){this._loadSessions(),this.sessionId=this._getSessionId(),Object(_.log)("[AppSessionTimeLogger] started with session id",this.sessionId),this.activeTime=new d({id:"app_"+this.appId,triggerEvents:this.opts.triggerEvents,timeout:this.opts.timeout,doesScrollTriggerIdle:!0,callback:this._saveSession.bind(this)}),this.activeTime._idle.on("idle",this._onIdle.bind(this)),this.activeTime._idle.on("unidle",this._onUnIdle.bind(this)),this.activeTime.start()},t.stop=function(){Object(_.log)("[AppSessionTimeLogger] stopped."),this.activeTime&&(this.activeTime.endInterval(),this.activeTime.stop(),this.sessions={},this.activeTime=null)},t.idle=function(){this.activeTime&&this.activeTime._idle.cbInactive()},t.unIdle=function(){this.activeTime&&this.activeTime._idle.cbActive()},t._clearOldSessions=function(){var e=this,t=Object.keys(this.sessions);t.length>10&&(t.sort((function(e,t){var n=+e.split("_")[1];return+t.split("_")[1]-n})),t.slice(10).forEach((function(t){delete e.sessions[t],Object(_.log)("[AppSessionTimeLogger] deleted old session",t)})))},t._saveSession=function(){this._logSession(),Object(p.setCookie)("remixapp_session",JSON.stringify(this.sessions),.01)},t._logSession=function(){if(this.sessionId&&this.activeTime){this._clearOldSessions();var e=this.activeTime.getData().activeTime;(e=Math.round(e/1e3))>0&&(this.sessions[this.sessionId]=e),Object(_.log)("[AppSessionTimeLogger] Log sessions:",this.sessions)}},t._onIdle=function(){this.lastIdleTs=Date.now()},t._onUnIdle=function(){this.activeTime&&(this.lastIdleTs&&Date.now()-this.lastIdleTs>this.opts.timeout&&(this.activeTime.endInterval(),this.activeTime.startInterval(),this.sessionId=this._getSessionId(),Object(_.log)("[AppSessionTimeLogger] last session is ended after timeout",this.opts.timeout),Object(_.log)("[AppSessionTimeLogger] start new session with id",this.sessionId)),this.lastIdleTs=0)},t._getSessionId=function(){return this.appId+"_"+Date.now()},t._loadSessions=function(){var e=Object(p.getCookie)("remixapp_session");if(e)try{this.sessions=JSON.parse(e)}catch(e){this.sessions={}}Object(_.log)("[AppSessionTimeLogger] Load old sessions from cookie",this.sessions)},e}(),m=n("PU8N"),b=n("aJgW"),v=n("W9Tc"),g=function(){function e(e,t,n,a,o){var s=this;this.sendIframeMessage=function(e,t){var n=document.getElementById(s.containerId);n&&Object(i.sendMessage)({type:e,data:Object(r.default)({},t)},n)},this.appId=t.aid,this.src=t.src,this.pic=a,this.params=Object(r.default)({},n),this.containerId=e,this.vkApp=o,this.apiHost=t.vk_app_api_host,this.isDirectGame=t.is_direct_game,this.isVKPayApp=t.is_vkpay_app,this.isTextliveApp=t.is_textlive_app,this.isMiniAppWidget=t.is_mini_app_widget,this.handler=this.handler.bind(this),this.onResize=this.onResize.bind(this),this.i=0,this.eventQueue=[]}var t=e.prototype;return t.init=function(){var e=this;this.sessionLogger=new f(this.appId),cur.destroy.unshift((function(){e.destroyView()})),window.addEventListener("visibilitychange",(function(){document.hidden?e.sessionLogger&&e.sessionLogger.idle():e.sessionLogger&&e.sessionLogger.unIdle()})),window.addEventListener("message",this.handler),window.addEventListener("beforeunload",(function(){e.destroyView()})),this.getWindowSize(),cur.VKApp=cur.VKApp||{},cur.VKApp.vkMiniAppsHistoryLength=window.history.length,Object(m.isMvk)()?(b.colorScheme.subscribe((function(){var t=b.colorScheme.isDarkScheme()?o.CLIENT_SCHEME.SPACE_GRAY:o.CLIENT_SCHEME.BRIGHT_LIGHT;e.sendUpdateEvent(t)})),this.onResize(),window.addEventListener("resize",this.onResize),this.checkDevice()):(window.matchMedia("(prefers-color-scheme: dark)").addListener((function(t){return t.matches&&e.sendUpdateEvent(Object(m.isMvk)()?o.CLIENT_SCHEME.SPACE_GRAY:o.CLIENT_SCHEME.BRIGHT_LIGHT)})),window.matchMedia("(prefers-color-scheme: light)").addListener((function(t){return t.matches&&e.sendUpdateEvent(o.CLIENT_SCHEME.BRIGHT_LIGHT)})))},t.initOpenExternalApp=function(){var e=new URLSearchParams(location.search);if(cur.zNavInfo&&cur.zNavInfo.info.w&&e.has("w")){var t=/app[0-9]+/.exec(cur.zNavInfo.info.w);if(t){var n=parseInt(t[0].replace("app",""),10);Object(i.chooseAction)({eventData:{app_id:n},params:{app_id:n,request_id:"vkopenexternalapp"},handler:s.CONNECT_EVENTS.OPEN_APP},this)}}},t.destroyView=function(){window.removeEventListener("message",this.handler),this.sessionLogger&&this.sessionLogger.stop()},t.sendUpdateEvent=function(e){Object(i.chooseAction)({handler:s.CONNECT_EVENTS.UPDATE_CONFIG,params:{viewport_width:this.currentWidth,viewport_height:this.currentHeight,scheme:e||this.getColorScheme(),api_host:this.apiHost}},this)},t.onResize=function(){if(!this.isDirectGame&&!(Object(m.isMvk)()&&cur.share||this.currentHeight===window.innerHeight)){this.getWindowSize();var e=document.querySelector(".app_container"),t=e&&e.childNodes[0];t&&!Object(v.partConfigEnabled)("mini_apps_m_web_navigation_redesign")&&(t.style.height=this.currentHeight+"px",t.style.minHeight=this.currentHeight+"px",this.sendUpdateEvent())}},t.getWindowSize=function(){this.currentHeight=window.innerHeight,this.currentWidth=window.innerWidth},t.getColorScheme=function(){if(Object(m.isMvk)())return b.colorScheme.isDarkScheme()?o.CLIENT_SCHEME.SPACE_GRAY:o.CLIENT_SCHEME.BRIGHT_LIGHT;var e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=window.matchMedia("(prefers-color-scheme: light)").matches,n=window.matchMedia("(prefers-color-scheme: no-preference)").matches,r=!e&&!t&&!n;return e&&Object(m.isMvk)()?o.CLIENT_SCHEME.SPACE_GRAY:t||n||r?o.CLIENT_SCHEME.BRIGHT_LIGHT:void 0},t.handler=function(e){var t=Object(a.getHostName)(e.origin)===Object(a.getHostName)(this.src)||Object(a.isAllowedPostMessageOriginHost)(this.vkApp.options,Object(a.getHostName)(e.origin));if(e.data&&"vk-connect"===e.data.type&&t){var n=this;if(e.data.handler===s.CONNECT_EVENTS.INIT&&(this.sessionLogger&&this.sessionLogger.start(),n&&n.sendUpdateEvent(),!Object(m.isMvk)())){var o=document.getElementById(this.containerId);o&&Object(i.sendMessage)({type:s.CONNECT_EVENTS.SETTINGS,frameId:this.containerId},o)}if(cur.vkAppQueue&&Object.keys(cur.vkAppQueue).length>1){var c=e.data.frameId||e.data.webFrameId||this.containerId;if(!c)throw new Error("There is no specified id for container");c===this.containerId&&(n=cur.vkAppQueue[c],Object(i.chooseAction)(Object(r.default)({},e.data,{pic:this.pic}),n))}else Object(m.isMvk)()?cur.app.hideVkAppPreload():this.initOpenExternalApp(),Object(i.chooseAction)(Object(r.default)({},e.data,{pic:this.pic}),n)}else if(e.data&&e.data.type===s.CONNECT_EVENTS.CLOSE&&Object(m.isMvk)()){var u=ge(this.containerId);u&&Object(i.sendMessage)({type:e.data.name,data:e.data.eventData},u)}},t.checkDevice=function(){this.isIOS()&&this.checkIOSXDevice()&&document.body.classList.add("vk_ios_x_device")},t.isIOS=function(){return document.body.classList.contains("vk_ios_yes")},t.checkIOSXDevice=function(){var e=window.screen.height;return e>=812&&e<900},t.actualizeEventQueue=function(){var e=Date.now()-3e4,t=this.eventQueue.findIndex((function(t){return t.timeInMs>=e}));-1===t?this.eventQueue=[]:this.eventQueue.splice(0,t)},t.isRequestsLimitReached=function(){return this.actualizeEventQueue(),15===this.eventQueue.length},e}();function A(e,t,n,r,a){if(cur.vkAppQueue||(cur.vkAppQueue={}),!cur.vkAppQueue[e]){var i=new g(e,t,n,r,a);i.init(),cur.vkAppQueue[e]=i}}},lNyc:function(e,t,n){"use strict";n.r(t),n.d(t,"sendMessage",(function(){return Le})),n.d(t,"chooseAction",(function(){return Be}));var r=n("wx14"),a=n("dI71"),i=n("Vy5E"),o=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppInit",n}return Object(a.default)(t,e),t.prototype.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.successHandler({result:!0})},t}(i.default),s=n("JX7q"),c=n("gNaZ"),u=n("Y96s"),l=function(){function e(e,t){this.props=Object(r.default)({},e),t&&(this.callback=t),this.appNode=ge(this.props.containerId),this.modal=null,this.onAction=this.onAction.bind(this),this.onCancelAction=this.onCancelAction.bind(this),this.onAllow=this.onAllow.bind(this)}var t=e.prototype;return t.show=function(){var e=this;setTimeout((function(){return e.modal.classList.add("show")}),300)},t.destroy=function(){this.modal.parentNode.removeChild(this.modal),this.callback&&this.callback()},t.onAction=function(e){this.props.allowUIAction({scope:e,app_id:this.props.app_id}),this.destroy()},t.onCancelAction=function(e){e&&e(),this.destroy()},t.onAllow=function(){var e=this,t=[];Array.from(this.modal.querySelectorAll(".blind_label:checked")).map((function(n){var r=parseInt(n.id.replace("scope_",""),10);if(!e.props.scopes[r])throw new Error("There is no such scope");t.push(e.props.scopes[r])})),this.onAction(t.join(","))},t._renderBtn=function(e){var t=this,n=document.createElement("button");return n.setAttribute("type","button"),n.classList.add("vk_app_modal_btn"),n.classList.add("vk_app_modal_btn--"+e.type),n.innerText=e.title,"success"===e.type?n.addEventListener("click",(function(){return t.onAllow()})):n.addEventListener("click",(function(){return t.onCancelAction(e.action)})),n},t._renderBtns=function(e){var t=this;this.props.buttons.map((function(n){e.getElementsByClassName("vk_app_modal_btns")[0].appendChild(t._renderBtn(n))}))},t._renderCloseBtn=function(e){var t=this,n=document.createElement("div");n.setAttribute("aria-label","Close"),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.classList.add("box_x_button"),n.addEventListener("click",(function(){return t.onCancelAction(t.props.cancelAction)})),e.querySelector(".box_title_wrap").appendChild(n)},t._renderOuter=function(){return document.querySelector(".vk_app_modal_outer")},t._enhanceBtnsWithActions=function(){var e=this;this.props.buttons&&this.props.buttons.forEach((function(t,n){"deny"===t.type?e.props.buttons[n].action=e.props.cancelAction:e.props.buttons[n].action=e.props.allowAction}))},t._renderScopes=function(e){return e.map((function(e,t){return'\n    <div class="scope_row">\n      <input class="blind_label" type="checkbox" id="scope_'+t+'" checked="">\n      <label for="scope_'+t+'">'+getLang("vkapps_scope_"+e)+"</label>\n    </div>\n    "})).join("\n")},t.renderModal=function(){this._enhanceBtnsWithActions(),this.modal=this._renderOuter(),this.modal.innerHTML='\n  <div class="box_layout vk_app_modal_container">\n    <div class="box_title_wrap">\n       <div class="box_title">'+this.props.title+'</div>\n    </div>\n    <div class="box_body" style="display: block;">\n      '+(this.props.text?"<p>"+this.props.text+"</p>":"")+"\n      "+(this.props.scopes&&'<div class="vk_app_modal_scopes">'+this._renderScopes(this.props.scopes)+"</div>")+'\n    </div>\n    <div class="box_controls_wrap" style="display: block;">\n      <div class="box_controls vk_app_modal_btns"></div>\n    </div>\n  </div>\n',this.props.showCloseBtn&&this._renderCloseBtn(this.modal),this._renderBtns(this.modal)},e}(),d=n("4zn2"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetCommunityAuthToken",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_community_request_token")},n.callApi=!0,n.useUI=!0,n.allowUIAction=n.allowUIAction.bind(Object(s.default)(n)),n.checkToken=n.checkToken.bind(Object(s.default)(n)),n.checkIntroData=n.checkIntroData.bind(Object(s.default)(n)),n.onEditClick=n.onEditClick.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.scopeList=function(e){var t=this,n=this.app.params.group_whitelist_scopes?e.filter((function(e){return t.app.params.group_whitelist_scopes.includes(e)})):e;return n=n.filter((function(e,t,n){return t===n.indexOf(e)}))},n.checkScopes=function(e){var t=this;return 0===e.filter((function(e){return!t.app.params.group_whitelist_scopes.includes(e)})).length},n.onEditClick=function(e){this.editScopesModal.renderModal()},n.launchUI=function(e){this.createDenyUIAction(),this.createAllowUIAction(e),this.modal=new u.default(Object(r.default)({},this.params.modal,{},e,{scopes:this.params.scope,showCloseBtn:!0,extraAction:this.onEditClick})),this.editScopesModal=new l(Object(r.default)({},this.params.modal,{},e,{text:getLang("apps_connect_modal_messages_scopes_available"),scopes:this.params.scope,showCloseBtn:!0,allowUIAction:this.allowUIAction})),c.default.push(this.modal)},n.takeAction=function(e){var t=this;ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName()},this.request,{},e),{onDone:function(e){t.handleResponse(e,null,t.checkToken)},onFail:function(e){return t.errorHandler(e),!0}})},n.checkToken=function(e){e.access_token?this.successHandler(Object(r.default)({},e)):this.errorHandler({reason:"Invalid params"})},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},this.request),{onDone:function(n){t.handleResponse(n,e,t.checkIntroData)},onFail:function(e){return t.errorHandler(e),!0}})},n.allowUIAction=function(e){this.takeAction(e),c.default.pop(this.modal)},n.checkIntroData=function(e,t){if(e.hasOwnProperty("status")){if(!e.hasOwnProperty("group"))return this.errorHandler();e.group.photo_100&&(t.pic=e.group.photo_100),e.group.name&&(t.title=this.params.modal.title+" "+e.group.name),this.launchUI(Object(r.default)({},t,{scopes:this.scopeStringToArray(t.scope)}))}},n.handler=function(e,t,n){if(this.setData(e,t),this.callback=n,e.scope||""===e.scope)if("string"==typeof e.scope)if(e.app_id)if("number"!=typeof e.app_id||e.app_id<0)this.errorHandler({code:2,reason:'Param "app_id" should be a positive number'},n);else if(e.app_id===parseInt(this.app.appId,10))if(e.group_id)if("number"!=typeof e.group_id||e.group_id<0)this.errorHandler({code:2,reason:'Param "group_id" should be a positive number'},n);else{var r=this.scopeStringToArray(e.scope);r&&this.checkScopes(r)?(this.params.scope=this.scopeList(r),this.loadIntroData(e)):this.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:d.ERROR_REASONS.UNKNOWN_ERROR},n)}else this.errorHandler({code:2,reason:'Missing required param "group_id"'},n);else this.errorHandler({code:2,reason:'Wrong param "app_id"'},n);else this.errorHandler({code:2,reason:'Missing required param "app_id"'},n);else this.errorHandler({code:2,reason:'Param "scope" should be a string'},n);else this.errorHandler({code:2,reason:'Missing required param "scope"'},n)},n.actionHandler=function(e){this.loadIntroData(e)},t}(i.default),_=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetCommunityToken",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_community_request_token")},n.callApi=!0,n.useUI=!0,n.allowUIAction=n.allowUIAction.bind(Object(s.default)(n)),n.checkToken=n.checkToken.bind(Object(s.default)(n)),n.checkIntroData=n.checkIntroData.bind(Object(s.default)(n)),n.onEditClick=n.onEditClick.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.scopeList=function(e){var t=this,n=this.app.params.group_whitelist_scopes?e.filter((function(e){return t.app.params.group_whitelist_scopes.includes(e)})):e;return n=n.filter((function(e,t,n){return t===n.indexOf(e)}))},n.checkScopes=function(e){var t=this;return 0===e.filter((function(e){return!t.app.params.group_whitelist_scopes.includes(e)})).length},n.onEditClick=function(e){this.editScopesModal.renderModal()},n.launchUI=function(e){this.createDenyUIAction(),this.createAllowUIAction(e),this.modal=new u.default(Object(r.default)({},this.params.modal,{},e,{scopes:this.params.scope,showCloseBtn:!0,extraAction:this.onEditClick})),this.editScopesModal=new l(Object(r.default)({},this.params.modal,{},e,{text:getLang("apps_connect_modal_messages_scopes_available"),scopes:this.params.scope,showCloseBtn:!0,allowUIAction:this.allowUIAction})),c.default.push(this.modal)},n.takeAction=function(e){var t=this;ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName()},this.request,{},e),{onDone:function(e){t.handleResponse(e,null,t.checkToken)},onFail:function(e){t.errorHandler(e)}})},n.checkToken=function(e){e.access_token?this.successHandler(Object(r.default)({},e)):this.errorHandler({reason:"Invalid params"})},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},this.request),{onDone:function(n){t.handleResponse(n,e,t.checkIntroData)},onFail:function(e){return t.errorHandler(e),!0}})},n.allowUIAction=function(e){this.takeAction(e),c.default.pop(this.modal)},n.checkIntroData=function(e,t){if(e.hasOwnProperty("status")){if(!e.hasOwnProperty("group"))return this.errorHandler();e.group.photo_100&&(t.pic=e.group.photo_100),e.group.name&&(t.title=this.params.modal.title+" "+e.group.name),this.launchUI(Object(r.default)({},t,{scopes:this.scopeStringToArray(t.scope)}))}},n.handler=function(e,t,n){if(this.setData(e,t),this.callback=n,this.checkParams(e,[{param:"scope",type:"string",isRequired:!0},{param:"app_id",type:"number",isRequired:!0,extraChecks:[{check:function(e){return e>0},error:function(e){return'Param "'+e+'" should be a positive number'}}]},{param:"group_id",type:"number",isRequired:!0,extraChecks:[{check:function(e){return e>0},error:function(e){return'Param "'+e+'" should be a positive number'}}]}])){var r=this.scopeStringToArray(e.scope);r&&this.checkScopes(r)?(this.params.scope=this.scopeList(r),this.loadIntroData(e)):this.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:d.ERROR_REASONS.UNKNOWN_ERROR},n)}},n.actionHandler=function(e){this.loadIntroData(e)},t}(i.default),h=n("PU8N"),f=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAddToCommunity",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_request_add_to_community"),text:getLang("apps_connect_modal_messages_request_add_to_community_text")},n.callApi=!0,n.useUI=!0,n.allowUIAction=n.allowUIAction.bind(Object(s.default)(n)),n.addToCommunitySuccessHandler=n.addToCommunitySuccessHandler.bind(Object(s.default)(n)),n.addToCommunityErrorHandler=n.addToCommunityErrorHandler.bind(Object(s.default)(n)),n.unsetCurHandlers=n.unsetCurHandlers.bind(Object(s.default)(n)),n.checkIntroData=n.checkIntroData.bind(Object(s.default)(n)),n.checkAppAdd=n.checkAppAdd.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.takeAction=function(){var e=this;ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName(),app_id:this.app.appId},this.request),{onDone:function(t){e.handleResponse(t,{},e.checkAppAdd)},onFail:function(t){return e.errorHandler(t),!0}})},n.checkAppAdd=function(e){parseInt(e,10)&&this.successHandler({result:!0})},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e);var n=Object(h.isMvk)()?Object(r.default)({act:"vkapps_add_to_community_box",hash:cur.app.options.hash,app_id:this.app.appId},this.request):Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},this.request);Object(h.isMvk)()?window.ajax.post("apps.php",n,{onDone:function(e,t){cur.app.showAppsBox(e,t)},onFail:function(e){return t.errorHandler(e),!0}}):ajax.post("apps.php",n,{onDone:function(e){t.handleResponse(e,{},t.checkIntroData)},onFail:function(e){return t.errorHandler(e),!0}})},n.allowUIAction=function(e){this.loadIntroData(e),c.default.pop(this.modal)},n.checkIntroData=function(e){var t=this;e.items.length>0?showBox("apps",{act:"add_vk_app_to_groups_box",app_id:this.app.appId},{params:{dark:1,width:450,bodyStyle:"padding: 22px 0 0"},onFail:function(e){return window.showFastBox(getLang("global_error"),e),!0}}):0===e.items.length&&(this.errorHandler({code:1}),this.noCommunitiesBox=new MessageBox({title:getLang("global_error"),dark:1}).content(getLang("vkapps_no_admin_communities_warning")).addButton(getLang("global_close"),(function(){t.noCommunitiesBox.hide()})).show())},n.unsetCurHandlers=function(){cur.vkAppAddToCommunitySuccessHandler=null,cur.vkAppAddToCommunityErrorHandler=null,Object(h.isMvk)()&&VKApps.cancelSettings()},n.addToCommunitySuccessHandler=function(e){this.successHandler(e),this.unsetCurHandlers()},n.addToCommunityErrorHandler=function(e){this.errorHandler(e||{code:4}),this.unsetCurHandlers()},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,cur.vkAppAddToCommunitySuccessHandler=this.addToCommunitySuccessHandler,cur.vkAppAddToCommunityErrorHandler=this.addToCommunityErrorHandler,this.launchUI(e)},n.actionHandler=function(e){this.loadIntroData(e)},t}(i.default),m=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAddToHomeScreenInfo",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.successHandler({is_feature_supported:!1,is_added_to_home_screen:!1})},t}(i.default);function b(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(function(e){var t=document.createElement("input"),n=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n.focus()}(e),Promise.resolve())}var v=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppCopyText",n}Object(a.default)(t,e);var n=t.prototype;return n.copyError=function(){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Can’t copy text on this device"},this.callback)},n.actionHandler=function(e){var t=this;e.text?b(e.text).then((function(){t.successHandler({result:!0})})).catch((function(){t.copyError()})):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Missing required param "text"'})},t}(i.default),g=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetUserInfo",n.callApi=!0,n.useUI=!1,n}return Object(a.default)(t,e),t}(i.default),A=n("9kLB"),D=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppSetLocation",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){e.hasOwnProperty("location")?"string"==typeof e.location?(Object(h.isMvk)()?nav.set({replace:!0,nav:{push:location.pathname+location.search+"#"+e.location,path:location.pathname,hash:"#"+e.location}}):cur.app.funcs.setLocation(e.location),Be({handler:A.CONNECT_EVENTS.LOCATION_CHANGED,params:{location:e.location}},this.app),this.successHandler({result:!0})):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "location" should be a string'}):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "location"'})},t}(i.default),O=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetClientVersion",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){var t=d.PLATFORM.WEB;Object(h.isMvk)()&&(t=d.PLATFORM.MOBILE_WEB),this.successHandler({platform:t,version:"0.0"},this.callback)},t}(i.default),w=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetPhoneNumber",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_request_phone"),text:getLang("apps_connect_modal_messages_request_phone_text")},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",{act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"],app_id:this.app.appId},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var r=JSON.parse(n);t.checkIntroData(r,e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.checkIntroData=function(e,t){e.hasOwnProperty("phone_number")&&e.sign?this.successHandler(e):this.launchUI(t)},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.loadIntroData()},t}(i.default),E=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetEmail",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_request_email"),text:getLang("apps_connect_modal_messages_request_email_text")},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",{act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"],app_id:this.app.appId},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var r=JSON.parse(n);t.checkIntroData(r,e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.checkIntroData=function(e,t){e.hasOwnProperty("email")&&e.sign?this.successHandler(e):this.launchUI(t)},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.loadIntroData()},t}(i.default),y=n("vuIU"),k=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetGeodata",n.callApi=!0,n.useUI=!1,n.timeoutFails=0,n.geodataSuccess=n.geodataSuccess.bind(Object(s.default)(n)),n.geodataFail=n.geodataFail.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.geodataSuccess=function(e){var t=e.coords.longitude,n=e.coords.latitude;this.successHandler({available:!0,lat:n,long:t},this.callback)},n.geodataFail=function(e){switch(e.code){case 3:this.timeoutFails++,this.timeoutFails<2?navigator.geolocation.getCurrentPosition(this.geodataSuccess,this.geodataFail):this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Geolocation timeout error"},this.callback);break;case 2:this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Device can't get geodata"},this.callback);break;case 1:this.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User didn't allowed"},this.callback)}},n.actionHandler=function(e){var t=this;if(!this.callApi)return{};navigator.geolocation.getCurrentPosition((function(e){return t.geodataSuccess(e)}),(function(e){return t.geodataFail(e)}),{maximumAge:15e5,timeout:2e3})},Object(y.default)(t,[{key:"successDescriptor",get:function(){return"VKWebAppGeodataResult"}},{key:"errorDescriptor",get:function(){return"VKWebAppGeodataFailed"}}]),t}(i.default),S=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenQR",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),C=function(e){function t(t){var n;n=e.call(this,t)||this;var r=getLang("apps_connect_modal_messages_send_install_push");return n.params.handlerName="VKWebAppSendToClient",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:r.replace("{app_name}",cur.app.options.app_name)},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.handler=function(e,t,n){this.setData(e,t),this.props=e,this.callback=n,this.loadIntroData()},n.loadIntroData=function(e){var t=this;ajax.post("apps.php",{act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},{onDone:function(n){var r=JSON.parse(n);t.checkIntroData(r,e)},onFail:function(){t.sendNetworkError()}})},n.checkIntroData=function(e,t){e.result?this.actionHandler():this.launchUI(t)},n.actionHandler=function(){var e=this;return new Promise((function(t,n){ajax.post("apps.php",{act:"handle_vk_connect_event",hash:e.getEventHash(),event:e.getEventName(),app_id:e.app.appId,group_id:e.props.group_id,fragment:e.props.fragment,al:1,cid:0,ref:0},{onDone:function(e){t(e)},onFail:function(e){n(e)}})})).then((function(){e.successHandler({result:!0})})).catch((function(){e.sendNetworkError()}))},t}(i.default),R=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppSetViewSettings",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),I=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppSetTitle",n}return Object(a.default)(t,e),t.prototype.handler=function(e,t,n){if(this.setData(e,t),this.callback=n,this.app.isTextliveApp){if(!this.checkParams(e,[{param:"title",type:"string",isRequired:!0}]))return;setDocumentTitle(e.title)}else this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},n)},t}(i.default),j=function(e){function t(t){var n;n=e.call(this,t)||this;var r=cur.app.isDirectGame?getLang("vkapps_connect_modal_game_request_token"):getLang("apps_connect_modal_messages_request_token_var");return n.params.handlerName="VKWebAppGetAuthToken",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:r.replace("{app_name}",cur.app.options.app_name)},n.callApi=!0,n.useUI=!0,n.onEditClick=n.onEditClick.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.scopeList=function(e){var t=this,n=this.app.params.whitelist_scopes?e.filter((function(e){return~t.app.params.whitelist_scopes.indexOf(e)})):e;return n=n.filter((function(e,t,n){return t===n.indexOf(e)}))},n.checkScopes=function(e){var t=this;return 0===e.filter((function(e){return!t.app.params.whitelist_scopes.includes(e)})).length},n.onEditClick=function(e){this.editScopesModal.renderModal()},n.launchUI=function(e){this.createDenyUIAction(),this.createAllowUIAction(e),this.modal=new u.default(Object(r.default)({},this.params.modal,{},e,{scopes:this.params.scope,showCloseBtn:!0,extraAction:this.onEditClick}));var t=cur.app.isDirectGame?getLang("vkapps_connect_modal_game_request_token_available_title"):getLang("apps_connect_modal_messages_scopes_available");this.editScopesModal=new l(Object(r.default)({},this.params.modal,{},e,{text:t,scopes:this.params.scope,showCloseBtn:!0,allowUIAction:this.allowUIAction})),c.default.push(this.modal)},n.actionHandler=function(e){var t=this;return this.callApi?ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName],app_id:this.app.appId},e),{onDone:function(e){if(e.hasOwnProperty("error"))t.errorHandler(e.error);else try{var n=JSON.parse(e);n.access_token?t.successHandler(Object(r.default)({},n)):t.errorHandler({reason:"Invalid params"})}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}}):{}},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),this.app.appId==e.app_id?ajax.post("apps.php",{act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"],app_id:this.app.appId,scope:e.scope},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var r=JSON.parse(n);t.checkIntroData(r,e)}catch(e){console.log(e),t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}}):this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Wrong app id"})},n.checkIntroData=function(e,t){if(e.status){var n={};e.access_token&&(n.access_token=e.access_token),n.scope=this.params.scope.join(","),this.successHandler(n)}else this.launchUI(t)},n.handler=function(e,t,n){if(this.setData(e,t),this.callback=n,e.scope||""===e.scope)if("string"==typeof e.scope)if(e.app_id)if("number"==typeof e.app_id){var r=this.scopeStringToArray(e.scope);r&&this.checkScopes(r)?(this.params.scope=this.scopeList(r),this.loadIntroData(e)):this.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:d.ERROR_REASONS.UNKNOWN_ERROR},n)}else this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Param "app_id" should be a number'},n);else this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "app_id"'},n);else this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Param "scope" should be a string'},n);else this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "scope"'},n)},Object(y.default)(t,[{key:"successDescriptor",get:function(){return"VKWebAppAccessTokenReceived"}},{key:"errorDescriptor",get:function(){return"VKWebAppAccessTokenFailed"}}]),t}(i.default),P=n("d4g6"),T=n("W9Tc");var N=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppCallAPIMethod",n.params.v="5.85",n.params.method=null,n.resolveResponse=n.resolveResponse.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=Object(r.default)({},e.params);e.request_id&&(t.request_id=e.request_id),function(e,t,n,a,i){if(n||(n={}),delete n.callback,t)if(n.hasOwnProperty("access_token")){Object.keys(n).forEach((function(e){"object"==typeof n[e]&&(n[e]=JSON.stringify(n[e]))}));var o=Object(r.default)({api_id:e.appId,method:t,format:"json",v:d.API_VERSION},n),s=Object(P.objectToQuerystring)(o),c=new XMLHttpRequest,u=Object(T.partConfigEnabled)("mini_apps_web_call_api_form_data")&&6911063!==parseInt(e.appId,10);u?(c.open("POST","https://"+e.apiHost+"/method/"+t),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):c.open("POST","https://"+e.apiHost+"/method/"+t+s),c.onload=function(){if(200==c.status)try{var e=JSON.parse(c.response);n.request_id&&(e.request_id=n.request_id),e.hasOwnProperty("error")?i({reason:e.error}):a(e)}catch(e){i({code:1,reason:e.message})}else i({reason:c.statusText})},c.onerror=function(){i({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:d.ERROR_REASONS.NETWORK_ERROR})},u?c.send(s):c.send()}else i({code:d.ERROR_CODES.MISSING_PARAM,reason:"Missing required param access_token"});else i({code:d.ERROR_CODES.MISSING_PARAM,reason:"Missing required param method"})}({appId:this.app.appId,apiHost:this.app.apiHost},e.method,t,this.successHandler,this.errorHandler)},n.resolveResponse=function(e){e&&(e.hasOwnProperty("error")?this.errorHandler(e.error):this.successHandler(e))},n.handler=function(e,t,n){this.callback=n,this.setData(e,t),e.params?e.params.v||e.params.version?isNaN(parseInt(e.params.v,10))&&isNaN(parseInt(e.params.version,10))?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "v" should be a number'},n):(e.params.hasOwnProperty("v")?this.params.v=e.params.v:e.params.hasOwnProperty("version")&&(this.params.v=e.params.version),this.actionHandler(e)):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "v"'},n):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:"Missing required params"},n)},t}(i.default),M=function(e){function t(t){var n;return(n=e.call(this,t)||this).callApi=!0,n.useUI=!0,n.allowUIAction=n.allowUIAction.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.takeAction=function(){var e=this;ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName(),app_id:this.app.appId},this.request),{onDone:function(t){t.hasOwnProperty("error")?e.errorHandler(t.error):parseInt(t,10)?e.successHandler({result:!0}):e.errorHandler()},onFail:function(t){return e.errorHandler(t),!0}})},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},this.request),{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var a=JSON.parse(n),i=a.group.is_closed;t.checkIntroData(Object(r.default)({isGroupMember:a.is_group_member,canJoin:i!==d.GROUP_STATUS.PRIVATE,can_send_messages:a.can_send_messages},a.group),e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.allowUIAction=function(e){this.takeAction(e),c.default.pop(this.modal)},n.checkIntroData=function(e,t){this.params.modal.pic=e.photo_100,this.params.modal.app_name=e.name,this.params.modal.subscribers=e.members_count>1e3?Math.ceil(e.members_count/1e3):e.members_count,this.params.modal.title=e.name,this.createDenyUIAction(),this.createAllowUIAction(t),this._enhanceBtnsWithActions()},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,e.group_id?"number"==typeof e.group_id?this.loadIntroData(e):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Param "group_id" should be a number'},this.callback):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Param "group_id" is missing'},this.callback)},n.actionHandler=function(e){this.loadIntroData(e)},t}(i.default),x=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppJoinGroup",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_subscribe"),type:"success"}],text:getLang("apps_connect_modal_messages_join_group_text"),showCloseBtn:!0},n}return Object(a.default)(t,e),t.prototype.checkIntroData=function(t,n){e.prototype.checkIntroData.call(this,t,n),t.isGroupMember?this.successHandler({result:!0}):t.canJoin?(this.modal=new u.default(Object(r.default)({},this.params.modal)),c.default.push(this.modal)):this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"User can not join this group"})},t}(M),L=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppLeaveGroup",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_leave"),type:"success"}],text:getLang("apps_connect_modal_messages_leave_group_text"),showCloseBtn:!0},n}return Object(a.default)(t,e),t.prototype.checkIntroData=function(t,n){e.prototype.checkIntroData.call(this,t,n),t.isGroupMember?(this.modal=new u.default(Object(r.default)({},this.params.modal)),c.default.push(this.modal)):this.successHandler({result:!0})},t}(M),B=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAllowMessagesFromGroup",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],text:getLang("apps_connect_modal_messages_allow_messages_text"),title:getLang("apps_connect_modal_messages_allow_messages_title")},n}return Object(a.default)(t,e),t.prototype.checkIntroData=function(t,n){e.prototype.checkIntroData.call(this,t,n),t.can_send_messages?this.successHandler({result:!0}):(this.params.modal.text=this.params.modal.text.replace("{group_name}",t.name),this.modal=new u.default(Object(r.default)({},this.params.modal)),c.default.push(this.modal))},t}(M),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppDenyNotifications",n.callApi=!0,n.useUI=!1,n}return Object(a.default)(t,e),t}(i.default),H=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenPayForm",n.checkTransaction=n.checkTransaction.bind(Object(s.default)(n)),n.destroyVkPayContainer=n.destroyVkPayContainer.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){this.app.isMiniAppWidget?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"You can not call VKWebAppOpenPayForm from widget"}):e.action?"string"==typeof e.action?e.params?e.hasOwnProperty("app_id")&&"number"!=typeof e.app_id?this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'"app_id" param should be an integer number'}):window.cur&&window.cur.app&&window.cur.app.isDirectGame?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"This event supported only for services"}):this.launchVkPayContainer(e):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "params"'}):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Param "action" should be a string'}):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "action"'})},n.openPayApp=function(e){var t=Object(r.default)({},e.params);t.action=e.action,cur.app.funcs.openExternalApp("vkpay",t,this.errorHandler)},n.checkTransaction=function(e){var t=!Object(h.isMvk)()||e.origin===location.origin;e.data&&"vk-connect"===e.data.type?e.data.handler===d.VKPAY_TRANSACTION_EVENT&&t&&(e.data.params.status?this.successHandler(Object(r.default)({},e.data.params),this.callback):this.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:Object(r.default)({},e.data.params,{error_msg:"VK Pay payment failed"})}),Object(h.isMvk)()||this.destroyVkPayContainer()):e.data&&e.data.externalAppClosed&&this.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User denied"})},n.destroyVkPayContainer=function(){window.removeEventListener("message",this.checkTransaction)},n.launchVkPayContainer=function(e){this.openPayApp(e),window.addEventListener("message",this.checkTransaction)},t}(i.default),V=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAllowNotifications",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_allow_notifications_title"),text:getLang("apps_connect_modal_messages_allow_notifications_text")},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.takeAction=function(){var e=this,t={group_id:this.request.group_id};this.request.hasOwnProperty("key")&&(t.key=this.request.key),ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName(),app_id:this.app.appId},t),{onDone:function(t){e.handleResponse(t,{},(function(t){return e.successHandler(t)}))},onFail:function(t){return e.errorHandler(t),!0}})},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",{act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var a=JSON.parse(n);t.checkIntroData(Object(r.default)({can_send_messages:a.can_send_messages},a.group),e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.allowUIAction=function(e){this.takeAction(e),c.default.pop(this.modal)},n.checkIntroData=function(e,t){e.can_send_messages?this.successHandler({result:!0}):(this.params.modal.pic="/images/vk-app-notification.png",this.params.modal.picClass="MiniAppModalContainer__pic--small",this.params.modal.app_name=e.name,this.createDenyUIAction(),this.createAllowUIAction(t),this._enhanceBtnsWithActions(),this.modal=new u.default(Object(r.default)({},this.params.modal)),c.default.push(this.modal))},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,cur.app.isDirectGame?this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:"This method allowed for mini apps only"}):this.loadIntroData(e)},t}(i.default),U=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenApp",n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=this;if(this.app.appId!==e.app_id||Object(P.isVKPayApp)(parseInt(this.app.appId,10))){var n={open_app_id:e.app_id};this.openAppId=e.app_id,e.location&&(n.location=e.location),this.openApp=Object(r.default)({},n),ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:this.getEventHash(),event:this.getEventName(),app_id:this.app.appId},n),{onDone:function(n){try{var r=JSON.parse(n);r.hasOwnProperty("original_url")?(t.successHandler({result:!0}),Object(h.isMvk)()?cur.app.openAppInLayer(r.original_url,!0):(cur.app.openAppInLayer(r.original_url,(function(){return Object(P.destroyOpenedApp)(e.app_id)})),cur.miniAppOpener||(cur.miniAppOpener=t.app))):r.hasOwnProperty("error")&&t.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:"Invalid params"})}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})}else this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Same app id as origin"})},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.app.isMiniAppWidget?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"You can not call VKWebAppOpenApp from widget"},n):e.app_id?"number"==typeof e.app_id?e.hasOwnProperty("location")&&"string"!=typeof e.location?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'"location" param should be a string'},n):this.actionHandler(e):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "app_id" should be a number'},n):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "app_id"'},n)},n.createUrl=function(e){return"app"+e.app_id+(e.hasOwnProperty("location")?"#"+e.location:"")},t}(i.default),W=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShare",n.appId=cur.app.params.api_id,n.userId=cur.app.params.viewer_id,n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){e.link&&"string"!=typeof e.link?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "link" should be a string'},this.callback):Object(h.isMvk)()?(this.shareEmitters(),e.link?cur.app.funcs.shareBox(e.link,"","","",this.successHandler,this.errorHandler):cur.app.funcs.shareBox("https://vk.com/app"+cur.aid,cur.appShareParams.sharePhoto,cur.appShareParams.shareTitle,cur.appShareParams.shareDesc,this.successHandler,this.errorHandler)):e.link?cur.app.funcs.showWallPostBox({message:e.link,attachments:e.link},this.successHandler,this.errorHandler):(this.shareEmitters(),this.share(this.appId,this.userId))},n.share=function(e,t){var n=this;showBox("like.php",{act:"publish_box",object:"app"+e+"_"+t},{onFail:function(){n.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:"Unknown error",error_type:"client_error"},n.callback)},params:{onHide:function(){setTimeout((function(){cur.app.vkMiniAppShareSuccess&&n.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User denied",error_type:"client_error"},n.callback)}),1e3)}}})},n.cleanEmitters=function(){cur.app.vkMiniAppShareSuccess=null,cur.app.vkMiniAppShareFail=null},n.shareEmitters=function(){var e=this;cur.app.vkMiniAppShareSuccess=function(t){t.post_id?e.successHandler({type:"post",post_id:t.owner_id+"_"+t.post_id}):"number"==typeof t&&e.successHandler({type:"message"}),e.cleanEmitters()},cur.app.vkMiniAppShareFail=function(t){t?e.errorHandler(t):e.errorHandler({error_type:"client_error",code:d.ERROR_CODES.USER_DENIED}),e.cleanEmitters()}},t}(i.default),K=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowNewPostBox",n.appId=cur.app.params.api_id,n.userId=cur.app.params.viewer_id,n}Object(a.default)(t,e);var n=t.prototype;return n.checkFields=function(e){return this.checkParams(e,[{param:"owner_id",type:"number",isRequired:!0},{param:"author_id",type:"number",isRequired:!0},{param:"textlive_id",type:"number",isRequired:!1,extraChecks:[{check:function(){return d.TEXTLIVE_APPS.includes(cur.app.params.api_id)},error:function(){return d.ERROR_REASONS.UNKNOWN_ERROR}}]}])},n.actionHandler=function(e){Object(h.isMvk)()?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM}):this.checkFields(e)&&this.open(e)},n.open=function(e){var t=e.textlive_id,n=e.author_id,r=e.owner_id,a=e.post,i=a?a.id:0;this.initEmitters(),cur.getWkviewOpts=function(){return{textlive_id:t,author_id:n,owner_id:r,textpost_id:i}},showWiki({w:"postbox"},null,null,{})},n.cleanEmitters=function(){cur.app.vkMiniAppNewPostSuccess=null,cur.app.vkMiniAppNewPostFail=null},n.initEmitters=function(){var e=this;window.cur.app.vkMiniAppNewPostSuccess=function(t){t.post_id?e.successHandler({type:"post",post_id:t.owner_id+"_"+t.post_id}):"number"==typeof t&&e.successHandler({type:"message"}),e.cleanEmitters()},window.cur.app.vkMiniAppNewPostFail=function(t){t?e.errorHandler(t):e.errorHandler({error_type:"client_error",code:d.ERROR_CODES.USER_DENIED}),e.cleanEmitters()}},t}(i.default),q=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowWallPostBox",n.externalSuccessHandler=n.externalSuccessHandler.bind(Object(s.default)(n)),n.externalErrorHandler=n.externalErrorHandler.bind(Object(s.default)(n)),n.setExternalHandlers(),n}Object(a.default)(t,e);var n=t.prototype;return n.setExternalHandlers=function(){cur.VKWebAppShowWallPostBoxErrorHandler=this.externalErrorHandler,cur.VKWebAppShowWallPostBoxSuccessHandler=this.externalSuccessHandler},n.unsetCurHandlers=function(){cur.VKWebAppShowWallPostBoxErrorHandler=null,cur.VKWebAppShowWallPostBoxSuccessHandler=null,Object(h.isMvk)()&&VKApps.cancelSettings()},n.externalSuccessHandler=function(e){e&&e[1]?this.successHandler({post_id:e[1]}):this.errorHandler(),this.unsetCurHandlers()},n.externalErrorHandler=function(){this.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User denied"}),this.unsetCurHandlers()},n.actionHandler=function(e){e.hasOwnProperty("message")?e.message&&"string"!=typeof e.message?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "message" should be a string'},this.callback):(e.message=e.message.replace(/(\r)/g,""),cur.app.funcs.showWallPostBox(e,this.successHandler.bind(this),this.errorHandler.bind(this))):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "message"'})},t}(i.default),G=function(){function e(e,t,n){this.desiredOffset=e,this.speed=t,this.onComplete=n}return e.prototype.go=function(){window.Apps.scrollToY(this.desiredOffset,this.speed,void 0,void 0,this.onComplete)},e}(),z=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppScroll",n.useUI=!1,n.DEFAULT_SPEED=100,n.onScrollEnd=n.onScrollEnd.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.onScrollEnd=function(){this.successHandler({result:{top:this.params.data.top,height:document.documentElement.offsetHeight}})},n.actionHandler=function(e){if(Object(h.isMvk)())this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback);else if(e.hasOwnProperty("top"))if("number"==typeof e.top)if(e.hasOwnProperty("speed")&&"number"!=typeof e.speed)this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'"speed" param should be a number'});else{var t=e.hasOwnProperty("speed")?e.speed:this.DEFAULT_SPEED;if(this.params.data={top:e.top},~this.app.containerId.indexOf("layer")){var n=ge("wk_layer_wrap");n?n.scrollTop=e.top:this.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:d.ERROR_REASONS.UNKNOWN_ERROR})}else this.scroll=new G(e.top,t,this.onScrollEnd.bind(this)),this.scroll.go()}else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "top" should be a number'});else this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "top"'})},t}(i.default),Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppResizeWindow",n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.setWidth=function(e){var t=165;e&&this.app.vkApp&&(e=Math.min(Math.max(e,607),1e3),this.app.vkApp.options.layout_width&&(t=this.app.vkApp.options.layout_width-e),this.app.vkApp.options.layer?WkView.onResize():window.handlePageView&&handlePageView({noleftmenu:vk.noleftmenu,nobottommenu:vk.nobottommenu,notopmenu:vk.notopmenu,body_class:vk.body_class,staticheader:vk.staticheader,no_ads:vk.no_ads,ad_preview:vk.ad_preview,top_home_link_class:vk.top_home_link_class,width:Math.max(e,607)+t}),cur.app.frame.style.width=cur.app.cont.style.width=e+"px",this.result.width=e)},n.setHeight=function(e){var t=500;if(e){this.app.isTextliveApp&&(t=0),e=Math.min(Math.max(e,t),8050),this.app.vkApp.inlineApp&&e>this.app.vkApp.options.heightMax&&!this.app.vkApp.params.is_vkpay_service&&(e=this.app.vkApp.options.heightMax);var n=e+"px";cur.app.frame.style.height=n,this.app.vkApp.options.boxed||(cur.app.cont.style.height=n),this.app.vkApp.options.layer&&WkView.onResize(),this.app.vkApp.options.onResize&&this.app.vkApp.options.onResize(),this.result.height=e}},n.actionHandler=function(e){Object(h.isMvk)()?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback):e.hasOwnProperty("width")&&"number"!=typeof e.width?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "width" should be a number'}):e.hasOwnProperty("height")&&"number"!=typeof e.height?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "height" should be a number'}):e.hasOwnProperty("height")||e.hasOwnProperty("width")?(this.result={},e.hasOwnProperty("width")&&this.setWidth(e.width),e.hasOwnProperty("height")&&this.setHeight(e.height),this.successHandler({result:Object(r.default)({},this.result)})):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:"At least one parameter is required"})},t}(i.default),Y=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppSendPayload",n.callApi=!0,n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.handler=function(e,t,n){if(this.setData(e,t),this.callback=n,e.group_id)if("number"==typeof e.group_id)if(e.hasOwnProperty("payload")&&"object"!=typeof e.payload)this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'"payload" param should be an object'},n);else{try{e.payload=JSON.stringify(e.payload)}catch(e){this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "payload" is not valid JSON object'},n)}this.actionHandler(e)}else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "group_id" should be a number'},n);else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Missing required param "group_id"'},n)},n.actionHandler=function(e){var t=this;return ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName],app_id:this.app.appId},e),{onDone:function(n){try{var a=JSON.parse(n);a.hasOwnProperty("error")?t.errorHandler(a.error,t.callback,d.ERROR_TYPES.API):a.status?t.successHandler(Object(r.default)({},a,{scope:e.scope})):t.errorHandler({reason:"Invalid params"})}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},t}(i.default),$=/^https:\/\/(?:(?:.*)\.)*vk.com(\/@[a-z0-9_-]+)$/im,J=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenArticle",n.callApi=!1,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.launchUI=function(e){var t=this,n=e.url,r=void 0===n?"":n,a=r.match($);if(a&&a[1]){var i=a[1];if(Object(h.isMvk)()){var o=window.location.pathname.substr(1);window.nav.go(i+"?from="+o)}else window.show(boxLoader),window.show(boxLayerWrap),window.boxRefreshCoords(boxLoader),window.articlePrepare(i,{onEducationCloseBtnClick:function(e){return t.successReadHandler(e)},onFailCallBack:function(){window.hide(boxLoader),window.hide(boxLayerWrap),t.errorHandler({code:d.ERROR_CODES.UNKNOWN,error_type:d.ERROR_TYPES.CLIENT,reason:"ServerError: Can't open article."})}},(function(){window.hide(boxLoader),window.hide(boxLayerWrap),window.nav.go(i),t.successHandler({result:!0})}))}else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:"Error: incorrect url: "+r})},n.successReadHandler=function(e){this.callback({type:"VKWebAppArticleClosed",data:e},this.params.handlerName),Object(h.isMvk)()&&cur.app.frame.focus()},t}(i.default),Z=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppUpdateConfig",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){var t,n={api_host:e.api_host,scheme:e.scheme||d.CLIENT_SCHEME.BRIGHT_LIGHT};if(e.viewport_width)if(e.viewport_height){var a=null==(t=cur.app)?void 0:t.options.layer;a&&(n.is_layer=a),Object(h.isMvk)()?this.successHandler(Object(r.default)({},n),this.callback):this.successHandler(Object(r.default)({},n,{viewport_width:e.viewport_width,viewport_height:e.viewport_height}),this.callback)}else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Missing required param "viewport_height"'});else this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Missing required param "viewport_width"'})},Object(y.default)(t,[{key:"successDescriptor",get:function(){return""+this.params.handlerName}},{key:"errorDescriptor",get:function(){return this.params.handlerName+"Failed"}}]),t}(i.default),X=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppTapticImpactOccurred",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),ee=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppTapticNotificationOccurred",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),te=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppTapticSelectionChanged",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),ne=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowImages",n}Object(a.default)(t,e);var n=t.prototype;return n.checkUrlString=function(e){try{return!!new URL(e)}catch(e){return!1}},n.handler=function(e,t,n){var r=this;if(this.setData(e,t),this.callback=n,Object(h.isMvk)()){var a=window.photoview,i=e.start_index,o=e.images;if(this.checkParams(e,[{param:"images",type:"object",isRequired:!0,extraChecks:[{check:function(e){return e.every((function(e){return r.checkUrlString(e)}))},error:function(e){return'Param "'+e+'" should be a valid link.'}},{check:function(e){return e.every((function(e){return e.startsWith("https://")}))},error:function(e){return'Param "'+e+'" should be https link.'}}]},{param:"start_index",type:"number",extraChecks:[{check:function(e){return e>=0},error:function(e){return'Param "'+e+'" should be non-negative number.'}},{check:function(e){return void 0!==o[e]},error:function(e){return'Param "'+e+'" should be a valid index in the pictures array.'}}]}])){var s=i||0,c=o.map((function(e){return{src:e}}));a.open(s,c,{showControls:!1}),this.successHandler({result:!0})}}else this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},n)},t}(i.default),re=n("I3vf"),ae=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowLeaderBoardBox",n.callApi=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(t){Object(h.isMvk)()?e.prototype.actionHandler.call(this,t):this.errorHandler({error_type:"client_error",error_code:d.ERROR_CODES.INVALID_PARAMS,reason:"Not supported for this platform"})},n.handleResponse=function(e,t){var n=this;if((e=JSON.parse(e)).hasOwnProperty("error"))this.errorHandler(e.error);else{var a=Object(r.default)({},t,{},e);window.DirectGames.showLeaderBoard({onClose:function(){n.successHandler({result:!0})},board:a})}},t}(i.default),ie=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowInviteBox",n.callApi=!0,n}return Object(a.default)(t,e),t.prototype.actionHandler=function(t){Object(h.isMvk)()?window.DirectGames.showInviteBox({onSuccess:e.prototype.actionHandler.bind(this),onFail:this.errorHandler}):cur.app.funcs.showInviteBox(this.successHandler.bind(this),this.errorHandler.bind(this))},t}(i.default),oe=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenArticleEditor",n.callApi=!1,n.useUI=!0,n.launchUI=n.launchUI.bind(Object(s.default)(n)),n}Object(a.default)(t,e);var n=t.prototype;return n.launchUI=function(e){if(cur.app.params.open_article_edit&&!window.isMvk){var t=e.owner_id,n=e.article_id,r=e.course_id,a="number"==typeof t,i="number"==typeof n,o="number"==typeof r;t&&a?n&&!i?this.errorHandler({code:i?d.ERROR_CODES.MISSING_PARAM:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "article_id" is wrong. Expected integer greater than 0, got type '+typeof n+" with value "+n+"."}):r&&(!o||r<=0)?this.errorHandler({code:o?d.ERROR_CODES.MISSING_PARAM:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "course_id" is wrong. Expected integer greater than 0, got type '+typeof r+" with value "+r+"."}):window.openArticleEditor&&window.openArticleEditor(t,n,null,{course_id:r,is_education:r>0?1:0,app_id:this.app.appId,app_hash:this.getEventHash()},{from:"app",eventHandler:this.successHandler.bind(this),errorHandler:this.errorWrapper.bind(this)}):this.errorHandler({code:a?d.ERROR_CODES.MISSING_PARAM:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "owner_id" is missing or wrong. Expected integer, got type '+typeof t+" with value "+t+"."})}else this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:window.isMvk?"ClientError: This handler is forbidden on this platform":"ClientError: This app isn't allowed to use this handler"})},n.errorWrapper=function(e){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:e})},t}(i.default),se=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowRequestBox",n.callApi=!0,n}return Object(a.default)(t,e),t.prototype.actionHandler=function(t){var n=this;Object(h.isMvk)()?ajax.post("apps.php",{act:"handle_vk_connect_event",hash:this.getEventHash(!0),event:this.getEventName(!0),app_id:this.app.appId,friend_id:t.uid},{onDone:function(a){try{(a=JSON.parse(a)).hasOwnProperty("error")?n.errorHandler(a.error):(Object.assign(t,a),window.DirectGames.showRequestBox(Object(r.default)({},t,{onSuccess:e.prototype.actionHandler.bind(n),onFail:n.errorHandler})))}catch(e){n.errorHandler(e)}},onFail:function(e){n.errorHandler(e)}}):(cur.app.registerVkBridgeCallback("onRequestFail",(function(e){n.errorHandler(e)})),cur.app.registerVkBridgeCallback("onRequestCancel",(function(){n.errorHandler({reason:"User denied",code:d.ERROR_CODES.USER_DENIED})})),cur.app.registerVkBridgeCallback("onRequestSuccess",(function(){n.successHandler({request_key:t.requestKey,success:!0})})),cur.app.funcs.showRequestBox(t.uid,t.message,t.requestKey))},t}(i.default),ce=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppStorageGetKeys",n.callApi=!0,n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.handler=function(e,t,n){this.setData(e,t),this.callback=n,e.hasOwnProperty("count")&&"number"!=typeof e.count?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "count" should be a number'},n):e.hasOwnProperty("offset")&&"number"!=typeof e.offset?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "offset" should be a number'},n):e.hasOwnProperty("global")&&"boolean"!=typeof e.global?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "global" should be a boolean'},n):(e.global=e.global?1:0,this.actionHandler(e))},n.actionHandler=function(e){var t=this;return ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName],app_id:this.app.appId},e),{onDone:function(n){t.handleResponse(n,e,(function(e){return t.successHandler(e)}))},onFail:function(e){t.errorHandler(e)}})},t}(i.default),ue=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppStorageSet",n.callApi=!0,n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.handler=function(e,t,n){this.setData(e,t),this.callback=n,e.key?"string"==typeof e.key?e.hasOwnProperty("value")&&"string"!=typeof e.value?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "value" should be a string'},n):e.hasOwnProperty("global")&&"boolean"!=typeof e.global?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "global" should be a boolean'},n):(e.global=e.global?1:0,this.actionHandler(e)):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "key" should be a string'},n):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "key"'},n)},n.actionHandler=function(e){var t=this;return ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName],app_id:this.app.appId},e),{onDone:function(n){t.handleResponse(n,e,(function(e){return t.successHandler(e)}))},onFail:function(e){t.errorHandler(e)}})},t}(i.default),le=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppStorageGet",n.callApi=!0,n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.handler=function(e,t,n){this.setData(e,t),this.callback=n,e.keys?"object"==typeof e.keys?e.hasOwnProperty("global")&&"boolean"!=typeof e.global?this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "global" should be a boolean'},n):(e.global=e.global?1:0,this.actionHandler(e)):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "keys" should be a string'},n):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "keys"'},n)},n.actionHandler=function(e){var t=this;return ajax.post("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName],app_id:this.app.appId},e),{onDone:function(n){t.handleResponse(n,e,(function(e){return t.successHandler(e)}))},onFail:function(e){t.errorHandler(e)}})},t}(i.default),de=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAddToFavorites",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_add"),type:"success"}],title:getLang("apps_connect_modal_messages_request_add_to_favorites"),text:getLang("apps_connect_modal_messages_request_add_to_favorites_text"),svgIcon:'<svg class="vk_app_modal_container__pic" width="56" height="56" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0H32V32H0z"/><path d="M15.487 22.565a.985.985 0 0 1 1.026 0l5.682 3.468c.004 0-.509-2.159-1.538-6.476a.983.983 0 0 1 .317-.975l5.056-4.328c.002-.004-2.211-.184-6.639-.54a.984.984 0 0 1-.83-.602L16.005 6.97c-.004-.003-.86 2.045-2.566 6.142a.984.984 0 0 1-.83.602l-6.637.532c-.003.002 1.681 1.448 5.054 4.336.28.24.402.616.317.975l-1.545 6.47c.001.005 1.898-1.15 5.69-3.462zm-4.656 5.146a1.974 1.974 0 0 1-2.947-2.14l1.405-5.886-4.6-3.937a1.97 1.97 0 0 1 1.126-3.462l6.038-.484 2.326-5.587a1.973 1.973 0 0 1 3.642 0l2.326 5.587 6.038.484a1.971 1.971 0 0 1 1.126 3.462l-4.6 3.937 1.405 5.886a1.97 1.97 0 0 1-2.947 2.14L16 24.556l-5.169 3.155z" fill="#528BCC" fill-rule="nonzero"/></g></svg>'},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),ajax.post("apps.php",{act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"],app_id:this.app.appId},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var r=JSON.parse(n);t.checkIntroData(r,e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.checkIntroData=function(e,t){e.added_to_favorites?this.successHandler({result:!0}):this.launchUI(t)},n.checkResponse=function(e){Object(h.isMvk)()?this.checkResponseMvk(e):this.checkResponseWeb(e)},n.checkResponseMvk=function(t){!0===t.result&&window.cur&&window.cur.VKApp&&(window.cur.VKApp.isFavorite=!window.cur.VKApp.isFavorite,window.DirectGames&&window.DirectGames.initMenu()),e.prototype.checkResponse.call(this,t)},n.checkResponseWeb=function(t){t.result&&t.result.left_nav&&(window.Apps.updateLeftNav(t.result.left_nav),window.Apps.updateAddToMenuAction(),t={result:t.result.success}),e.prototype.checkResponse.call(this,t)},n.handler=function(e,t,n){(Object(T.partConfigEnabled)("mini_apps_web_add_to_favorites")||cur.app.isDirectGame)&&(this.setData(e,t),this.callback=n,this.loadIntroData())},t}(i.default),pe=n("o0o1"),_e=n.n(pe),he=n("HaE+"),fe=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppAddToMenu",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_add"),type:"success"}],title:getLang("apps_connect_modal_messages_request_add_to_menu"),text:getLang("apps_connect_modal_messages_request_add_to_menu_text"),svgIcon:'<svg class="vk_app_modal_container__pic" width="56" height="56" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0H32V32H0z"/><path d="M15.487 22.565a.985.985 0 0 1 1.026 0l5.682 3.468c.004 0-.509-2.159-1.538-6.476a.983.983 0 0 1 .317-.975l5.056-4.328c.002-.004-2.211-.184-6.639-.54a.984.984 0 0 1-.83-.602L16.005 6.97c-.004-.003-.86 2.045-2.566 6.142a.984.984 0 0 1-.83.602l-6.637.532c-.003.002 1.681 1.448 5.054 4.336.28.24.402.616.317.975l-1.545 6.47c.001.005 1.898-1.15 5.69-3.462zm-4.656 5.146a1.974 1.974 0 0 1-2.947-2.14l1.405-5.886-4.6-3.937a1.97 1.97 0 0 1 1.126-3.462l6.038-.484 2.326-5.587a1.973 1.973 0 0 1 3.642 0l2.326 5.587 6.038.484a1.971 1.971 0 0 1 1.126 3.462l-4.6 3.937 1.405 5.886a1.97 1.97 0 0 1-2.947 2.14L16 24.556l-5.169 3.155z" fill="#528BCC" fill-rule="nonzero"/></g></svg>'},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(){var e=Object(he.default)(_e.a.mark((function e(t){var n=this;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){ajax.post("apps.php",{act:"handle_vk_connect_event",hash:n.getEventHash(),event:n.getEventName(),app_id:n.app.appId,al:1,show:1},{onDone:function(t){e(t)},onFail:function(e){t(e)}})})).then((function(e){var t=window.Apps;t.updateLeftNav(e.left_nav),t.updateAddToMenuAction(!1),t.addToMenuErrorResolve(e),n.successHandler({result:Boolean(e&&e.left_nav)})})).catch((function(){n.sendNetworkError()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.isAppInLeftMenu=function(e,t){var n=this;return new Promise((function(e,t){ajax.post("apps.php",{act:"handle_vk_connect_event",hash:n.getEventHash(!0),event:n.getEventName(!0),app_id:n.app.appId},{onDone:function(t){e(t)},onFail:function(e){t(e)}})})).then((function(t){e&&e(t.result)})).catch((function(){t()}))},n.handler=function(e,t,n){var r=this;if(Object(T.partConfigEnabled)("mini_apps_web_add_to_menu")){if(this.setData(e,t),this.callback=n,Object(h.isMvk)())return void this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback);this.isAppInLeftMenu((function(t){t?r.successHandler({result:!0}):r.launchUI(e)}))}},t}(i.default),me=function(e){function t(t){var n;return(n=e.call(this,t)||this).onFlistHide=function(){n.hasSuccess||n.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User denied"})},n.params.handlerName="VKWebAppGetFriends",n.callApi=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e),cur.onFlistSave=function(){return t.onFlistSave.apply(t,arguments)},cur.onFlistHide=this.onFlistHide,showTabbedBox("apps.php",Object(r.default)({act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[""+this.params.handlerName]+"_hash"],event:d.VK_CONNECT_EVENTS[""+this.params.handlerName],app_id:this.app.appId},this.request),{stat:["ui_controls.js","ui_controls.css"]})},n.onFlistSave=function(e,t){this.hasSuccess=!0;var n={};n.users=t.friends.map((function(e){var t=e[1].split(" ");return{id:e[0],sex:parseInt(e[5],10),last_name:t[1]?t[1]:"",first_name:t[0],photo_200:e[2]}})),this.request.lists&&(n.lists=t.lists.map((function(e){return e[0]})).sort()),this.successHandler(n)},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,Object(h.isMvk)()?this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback):this.checkParams(e,[{param:"multi",type:"boolean"},{param:"lists",type:"boolean"}])&&(e.hasOwnProperty("lists")&&(e.lists=e.lists?1:0),e.hasOwnProperty("multi")&&(e.multi=e.multi?1:0),this.actionHandler(e))},n.actionHandler=function(e){this.loadIntroData(e)},t}(i.default),be=n("jE6c"),ve=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppShowCommunityWidgetPreviewBox",n}Object(a.default)(t,e);var n=t.prototype;return n.resetBox=function(){delete cur.onAppWidgetPreviewFail,delete cur.onAppWidgetPreviewCancel,delete cur.onAppWidgetPreviewSuccess,setTimeout((function(){delete cur.appWidgetPreviewBox}),3e3)},n.actionHandler=function(e){if(Object(h.isMvk)())this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM});else{if(!this.checkParams(e,[{param:"group_id",type:"number",isRequired:!0},{param:"type",type:"string",isRequired:!0}]))return;this.showWidgetPreviewBox(e)}},n.showWidgetPreviewBox=function(e){var t=this;if(!cur.appWidgetPreviewBox){cur.appWidgetPreviewBox=!0,cur.onAppWidgetPreviewFail=function(e){t.resetBox(),t.errorHandler(e)},cur.onAppWidgetPreviewCancel=function(){t.resetBox(),t.errorHandler({code:d.ERROR_CODES.USER_DENIED,reason:"User denied"})},cur.onAppWidgetPreviewSuccess=function(){t.resetBox(),t.successHandler({result:!0})};var n=showBox("apps",{act:"app_widget_preview_box",aid:this.app.appId,gid:e.group_id,type:e.type,code:e.code},{params:{width:600,containerClass:"apps_app_widget_preview_box"},onDone:function(){n.setOptions({onHide:function(){Object(be.isFunction)(cur.onAppWidgetPreviewCancel)&&cur.onAppWidgetPreviewCancel()}})},onFail:function(e){return~e.indexOf("413 Request Entity Too Large")&&(e="413 Request Entity Too Large"),Object(be.isFunction)(cur.onAppWidgetPreviewFail)&&cur.onAppWidgetPreviewFail(e),!0}})}},t}(i.default),Ae=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenInNativeApp",n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=window.browser,n=t.ipad,r=t.iphone,a=t.android;if(Object(h.isMvk)()&&(n||r||a)){if(!this.checkParams(e,[{param:"link",type:"string",isRequired:!0}]))return;this.openInNativeApp(e.link)}else this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM})},n.openInNativeApp=function(e){var t=this;if(this._openAppInProgress)return!1;var n="vk://vk.com/"+e,r=browser.mi?1500:300;browser.safari&&(r=browser.ios>=12?2800:300);var a=Date.now(),i=setTimeout((function(){t._openAppInProgress=!1,Date.now()-a>r+200||!document.hasFocus()?t.successHandler({result:!0}):(nav.hard_go("https://vk.cc/dl"),t.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.NATIVE_APP_IS_NOT_INSTALLED}))}),r);if(window.addEventListener("blur",(function e(){clearTimeout(i),t._openAppInProgress=!1,window.removeEventListener("blur",e)})),browser.ios){window.addEventListener("focus",(function e(){window.removeEventListener("focus",e)}))}return this._openAppInProgress=!0,nav.hard_go(n),!1},t}(i.default),De=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppLocationChanged",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.successHandler({location:e.location})},Object(y.default)(t,[{key:"successDescriptor",get:function(){return""+this.params.handlerName}}]),t}(i.default),Oe=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppClose",n}Object(a.default)(t,e);var n=t.prototype;return n.closeMiniAppPage=function(){var e=-1,t=window.history.length;if(cur.VKApp){if(2===cur.VKApp.vkMiniAppsHistoryLength&&!document.referrer||1===cur.VKApp.vkMiniAppsHistoryLength)return void nav.go(Object(h.isMvk)()?"/services":"/feed");cur.VKApp.vkMiniAppsHistoryLength!==t&&(e=cur.VKApp.vkMiniAppsHistoryLength-t-1)}e<=1?nav.go(Object(h.isMvk)()?"/services":"/feed"):window.history.go(e)},n.actionHandler=function(e){Object(h.isMvk)()?window.opener?(window.opener.postMessage({type:this.params.handlerName,name:this.successDescriptor,eventData:{status:e.status,payload:e.payload}},"*"),window.close()):this.closeMiniAppPage():cur.openerAppsQueue&&cur.openerAppsQueue.length>0&&Object.keys(cur.vkAppQueue).length>1?(cur.miniAppOpener&&cur.miniAppOpener.sendIframeMessage(this.successDescriptor,{status:e.status,payload:e.payload}),WkView.hide()):this.closeMiniAppPage()},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.checkParams(e,[{param:"status",type:"string",extraChecks:[{check:function(e){return d.CLOSE_STATUS.includes(e)},error:function(e){return'Param "'+e+'" should be "success" or "failed"'}}]},{param:"payload",type:"object",isRequired:!1}])&&this.actionHandler(e)},t}(i.default),we=n("RHh3"),Ee=n("bKAG"),ye=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).params.handlerName="VKWebAppShowStoryBox",t.callApi=!1,t.useUI=!1,t}Object(a.default)(t,e);var n=t.prototype;return n.loadFinishHandler=function(e){this.callback({type:this.loadFinishDescriptor,data:e},this.params.handlerName)},t.isValidUrl=function(e){try{return!!new URL(e)}catch(e){return!1}},n.initStoryPublisher=function(e){var t=this;window.StoryPublisher&&window.StoryPublisher.init(e,(function(){return t.successHandler({result:!0})}),(function(e,n){if(!e){var r={code:d.ERROR_CODES.USER_DENIED};return n&&n.error&&n.error.message&&(r.reason=n.error.message),t.errorHandler(r)}if(n&&n.story){var a=n.story,i=a.owner_id,o=a.id;return t.loadFinishHandler({story_owner_id:i,story_id:o})}}))},Object(y.default)(t,[{key:"loadFinishDescriptor",get:function(){return this.params.handlerName+"LoadFinish"}}]),t}(i.default),ke=function(e){function t(){return e.apply(this,arguments)||this}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=this;if(!Object(T.partConfigEnabled)("web2_story_box_enabled"))return this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM});this.validateParams(e)&&window.stManager.add([window.jsc("web/story_publisher.js")]).then((function(){t.initStoryPublisher(Object(r.default)({entrypoint:Ee.StoryEntryPoint.MINI_APP,miniAppId:Number(t.app.appId),photoUrl:e.url?e.url:e.blob,stickers:e.stickers,attachment:e.attachment,serviceInfo:e.service_info},e))})).catch((function(){return t.errorHandler({code:d.ERROR_CODES.UNKNOWN})}))},n.validateParams=function(e){return!!this.checkFields(e)&&(!(e.attachment&&!this.checkAttachment(e.attachment))&&(!(e.stickers&&!this.checkStickers(e.stickers))&&!(e.service_info&&!this.checkServiceInfo(e.service_info))))},n.checkFields=function(e){return this.checkParams(e,[{param:"background_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return"image"===e},error:function(e){return'Param "'+e+'" should be a image'}}]},{param:"url",type:"string",isRequired:!e.blob,extraChecks:[{check:function(e){return ye.isValidUrl(e)},error:function(e){return'Param "'+e+'" incorrect'}}]},{param:"blob",type:"string",isRequired:!e.url},{param:"attachment",type:"object"},{param:"stickers",type:"object",extraChecks:[{check:function(e){return Array.isArray(e)},error:function(e){return'Param "'+e+'" should be array'}}]},{param:"service_info",type:"object"}])},n.checkAttachment=function(e){var t=["url","photo","video","audio"],n=["to_store","vote","more","book","order","enroll","fill","signup","buy","ticket","write","open","learn_more","view","go_to","contact","watch","play","install","read","to_memories_app"];return!!this.checkParams(e,[{param:"text",type:"string",isRequired:!0,extraChecks:[{check:function(e){return n.includes(e)},error:function(e){return'Param "'+e+'" should be a '+n.join(", ")}}]},{param:"type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return t.includes(e)},error:function(e){return'Param "'+e+'" should be a '+t.join(", ")}}]}])&&("url"===e.type?this.checkParams(e,[{param:"url",type:"string",isRequired:!0,extraChecks:[{check:function(e){return ye.isValidUrl(e)},error:function(e){return'Param "'+e+'" incorrect'}}]}]):this.checkParams(e,[{param:"owner_id",type:"number",isRequired:!0},{param:"id",type:"number",isRequired:!0},{param:"access_key",type:"string"}]))},n.checkStickers=function(e){var t=this;return!e.length||e.every((function(e){return!!t.checkStickerContainer(e)&&!!t.checkSticker(e.sticker_type,e.sticker)}))},n.checkServiceInfo=function(e){return this.checkParams(e,[{param:"open_text_editor",type:"boolean"}])},n.checkStickerContainer=function(e){return this.checkParams(e,[{param:"sticker_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return["native","renderable"].includes(e)},error:function(e){return'Param "'+e+'" should be a native or renderable'}}]},{param:"sticker",type:"object",isRequired:!0}])},n.checkSticker=function(e,t){return"renderable"===e?this.checkRenderableSticker(t):"native"===e?this.checkNativeSticker(t):(this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "sticker_type" should be a native or renderable'}),!1)},n.checkNativeSticker=function(e){return!!this.checkParams(e,[{param:"action_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return["text","sticker"].includes(e)},error:function(e){return'Param "'+e+'" should be a text or sticker'}}]},{param:"action",type:"object",isRequired:!0},{param:"transform",type:"object",isRequired:!1}])&&(!!this.checkAction(e.action_type,e.action)&&!(e.transform&&!this.checkTransform(e.transform)))},n.checkAction=function(e,t){return"text"===e?this.checkParams(t,[{param:"text",type:"string",isRequired:!0},{param:"style",type:"string"},{param:"background_style",type:"string"},{param:"alignment",type:"string"},{param:"selection_color",type:"string"}]):"sticker"===e?this.checkParams(t,[{param:"sticker_id",type:"number",isRequired:!0},{param:"pack_id",type:"number"}]):"link"===e?this.checkParams(t,[{param:"link",type:"string",isRequired:!0},{param:"tooltip_text_key",type:"string"}]):"app"===e?this.checkParams(t,[{param:"app_id",type:"number",isRequired:!0},{param:"app_context",type:"string"}]):(this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "action_type" should be a sticker or text'}),!1)},n.checkTransform=function(e){var t=["left_top","left_center","left_bottom","center_top","center","center_bottom","right_top","right_center","right_bottom"];return this.checkParams(e,[{param:"rotation",type:"number",isRequired:!1},{param:"relation_width",type:"number",isRequired:!1},{param:"translation_x",type:"number",isRequired:!1},{param:"translation_y",type:"number",isRequired:!1},{param:"gravity",type:"string",isRequired:!1,extraChecks:[{check:function(e){return t.includes(e)},error:function(e){return'Param "'+e+'" should be '+t.join(", ")}}]}])},n.checkRenderableSticker=function(e){return!!this.checkParams(e,[{param:"content_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return"image"===e},error:function(e){return'Param "'+e+'" should be a image'}}]},{param:"url",type:"string",isRequired:!e.blob,extraChecks:[{check:function(e){return ye.isValidUrl(e)},error:function(e){return'Param "'+e+'" incorrect'}}]},{param:"blob",type:"string",isRequired:!e.url},{param:"transform",type:"object",isRequired:!1},{param:"clickable_zones",type:"object",isRequired:!1,extraChecks:[{check:function(e){return Array.isArray(e)},error:function(e){return'Param "'+e+'" should be array'}}]}])&&(!(e.transform&&!this.checkTransform(e.transform))&&!(e.clickable_zones&&!this.checkClickableZones(e.clickable_zones)))},n.checkClickableZones=function(e){var t=this;return e.every((function(n){return!!t.checkClickableZone(n)&&(!!t.checkAction(n.action_type,n.action)&&(!e.clickable_area||(4!==e.clickable_area.length?(t.errorHandler({code:d.ERROR_CODES.UNKNOWN}),!1):e.clickable_area.every((function(e){return t.checkParams(e,[{param:"x",type:"number",isRequired:!0},{param:"y",type:"number",isRequired:!0}])})))))}))},n.checkClickableZone=function(e){return this.checkParams(e,[{param:"action_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return["link","app"].includes(e)},error:function(e){return'Param "'+e+'" should be a link or app'}}]},{param:"action",type:"object",isRequired:!0},{param:"clickable_area",type:"object",extraChecks:[{check:function(e){return Array.isArray(e)},error:function(e){return'Param "'+e+'" should be array'}}]}])},t}(ye),Se=function(e){function t(){return e.apply(this,arguments)||this}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=this;if(!Object(T.partConfigEnabled)("bridge_mobile_story_box_enabled"))return this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM});var n=this.getEventHashes(),a=n.storyUploadUrlHash,i=n.storySaveHash;this.validateParams(e).then((function(){t.initStoryPublisher(Object(r.default)({entrypoint:Ee.StoryEntryPoint.MINI_APP,miniAppId:Number(t.app.appId),miniAppName:t.app.vkApp.options.app_name,storyUploadUrlHash:a,storySaveHash:i,maxVideoDuration:Ee.MAX_STORY_VIDEO_DURATION,closeAfterError:!0},e))})).catch((function(e){e&&t.errorHandler(e)}))},n.validateParams=function(e){return this.checkFields(e)},n.checkFields=function(e){var t=this;return new Promise((function(n,r){var a={check:function(e){return ye.isValidUrl(e)},error:function(e){return'Param "'+e+'" incorrect'}};return t.checkParams(e,[{param:"background_type",type:"string",isRequired:!0,extraChecks:[{check:function(e){return"image"===e||"video"===e},error:function(e){return'Param "'+e+'" should be a image or video'}}]},{param:"url",type:"string",isRequired:!e.blob,extraChecks:[a]},{param:"blob",type:"string",isRequired:!e.url,extraChecks:[{check:function(){return"image"===e.background_type},error:function(e){return'Param "'+e+'" available only for image background_type'}},a]}])?n():r()}))},t}(ye),Ce=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppSubscribeStoryApp",n.callApi=!1,n.useUI=!1,n}Object(a.default)(t,e);var n=t.prototype;return n.actionHandler=function(e){var t=this;if(this.validateParams(e)){var n={act:"subscribe_user_to_app",story_owner_id:e.story_owner_id,story_id:e.story_id,access_key:e.access_key,sticker_id:e.sticker_id,hash:this.getEventHash(),app_id:this.app.appId},r=function(n){t.handleResponse(n,e,(function(e){return t.successHandler(e)}))},a=function(e){t.errorHandler(e)};Object(h.isMvk)()?window.ajax.post("stories.php",n,{onDone:function(e,t){return t?a(t):r(e)}}):window.ajax.post("al_stories.php",n,{onDone:r,onFail:a})}},n.validateParams=function(e){return this.checkParams(e,[{param:"story_owner_id",type:"number",isRequired:!0},{param:"story_id",type:"number",isRequired:!0},{param:"sticker_id",type:"number",isRequired:!0},{access_key:"string",type:"string",isRequired:!1}])},t}(i.default),Re=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetPersonalCard",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),Ie=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenContacts",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),je=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppOpenCodeReader",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(){this.errorHandler({code:d.ERROR_CODES.CUSTOM,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM},this.callback)},t}(i.default),Pe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).params.handlerName="VKWebAppShowSubscriptionBox",t}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){var t=this;Object(h.isMvk)()?this.errorHandler({error_type:d.ERROR_TYPES.CLIENT,error_code:d.ERROR_CODES.INVALID_PARAMS,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM}):e.hasOwnProperty("action")?~["create","resume","cancel"].indexOf(e.action)?"create"!==e.action||e.hasOwnProperty("item")?"resume"!==e.action&&"cancel"!==e.action||e.hasOwnProperty("subscription_id")?(window.cur.app.registerVkBridgeCallback("onSubscriptionCancel",(function(){t.errorHandler({reason:"User denied",code:d.ERROR_CODES.USER_DENIED})})),window.cur.app.registerVkBridgeCallback("onSubscriptionSuccess",(function(e){t.successHandler({success:!0,subscriptionId:e})})),window.cur.app.registerVkBridgeCallback("onSubscriptionFail",(function(e){t.errorHandler({reason:"Subscription error",code:e})})),window.cur.app.funcs.showSubscriptionBox(e.action,e,this.successHandler.bind(this),this.errorHandler.bind(this))):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "subscription_id"'}):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "item"'}):this.errorHandler({code:d.ERROR_CODES.INVALID_PARAMS,reason:'Param "action" must be one of: create, resume or cancel'}):this.errorHandler({code:d.ERROR_CODES.MISSING_PARAM,reason:'Missing required param "action"'})},t}(i.default),Te=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).params.handlerName="VKWebAppShowInstallPushBox",t}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){var t=this;Object(h.isMvk)()?this.errorHandler({error_type:d.ERROR_TYPES.CLIENT,error_code:d.ERROR_CODES.INVALID_PARAMS,reason:d.ERROR_REASONS.UNSUPPORTED_PLATFORM}):(window.cur.app.registerVkBridgeCallback("onInstallPushSuccess",(function(){t.successHandler({success:!0})})),window.cur.app.registerVkBridgeCallback("onInstallPushCancel",(function(){t.errorHandler({reason:"User denied",code:d.ERROR_CODES.USER_DENIED})})),window.cur.app.registerVkBridgeCallback("onInstallPushFail",(function(e){t.errorHandler({reason:e})})),window.cur.app.funcs.showInstallPushBox(this.successHandler.bind(this),this.errorHandler.bind(this)))},t}(i.default),Ne=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppGetGroupInfo",n.params.modal={buttons:[{title:getLang("apps_connect_modal_btn_cancel"),type:"deny"},{title:getLang("apps_connect_modal_btn_ok"),type:"success"}],title:getLang("apps_connect_modal_messages_request_group_info"),text:getLang("apps_connect_modal_messages_request_group_info_text")},n.callApi=!0,n.useUI=!0,n}Object(a.default)(t,e);var n=t.prototype;return n.launchUI=function(e){var t=e.groupPhoto,n=e.groupName;t&&(this.params.modal.pic=t),n&&(this.params.modal.title=this.params.modal.title+" "+n),this.createDenyUIAction(),this.createAllowUIAction(e),this.modal=new u.default(Object(r.default)({},this.params.modal)),c.default.push(this.modal)},n.handler=function(e,t,n){this.setData(e,t),this.callback=n,this.validateParams(e)&&this.loadIntroData(e)},n.validateParams=function(e){return this.checkParams(e,[{param:"group_id",type:"number",isRequired:!0,extraChecks:[{check:function(e){return e>0},error:function(e){return'Param "'+e+'" should be a positive number'}}]}])},n.loadIntroData=function(e){var t=this;this.request=Object(r.default)({},e);var n=e.group_id;ajax.post("apps.php",{act:"handle_vk_connect_event",hash:cur.app.options[d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"]+"_hash"],event:d.VK_CONNECT_EVENTS[this.params.handlerName+"Preload"],app_id:this.app.appId,group_id:n},{onDone:function(n){if(n.hasOwnProperty("error"))t.errorHandler(n.error);else try{var r=JSON.parse(n);t.checkIntroData(r,e)}catch(e){t.errorHandler(e)}},onFail:function(e){return t.errorHandler(e),!0}})},n.checkIntroData=function(e,t){if(e.hasOwnProperty("error"))this.errorHandler({code:d.ERROR_CODES.ACCESS_DENIED,reason:d.ERROR_REASONS.USER_NOT_A_PRIVATE_GROUP_MEMBER,error_type:d.ERROR_TYPES.CLIENT});else{if(!e.hasOwnProperty("result"))return this.successHandler(e);var n=e.photo_100,a=e.name;this.launchUI(Object(r.default)({},t,{groupPhoto:n,groupName:a}))}},t}(i.default),Me=function(e){function t(t){var n;return(n=e.call(this,t)||this).params.handlerName="VKWebAppFlashGetInfo",n}return Object(a.default)(t,e),t.prototype.actionHandler=function(e){this.successHandler({is_available:!1})},t}(i.default),xe={VKWebAppInit:o,VKWebAppGetCommunityAuthToken:p,VKWebAppGetCommunityToken:_,VKWebAppGetFriends:me,VKWebAppAddToCommunity:f,VKWebAppAddToHomeScreenInfo:m,VKWebAppCopyText:v,VKWebAppAddToFavorites:de,VKWebAppAddToMenu:fe,VKWebAppGetUserInfo:g,VKWebAppSetLocation:D,VKWebAppGetClientVersion:O,VKWebAppGetPhoneNumber:w,VKWebAppGetEmail:E,VKWebAppOpenArticle:J,VKWebAppGetGeodata:k,VKWebAppOpenQR:S,VKWebAppSetViewSettings:R,VKWebAppSetTitle:I,VKWebAppGetAuthToken:j,VKWebAppCallAPIMethod:N,VKWebAppJoinGroup:x,VKWebAppLeaveGroup:L,VKWebAppAllowMessagesFromGroup:B,VKWebAppDenyNotifications:F,VKWebAppAllowNotifications:V,VKWebAppOpenPayForm:H,VKWebAppOpenApp:U,VKWebAppShare:W,VKWebAppShowNewPostBox:K,VKWebAppShowWallPostBox:q,VKWebAppSendToClient:C,VKWebAppOpenArticleEditor:oe,VKWebAppScroll:z,VKWebAppStorageGet:le,VKWebAppStorageGetKeys:ce,VKWebAppStorageSet:ue,VKWebAppResizeWindow:Q,VKWebAppSendPayload:Y,VKWebAppUpdateConfig:Z,VKWebAppTapticImpactOccurred:X,VKWebAppTapticNotificationOccurred:ee,VKWebAppTapticSelectionChanged:te,VKWebAppShowImages:ne,VKWebAppShowOrderBox:re.default,VKWebAppShowLeaderBoardBox:ae,VKWebAppShowInviteBox:ie,VKWebAppShowRequestBox:se,VKWebAppShowCommunityWidgetPreviewBox:ve,VKWebAppOpenInNativeApp:Ae,VKWebAppLocationChanged:De,VKWebAppClose:Oe,VKWebAppShowStoryBox:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(h.isMvk)()?Object(we.default)(Se,t):Object(we.default)(ke,t)},VKWebAppSubscribeStoryApp:Ce,VKWebAppGetPersonalCard:Re,VKWebAppOpenContacts:Ie,VKWebAppOpenCodeReader:je,VKWebAppShowSubscriptionBox:Pe,VKWebAppShowInstallPushBox:Te,VKWebAppGetGroupInfo:Ne,VKWebAppFlashGetInfo:Me},Le=function(e,t){var n;if(e.frameId){var a=ge(e.frameId);a&&(n=a.querySelector("iframe"))}else t&&(n=t.querySelector("iframe"));n&&n.contentWindow.postMessage(Object(r.default)({},e),"*")},Be=function(e,t){if(xe[e.handler]){var n=new xe[e.handler]({request_id:e.params.request_id}),a=function(e){ge(t.containerId)&&e&&Le(e,ge(t.containerId))};if(Object(T.partConfigEnabled)("mini_apps_web_flood_control")){if(t.isRequestsLimitReached())return n.callback=a,void n.errorHandler({code:d.ERROR_CODES.REQUESTS_LIMIT_REACHED});t.eventQueue.push({eventData:e,timeInMs:Date.now()})}n.handler(Object(r.default)({},e.params,{containerId:t.containerId,pic:e.pic}),t,a)}}},myok:function(e,t,n){"use strict";n.r(t),n.d(t,"setLoading",(function(){return _})),n.d(t,"setDisabled",(function(){return p}));var r=n("TYsd"),a=n("BoyB"),i={className:"Btn",setLoading:_,setDisabled:p};t.default=i,i._onClick=d;var o="Btn_loading",s="Btn_theme_secondary",c="Btn__loader",u="Btn__loader--white",l={loader:"."+c};function d(e,t,n){e.preventDefault(),r.default.handle(n,{$btn:t})}function p(e,t){void 0===t&&(t=!0),e.disabled=t}function _(e,t,n){if(void 0===n&&(n=""),e){var r=e.classList.contains(o);if(t){if(r)return;var i=e.classList.contains(s),d=e.classList.contains(u);!n&&i&&(n="white");var p=!1;"spinner"===n&&(p=!0,n=!1);var _=Object(a.default)({mix:c,white:"white"===n||d,large:!0,spinner:p});e.classList.add(o),e.insertAdjacentHTML("afterbegin",_)}else{if(!r)return;var h=e.$(l.loader);e.classList.remove(o),h.remove()}}}},p5n7:function(e,t,n){"use strict";n.r(t),n.d(t,"getValue",(function(){return h})),n.d(t,"setPrefix",(function(){return f})),n.d(t,"onBlur",(function(){return A})),n.d(t,"onFocus",(function(){return v})),n.d(t,"getNative",(function(){return m})),n.d(t,"filter",(function(){return b})),n.d(t,"onChange",(function(){return D}));var r=n("z9sQ"),a=n("fdw3"),i=n("TYsd"),o=function(e){void 0===e&&(e={});var t=e.style||[],n=e.class||e.mix,o=e.prefix,s=e.postfix,c=function(e){var t=[];Object(a.isArray)(e.on_key_down)?(e.on_key_down.push("event"),t=e.on_key_down):e.on_key_down&&(t=[e.on_key_down,"event"]);var n=e.on_key_press;return{class:"TextInput__native",id:e.id,tag:"input",type:e.type,name:e.name,value:e.value,spellcheck:e.spellcheck+"",placeholder:i.default.wrap(e.placeholder),autocapitalize:!1===e.autocapitalize?"off":null,autocomplete:!1===e.autocomplete?"off":e.autocomplete,tabindex:e.tabindex,readonly:e.readonly,disabled:e.disabled,oninput:Object(a.concatValues)("TextInput.onChange(event)",e.on_change?"; "+(i.default.isAttrHandler("oninput",e.on_change)?i.default.prepareHandler(e.on_change):e.on_change):""),onkeydown:t,onkeypress:n,onblur:Object(a.concatValues)("TextInput.onBlur(event, this)",e.onblur?"; "+(i.default.isAttrHandler("onblur",e.onblur)?i.default.prepareHandler(e.onblur):e.onblur):""),onfocus:Object(a.concatValues)("TextInput.onFocus(event, this)",e.onfocus?"; "+(i.default.isAttrHandler("onfocus",e.onfocus)?i.default.prepareHandler(e.onfocus):e.onfocus):""),autofocus:e.autofocus,maxlength:e.maxlength,pattern:e.pattern,required:e.required,inputmode:e.inputmode,"aria-describedby":e["aria-describedby"]}}(e),u=e.error;u&&(t.error=!0);var l=!(o||s||"string"==typeof u);return{role:"presentational",class:[r.default.class("TextInput",{style_stretch:t.stretch,prefixed:!!o,hidden:"hidden"===e.type,error:t.error,native:l,disabled:!!e.disabled||!!e.readonly}),n],tag:"label",onclick:e.on_click,inner:[{class:"TextInput__content",inner:l?c:[o?{class:r.default.class("TextInput__prefix",{rightPadding:o.with_right_padding,gray:o.gray}),inner:o.text}:null,{class:"TextInput__nativeWrap",inner:c},s?{class:"TextInput__postfix",inner:s.text}:null]},"string"==typeof u?{inner:[u],class:"TextInput__errorLabel",tag:"span"}:null]}};var s=n("UxAg"),c=n("zvhO"),u=n("OcsD"),l=n("CQvH");Object.assign(o,{setPrefix:f,getValue:h,filter:b,onFocus:v,onBlur:A,onChange:D});var d=".TextInput",p=".TextInput__native",_=".TextInput__prefix";function h(e){return e.$(p).value}function f(e,t){e.$(_).innerText=t}function m(e){return Object(s.$)(p,e)}function b(e,t,n){switch(e){case"number":var r=Object(u.val)(n)+String.fromCharCode(t.which);Object(c.isNumber)(parseInt(r))||Object(u.cancelEvent)(t),Object(u.val)(n,Object(u.val)(n).split("").filter((function(e){return Object(c.isNumber)(+e)})).join(""))}}function v(e,t){var n=t.closest(d);setTimeout((function(){n.classList.add("TextInput--focused")}))}function g(e){var t=e.target.closest(d);Object(u.removeEvent)(e.target,"blur",g),t&&t.classList.remove("TextInput--focused")}function A(e,t){var n,r=t.closest(d),a=null==(n=e.relatedTarget)?void 0:n.closest(d),i=Object(s.$)(p,r);r!==a||Object(l.isTabbing)()?(setTimeout((function(){var e;"BUTTON"===(null==(e=document.activeElement)?void 0:e.tagName)&&r.contains(document.activeElement)&&Object(u.addEvent)(document.activeElement,"blur",g)})),a!==r&&setTimeout((function(){r.classList.remove("TextInput--focused")}))):i.focus()}function D(e){var t=e.target.value;e.target.closest(d).classList.toggle("TextInput--notEmpty",!!t)}t.default=o;window.TextInput=o},p8d5:function(e,t,n){"use strict";n.r(t),n.d(t,"ORIENTATION_LANDSCAPE",(function(){return i})),n.d(t,"ORIENTATION_PORTRAIT",(function(){return o})),n.d(t,"getCurrentOrientation",(function(){return s})),n.d(t,"lockOrientation",(function(){return c})),n.d(t,"unlockOrientation",(function(){return u})),n.d(t,"onOrientationChanged",(function(){return r}));var r,a=n("OcsD"),i="landscape",o="portrait";function s(){if(window.screen&&window.screen.orientation)switch(window.screen.orientation.type){case"landscape-primary":case"landscape-secondary":return i;case"portrait-primary":case"portrait-secondary":return o;default:if(window.orientation)return 90===Math.abs(window.orientation)?i:o}return window.innerWidth>window.innerHeight?i:o}function c(e){return"orientation"in window.screen&&"lock"in window.screen.orientation?Promise.resolve(window.screen.orientation.lock(e)):Promise.reject("Unsupported")}function u(){"orientation"in window.screen&&"unlock"in window.screen.orientation&&window.screen.orientation.unlock()}window._onOrientationChanged?r=window._onOrientationChanged:(r=Object(a.se)(),window._onOrientationChanged=r,"orientation"in window.screen?window.screen.orientation.onchange=r:addEvent(window,"orientationchange",(function(e){window.browser&&window.browser.iphone?setTimeout((function(){r(e)}),100):r(e)})))},qHA9:function(e,t,n){"use strict";n.r(t),n.d(t,"MENTION_REGEXP",(function(){return u})),n.d(t,"MENTION_DOMAIN_REGEXP",(function(){return l})),n.d(t,"MENTION_CLIENTSIDE_REGEXP",(function(){return d})),n.d(t,"UNKNOWN_ERROR",(function(){return p})),n.d(t,"STICKER_HEIGHT",(function(){return _})),n.d(t,"isContactPeer",(function(){return h})),n.d(t,"isCommunityPeer",(function(){return f})),n.d(t,"isChatPeer",(function(){return m})),n.d(t,"isUser",(function(){return b})),n.d(t,"formatTime",(function(){return v})),n.d(t,"wrapMention",(function(){return A})),n.d(t,"wrapCommunityUrl",(function(){return D})),n.d(t,"sendDataToMessage",(function(){return O})),n.d(t,"getMsgSendId",(function(){return w})),n.d(t,"mailRequest",(function(){return E})),n.d(t,"getStickerSize",(function(){return y})),n.d(t,"prepareKeyboard",(function(){return k})),n.d(t,"isForwardedMessageId",(function(){return S})),n.d(t,"isNewMailPage",(function(){return C}));var r=n("wTgh");n.d(t,"wrapLinks",(function(){return r.wrapLinks}));var a,i=n("wMVj"),o=n("9M99"),s=n("OcsD"),c=n("jE6c"),u=/\[((id|club)\d+)\|([\S\s]+?)]/g,l=/\[((id|club)\d+)\|@([\S\s]+?)]/g,d=/\[([^\$]+?)\|([^\$]+?)\]/g,p=10,_=128;function h(e){return e>19e8&&e<=2e9}function f(e){return e>-1e9&&e<0}function m(e){return e>2e9}function b(e){return e>0&&e<=19e8}function v(e,t){void 0===t&&(t=0);var n=new Date(1e3*e),r=n.getTimezoneOffset(),a=-t/60-180;if(r!==a){var i=60*(a-r)*1e3;n.setTime(1e3*e-i)}var o=n.getHours(),s=n.getMinutes();return o+":"+(s<10?"0":"")+s}function g(e,t,n){return'<a href="/'+Object(c.htsc)(t)+'" class="mem_link">'+Object(c.htsc)(n)+"</a>"}function A(e,t){return t?e.replace(d,(function(e,t,n){return g(0,t,n)})):e.replace(u,(function(e,t,n,r){return g(0,t,r)}))}function D(e){var t=i.default.getQuery("community");return t&&(e+="&community="+t),e}function O(e,t){var n,i,s=store.mail,c=s.cur,u=s.members,l=Date.now()/1e3,d=v(l,c.timeShift),p=e.message||"";"send"!==e.act&&e.id&&(n=store.mail.msgs[e.id]),a||(a=document.createElement("div")),a.textContent=p,p=a.innerHTML,a.textContent="";var h,f={};if(e.media&&0===e.media.indexOf("sticker")){f.sticker=1;var m=+e.media.replace("sticker","");m&&(h={id:m,url:Stickers.getStickerUrl(m,y()),height:_})}else for(var b,g=1;b=e["attach"+g+"_type"];g++)f[b]?f[b]+=1:f[b]=1;i=e.attached_messages?(e.attached_messages+"").split(";"):e.mail_edit_attach_fwd&&n?n.forwards.concat():[];var D=!!e.has_reply,O="send"===e.act?"send"+e.random_id:"edit"+e.id,w=p,E=w=w.replace(/(@|\*)(\S+)(?: +\(([^\n]+?)\))?/g,(function(e,t,n,r){r||(r=t+n);var a=0,i=/^(club|public|event)([\d]+)$/.exec(n);/^id[\d]+$/.test(n)?a=parseInt(n.substr(2)):i&&(a=parseInt(i[2]));for(var o="id",s=Object.keys(u),c=0,l=s.length;c<l;c++){var d=s[c];if(u[d]&&u[d].domain===n){a=d;break}}return"-"===a[0]&&(a=a.slice(1),o="club"),a?"["+o+a+"|"+r+"]":e}));E=A(E=Object(r.wrapLinks)(E),!0),E=Object(o.emojiToHTML)(E);var k={id:"send"===e.act?O:e.id,sendId:O,peerId:"send"===e.act?e.to:e.peerId,authorId:c.viewerId,adminId:c.groupId?c.userId:void 0,ts:l,date:d,dateShort:d,text:E,textInput:p,body:w,isUnread:!n||n.isUnread,isOut:!0,edited:"send"!==e.act,canEdit:!1,attaches:f,forwards:D?[]:i,hasReply:D,reply:D?i[0]:void 0,pending:!t,failed:!!t,attachesLoading:!!Object.keys(f).length};return c.groupId&&(k.adminName=lang.mobile_mail_you,k.adminUrl=u[c.userId].url),h&&(k.sticker=h),k}function w(e){return e.edited?"edit"+e.id:"send"+e.randomId}function E(e,t){return new Promise((function(n,r){Object(s.ajaxRequest)(e,t,(function(e){e.error?r({type:"server",code:e.code||0,message:e.message||""}):n(e.result)}),(function(e,t,n){var a=null,i="unknown",o=0;if(n instanceof XMLHttpRequest){var s=n;0===s.status?i="network":(i="server_status",o=s.status)}else 0===e&&null==t&&null==n?i="response_parsing":e===ajax.RESPONSE_CAPTCHA?(i="captcha",a=n):i="unknown";r({type:i,code:o,message:"",data:a})}))}))}function y(){return hasClass("x2",document.body)?2*_:_}function k(e){var t=e.keyboard,n=e.authorId,r=e.msgId;if(t.buttons&&t.buttons.length){t=Object.assign(t,{author_id:n,chat_local_id:r});var a=document.createElement("div");t.buttons.forEach((function(e){e.forEach((function(e){var t=e.action.label;a.textContent=t;var n=a.innerHTML;e.action.label=Object(o.emojiToHTML)(n),e.action.rawLabel=t}))})),a=null}else t=null;return t}function S(e){return!isFinite(e)&&("string"!=typeof e||"~"!==e[0])}function C(e,t){if(void 0===e&&(e=""),void 0===t&&(t=""),!window.isNewMail)return!1;if(0===e.indexOf("/write"))return!0;"string"==typeof t&&(t=Object(s.qs2obj)("?"===t[0]?t.slice(1):t));var n=t,r=n.act,a=n.m;return"/mail"===e&&"add_to_chat"!==r&&"flush_history"!==r&&"info"!==r&&"unpin"!==r&&"edit_chat"!==r&&"change_chat_name"!==r&&"leave_chat"!==r&&"new_chat"!==r&&"chat_preview"!==r&&"return_to_chat"!==r&&"show_medias"!==r&&"toggle_community_block"!==r&&"community_toggle_important"!==r&&"ban_user"!==r&&"add_user"!==r&&"community_mark_answered"!==r&&"invite_link"!==r&&"reset_link"!==r&&"send"!==r&&"show_peer_profile"!==r&&"toggle_peer_profile_tags"!==r&&"edit_peer_profile_tags"!==r&&"edit_peer_profile_note"!==r&&70!=a&&71!=a&&76!=a&&784!=a&&783!=a&&786!=a&&785!=a&&787!=a}},"r/ag":function(e,t,n){"use strict";n.r(t),n.d(t,"POPUP_DISAPPEAR_TIME",(function(){return l})),n.d(t,"POPUP_NAV_PREFIX",(function(){return u}));var r=n("Po+v"),a=n("vWwi"),i=n("1By4"),o=n("UxAg"),s=n("j80l"),c=n("OcsD"),u="pop_",l=200;Object.assign(r.default,{open:function(e,t,n){void 0===n&&(n={});var r=n,i=r.hash,o=r.oncloseCallback,s=r.withoutCloning;if(w(e),b=Boolean(n.forceScrollDisable),t){if(!s){var l=e;(e=l.cloneNode(!0)).original=l}e.appendedToBody=!0,e.withoutCloning=s,document.body.appendChild(e)}e.classList.add(p);var d=e.$(m.scroll);Object(a.disableBodyScroll)(e,{forceScrollDisable:b}),o&&g.push([e,o]);if(d){if(D(e,d),e.onResizeHandler=function(){D(e,d)},Object(c.addEvent)(window,"resize",e.onResizeHandler),!window.MutationObserver)return e;e.scrollContentObserver=new MutationObserver(e.onResizeHandler),e.scrollContentObserver.observe(d,{childList:!0,subtree:!0})}if(i){var _="#"+u+i,h=nav.cur.split("#")[0];nav.go(h+_,!1,{push_only:!0}),v[_]=e}return e},close:O});r.default;r.default._onOverlayClick=A;var d="Popup",p="Popup_open",_="Popup_hasScroll",h="ScrollView",f="Popup--closing",m={open:"."+p,popup:"."+d,wrap:"."+"Popup__wrap",content:"."+"Popup__content",scroll:".Popup__scroll",header:".Popup__header",footer:".Popup__footer"},b=!1,v={},g=[];function A(e,t,n){var r=e.closest(m.popup);Object(c.isFunction)(t)?t({$popup:r}):t&&i.default.handle(t,{$popup:r}),n&&O(r)}function D(e,t){var n=e.$(m.header),r=e.$(m.footer);t.scrollHeight-6>t.offsetHeight?(Object(c.addClass)(e,_),Object(c.addClass)(t,h),ContentScrollView.restore()):(Object(c.removeClass)(e,_),Object(c.removeClass)(t,h),t.scrollTop=0);var a=Object(c.getCh)(),i=0,o=0;n&&(i=n.offsetHeight),r&&(o=r.offsetHeight);var s=Math.min(a-i-o-100,420);Object(c.setStyle)(t,"max-height",s+"px")}function O(e,t){void 0===t&&(t={});var n=t,r=n.smooth,i=n.velocity,l=n.lastY;if(e&&!e.classList.contains(d)&&(e=e.closest(m.popup)),e||(e=Object(o.$)(m.open)),e){var _=Object(o.$)(m.wrap,e),h=Object(o.$)(m.content,e);if(r&&i&&l){var v=Object(c.getH)(h),A=(v-l)*i.y;return A>=300&&(A=200),A=Math.max(150,Math.min(300,A)),c.setStyle.animate(_,"transform",{duration:A,func:"cubic-bezier(0.0, 0.0, 0.2, 1)"}),c.setStyle.transform(_,1,[0,v+"px"]),e.classList.add(f),setTimeout((function(){O(e,{onClose:t.onClose})}),1.1*A)}if(r){e.classList.add(f);var D=Object(c.getH)(h);return c.setStyle.transform(_,1,[0,D+"px"]),setTimeout((function(){O(e,{onClose:t.onClose})}),200*1.1)}if(e.classList.remove(p),e.appendedToBody&&document.body.contains(e)&&Object(c.replace)(e,e.withoutCloning?e:e.original),e.classList.remove(f),c.setStyle.transform(_),Object(c.removeEvent)(window,"resize",e.onResizeHandler),e.scrollContentObserver&&e.scrollContentObserver.disconnect(),Object(o.$)(m.open)||Object(a.enableBodyScroll)(void 0,{forceScrollDisable:b}),nav.cur&&nav.cur.startsWith("#"+u)){var E=s.default.make(nav.path,qs2obj(nav.params));nav.set({nav:Object(c.extend)({},nav,{cur:nav.path,path:nav.path||"",push:E||""})})}var y,k=(y=e,(g.find((function(e){return e[0]===y}))||[])[1]);k&&(k(),w(e)),t.onClose&&t.onClose(),window.cur&&window.cur.app&&window.cur.app.frame&&window.cur.app.frame.focus()}}function w(e){var t=g.findIndex((function(t){return t[0]===e}));t>=0&&g.splice(t,1)}nav.onPopState&&nav.onPopState((function(){var e=v[nav.cur];e&&(O(e),delete v[nav.cur])})),window.Popup=r.default;t.default=r.default},rc7J:function(e,t,n){"use strict";n.r(t);var r=n("z9sQ");var a=function(e){void 0===e&&(e={});var t=r.default.class("AlbumInfoRow",{withoutBottomBorder:e.withoutBottomBorder},"--");return{inner:[{inner:[{src:e.avatar,alt:"avatar",tag:"img"}],class:"AlbumInfoRow__avatar",href:e.author_url,onclick:"cancelEvent(event); nav.go(this);",tag:"a"},{inner:[{inner:[e.title],class:"AlbumInfoRow__title",href:e.url,tag:"a"},{inner:[e.subtitle],class:"AlbumInfoRow__subtitle",tag:"div"}],class:"AlbumInfoRow__content",tag:"div"}],class:t,onclick:"nav.go('"+e.url+"')",tag:"div"}};t.default=a},t7Ww:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalMenuBtn",(function(){return c})),n.d(t,"ModalMenuContent",(function(){return _})),n.d(t,"ModalMenuIcon",(function(){return u})),n.d(t,"ModalMenuTitle",(function(){return d})),n.d(t,"ModalMenuBody",(function(){return l})),n.d(t,"ModalMenuHeaderCloseButton",(function(){return p}));var r=n("r/ag"),a=n("29dZ"),i=n("Y6JH"),o=n("fdw3"),s=n("c9MT");function c(e){var t=e.class?" "+e.class:"";return t=e.isBtn?Object(o.concatValues)(t," ModalMenu__customBtn"):Object(o.concatValues)(t," ModalMenu__item"),Object(a.default)({url:e.url,class:"ModalMenu__btn "+t,theme:e.theme?e.theme:"none",size:e.size?e.size:"",inner:e.inner,on_click:e.onclick,use_native_onclick:!0,attrs:e.attrs,"aria-label":e["aria-label"]||""})}function u(e){return{inner:[{inner:[e.inner],class:"ModalMenu__icon",tag:"div"}],class:"ModalMenu__iconWrapper",tag:"div"}}function l(e){return{inner:[e.inner],class:"ModalMenu__customBody",tag:"div"}}function d(e){return{inner:[e.inner],class:"ModalMenu__title",tag:"div"}}function p(e){return void 0===e&&(e={}),{inner:[Object(i.default)({icon:Object(s.getDismiss24Icon)()})],class:"ModalMenu__headerCloseButton",onClick:e.onClose?e.onClose:["ModalMenu.close","this"],"aria-label":Object(o.getLang)("mobile_close"),tag:"button"}}function _(e){return e.class+=" ModalMenuContent",e}t.default=function(e){var t=e.attached?"ModalMenu--attached":"",n=window.lang,i=[];if(e.title&&i.push({class:"ModalMenu__title",inner:e.title}),e.body&&i.push({class:"ModalMenu__body",inner:e.body}),Object(o.isArray)(e.items)){var s=e.items.map((function(e){return e}));i.push(s)}e.close&&i.push(Object(a.default)({class:"ModalMenu__btn ModalMenu__cancel",theme:"secondary",size:"large",inner:e.closeText?e.closeText:n.mobile_cancel,on_click:e.onClose?e.onClose:["ModalMenu.close","this"],use_native_onclick:!0}));var c=function(e){if(e&&e[0]&&e[0].inner&&e[0].inner.inner&&"ModalMenuHeader"===e[0].inner.inner[0].class)return!0;return!1}(i)?" ModalMenu--hasHeader":"";return Object(r.default)({id:e.id||"",class:"ModalMenu "+e.class+" "+t+" "+c,on_overlay_click_native:e.on_overlay_click?e.on_overlay_click:["ModalMenu.close","this"],content:i})}},tgcV:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=function(){return t(r)},r.onerror=function(){return n(new Error("Stylesheet load error for "+e))},document.head.appendChild(r)}))}function a(e){var t,n=(t=e,new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(r.response)},r.onerror=function(){n(r.response)},r.send()})));return n.then((function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})),n}var i;n.r(t),n.d(t,"addStatic",(function(){return p})),n.d(t,"preloadStaticForNavigation",(function(){return _})),n.d(t,"initStaticManager",(function(){return h}));var o=[];function s(e,t){var n=e;t&&(n+="?"+t);var r=new Promise((function(t,r){var a,i,o;a=n,i=function(n){n?(window.stManager.staticFiles[e]=null,r(n)):t()},(o=document.createElement("script")).src=a,o.onload=function(){return i(null,o)},o.onerror=function(){return i(new Error("Script load error for "+a))},document.head.appendChild(o)}));return window.stManager.staticFiles[e]=r,r}function c(e,t){var n=function(){if(void 0!==i)return i;try{var e=document.createElement("b");e.style.display="flex",i="flex"===e.style.display}catch(e){i=!1}return i}()?r:a,o=e;t&&(o+="?"+t);var s=n(o).catch((function(){return window.stManager.staticFiles[e]=null,Promise.resolve()}));return window.stManager.staticFiles[e]=s,s}function u(e){window.stManager.staticFiles[e]=Promise.resolve()}function l(){window.vk&&window.vk.stFiles&&window.stManager?(Object.keys(window.vk.stFiles).forEach((function(e){return u(e)})),window.vk.stFiles=[]):setTimeout(l,0)}function d(e){o[e]&&o[e]()}function p(e){return void 0===e&&(e={}),Promise.all(Object.keys(e).map((function(t){return n=t,r=e[t],window.stManager.staticFiles[n]||(n.includes(".js")?s(n,r):n.includes(".css")?c(n,r):Promise.resolve());var n,r})))}function _(e){var t=window.vk.stNavMap||{};for(var n in t){if(t.hasOwnProperty(n))if(new RegExp(n).test(e)){p(t[n]||{});break}}}function h(){l(),window.stManager={done:d,staticFiles:[],registerLoadedScript:u}}},tlMv:function(e,t,n){"use strict";n.r(t);var r=n("g3t9");t.default=r.default},uQjJ:function(e,t,n){"use strict";n.r(t);var r=n("4O8T"),a=n.n(r);window.EventEmitter=a.a,t.default=a.a},uouo:function(e,t,n){"use strict";n.r(t);var r=n("wx14"),a=n("wZQE"),i=n.n(a),o=n("OcsD"),s=n("TYsd"),c=n("t7Ww"),u=n("r/ag"),l=n("fdw3"),d=n("aJgW"),p=n("lNyc"),_=n("9kLB"),h=function(e,t){return void 0===t&&(t=_.EVENT_STATES.FIRE),""+e+t},f={initVkAppModal:function(){var e={use_native_onclick:!0},t=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--qr",inner:Object(l.getLang)("vkapps_show_qr_code"),onclick:"VKAppModal.vkAppQRModalOpen()"})),n=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--notifications",inner:cur.VKApp.notificationsEnabled?Object(l.getLang)("vkapps_disable_notifications"):Object(l.getLang)("vkapps_allow_notifications"),onclick:"return VKApps.allowNotifications(this, "+!cur.VKApp.notificationsEnabled+");"})),a=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:cur.VKApp.canQuitVkApp?"VKAppsMenu__action VKAppsMenu__action--delete":"VKAppsMenu__action VKAppsMenu__action--add",inner:cur.VKApp.canQuitVkApp?Object(l.getLang)("vkapps_delete_service"):Object(l.getLang)("vkapps_add_service"),onclick:"return VKApps.deleteApp(this, "+cur.VKApp.canQuitVkApp+");"})),i=[t,n,a];cur.VKApp.canQuitVkApp||(i=[t,a]);var u=Object(c.default)({class:"VKAppsMenu__modal",type:"button",theme:"small",close:!0,closeText:Object(l.getLang)("mobile_cancel"),items:i});f.VkAppModal=Object(o.ceFromString)(s.default.html(u)),cur.VKApp.closeModal=function(){return ModalMenu.close(f.VkAppModal)}},initVkAppQRModal:function(){var e=this,t=window.location.href,n=d.colorScheme.isDarkScheme(),r={isShowLogo:!0},a=n?156:128;n&&(r.isShowBackground=!0,r.backgroundColor="#fff");var c=i.a.createQR(t,a,"",r),p=Object(u.default)({class:"VKAppsQRModal ModalMenu",hide_on_overlay_click:!0,content:{class:["vk_app_modal_container--qr","vk_app_modal_container--flex","MiniAppModalContainer__qr"],inner:[s.default.wrap(c),{inner:cur.backLang,tag:"h2",class:"PopupContentHeading MiniAppModalContainerQR__heading"},{inner:Object(l.getLang)("vkapps_focus_camera_on_qr_code"),tag:"p",class:"MiniAppModalContainerQR__text"},{tag:"button",class:"Btn Btn_size_large Btn_theme_secondary MiniAppsQrBtn",inner:Object(l.getLang)("vkapps_mvk_qr_done"),onclick:["VKAppModal.vkAppQRModalClose"]}]}});f.VkAppQRModal=Object(o.ceFromString)(s.default.html(p));var _=d.colorScheme.subscribe((function(){_(),e.initVkAppQRModal()}))},vkAppQRModalOpen:function(){f.vkAppModalClose(),f.VkAppQRModal=u.default.open(f.VkAppQRModal,!0),cur.app&&Object(p.sendMessage)({type:h(_.CONNECT_EVENTS.SHARE,_.EVENT_STATES.SUCCESS),data:{type:"qr"}},cur.app.cont)},vkAppQRModalClose:function(){u.default.close(cur.VkAppQRModal,!0)},vkAppModalOpen:function(){f.VkAppModal=u.default.open(f.VkAppModal,!0)},vkAppModalClose:function(){u.default.close(f.VkAppModal,!0)}};window.VKAppModal={vkAppModalOpen:f.vkAppModalOpen,vkAppQRModalOpen:f.vkAppQRModalOpen,vkAppQRModalClose:f.vkAppQRModalClose};var m=n("lMzL"),b=n("29dZ"),v=n("p8d5"),g=n("Y6JH"),A=n("7E7W"),D=function(){function e(e){void 0===e&&(e={}),this.props=e,this.closed=!0,this.qrClosed=!0}var t=e.prototype;return t.init=function(){var e={use_native_onclick:!0},t=cur.VKApp.isFavorite?"removeFavorite":"addFavorite",n=cur.VKApp.isFavorite?Object(l.getLang)("vkapps_remove_from_favorite"):Object(l.getLang)("vkapps_add_to_favorite"),a=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--"+t,inner:""+n,onclick:["VKApps.toggleFavorite","this","event"],attrs:{"data-is-favorite":+cur.VKApp.isFavorite,"data-app-id":+cur.aid,"data-hash":cur.app.options.hash,"data-app-name":cur.VKApp.name,"data-is-direct-game":"1"}})),i=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--qr",inner:Object(l.getLang)("vkapps_show_qr_code"),onclick:["DirectGames.showQr"]})),o=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--share",inner:Object(l.getLang)("vkapps_share"),onclick:"return VKApps.share()"})),u=Object(c.ModalMenuBtn)(Object(r.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--delete",inner:Object(l.getLang)("vkapps_uninstall_game"),onclick:["DirectGames.removeGame"]})),d=[a,o];window.innerHeight>=320&&d.push(i),cur.VKApp.canQuitVkApp&&d.push(u);var p=Object(c.default)({class:"VKAppsMenu__modal",type:"button",theme:"small",close:!0,closeText:Object(l.getLang)("mobile_cancel"),items:d,on_overlay_click:["DirectGames.hideMenu"],onClose:["DirectGames.hideMenu"]});this._modal=s.default.elem(p),this._initQr()},t.show=function(){return this.closed=!1,this._modal=u.default.open(this._modal,!0),!1},t.showQr=function(){this.close(),this.qr=u.default.open(this.qr,!0),this.qrClosed=!1},t.close=function(){return this.closed=!0,u.default.close(this._modal),!1},t.closeQr=function(){u.default.close(this.qr),this.qrClosed=!0},t._initQr=function(){var e=arguments,t=this,n=window.location.href,r=Object(v.getCurrentOrientation)()===v.ORIENTATION_LANDSCAPE,a=d.colorScheme.isDarkScheme(),o={isShowLogo:!0};a&&(o.isShowBackground=!0,o.backgroundColor="#fff");var c=a?156:110,p=r?c:164,_=i.a.createQR(n,p,"",o),h=r?"VKAppsQRModal--landscape":"",f=Object(u.default)({class:"VKAppsQRModal ModalMenu "+h,content:{class:["vk_app_modal_container--qr","vk_app_modal_container--flex","MiniAppModalContainer__qr"],inner:[s.default.wrap(_),{inner:cur.backLang,tag:"h2",class:"PopupContentHeading MiniAppModalContainerQR__heading"},{inner:Object(l.getLang)("vkapps_focus_camera_on_qr_code"),tag:"p",class:"MiniAppModalContainerQR__text"},{tag:"a",class:"vk_app_modal_close_btn",inner:[Object(g.default)(Object(A.getCancelOutline24Icon)())],onclick:["DirectGames.hideQr"]}],on_overlay_click:["DirectGames.hideQr"],onClose:["DirectGames.hideQr"]}});this.qr=s.default.elem(f);var m=d.colorScheme.subscribe((function(){m(),t._initQr.apply(t,e)}))},e}(),O=n("WJpK"),w=n("xnXN"),E=n("TxNk"),y=n("8AuZ");var k=function(){function e(e){this.props=e;var t=function(e){var t=e.board.length<=3?"DirectGamesLeaderBoard--small":"";return{inner:[{inner:[{inner:[{src:e.pic,class:"DirectGamesLeaderBoard__appImg",tag:"img"}],class:"DirectGamesLeaderBoard__appImgContainer",tag:"div"},{inner:[{inner:[e.app_name],class:"DirectGamesLeaderBoard__name",tag:"h5"},{inner:[e.user_result],class:"DirectGamesLeaderBoard__result",tag:"span"}],class:"DirectGamesLeaderBoard__header",tag:"div"},{inner:[e.board.map((function(e){var t=window.vk.id===e.id?"DirectGamesLeaderBoard__profile--current":"",n="";switch(e.place){case 1:n=Object(g.default)({icon:Object(w.getDgLeaderBoardBadge124Icon)()});break;case 2:n=Object(g.default)({icon:Object(E.getDgLeaderBoardBadge224Icon)()});break;case 3:n=Object(g.default)({icon:Object(y.getDgLeaderBoardBadge324Icon)()})}return{inner:[{src:e.img,alt:"","aria-label":e.name,class:"DirectGamesLeaderBoard__profileImage",tag:"img"},{inner:[{inner:[e.name],class:"DirectGamesLeaderBoard__profileName",tag:"span"},{inner:[e.score],class:"DirectGamesLeaderBoard__profileScore",tag:"span"}],class:"DirectGamesLeaderBoard__profileTexts",tag:"div"},{inner:[n],class:"DirectGamesLeaderBoard__place",tag:"div"}],class:"DirectGamesLeaderBoard__profile "+t,href:e.href,tag:"a"}})),{inner:[{inner:[Object(g.default)({icon:Object(O.getDgLeaderBoardInvite24Icon)()})],class:"DirectGamesLeaderBoard__profileImage DirectGamesLeaderBoard__profileImage--invite",tag:"div"},{inner:[{inner:[Object(l.getLang)("vkapps_connect_leader_board_invite")],class:"DirectGamesLeaderBoard__profileName",tag:"span"},{inner:[Object(l.getLang)("vkapps_connect_leader_board_invite_desc")],class:"DirectGamesLeaderBoard__profileScore",tag:"span"}],class:"DirectGamesLeaderBoard__profileTexts",tag:"div"}],class:"DirectGamesLeaderBoard__profile DirectGamesLeaderBoard__invite",onclick:"DirectGames.showInviteBox()",tag:"a"}],class:"DirectGamesLeaderBoard__list",tag:"div"}],class:"DirectGamesLeaderBoard__content",tag:"div"}],class:"DirectGamesLeaderBoard "+t,tag:"div"}}(this.props.board),n=Object(c.default)({class:"ModalMenu--directGamesLeaderBoard",attached:!0,on_overlay_click:["DirectGames.closeLeaderBoard"],type:"button",theme:"small",close:!1,closeText:Object(l.getLang)("vkapps_connect_leader_board_play_again"),items:[t,{class:"DirectGamesLeaderBoard__footer",inner:[Object(b.default)({class:"ModalMenu__btn ModalMenu__cancel DirectGamesLeaderBoard__cancel",theme:"regular",size:"large",inner:Object(l.getLang)("vkapps_connect_leader_board_play_again"),on_click:["DirectGames.closeLeaderBoard"],use_native_onclick:!0})]}]});this._modal=Object(o.ceFromString)(s.default.html(n))}var t=e.prototype;return t.show=function(){this._modal=u.default.open(this._modal,!0)},t.close=function(){u.default.close(this._modal,!0),Object(o.isFunction)(this.props.onClose)&&this.props.onClose()},e}(),S=n("UxAg"),C=n("z9sQ"),R=n("9y81"),I=n("TKWo");var j=n("WWJR"),P=n("PdAw");var T=function(e){return{class:"inline_item DirectGamesInviteBox__item "+(e.selected?"inline_item_selected":""),attrs:{"data-id":e.id},inner:[{class:"ii_body",inner:[{tag:"a",href:e.href,class:"DirectGamesInviteBox__itemLink",inner:[{tag:"img",src:e.img,class:"ii_img DirectGamesInviteBox__itemPhoto"}]},{tag:"span",class:"ii_owner DirectGamesInviteBox__itemName",innerHTML:e.name}]}]}},N=n("UlUB"),M=function(){function e(e){var t=this;this._onListScroll=Object(N.throttle)((function(e){window.onBodyScroll(e.target.scrollHeight)}),33),this._handleItemClick=function(e){var n=e.target;(n=n.classList.contains("DirectGamesInviteBox__item")?n:Object(o.domCA)(n,".DirectGamesInviteBox__item"))&&(n.classList.toggle("inline_item_selected"),t.toggleFriend(+n.dataset.id))},this.box=Object(o.ceFromString)(s.default.html(function(){return{class:"Popup DirectGamesInviteBox",inner:[{class:"DirectGamesInviteBox__header",inner:[Object(b.default)({theme:"header",class:"DirectGamesInviteBox__headerButton DirectGamesInviteBox__headerButton--close",on_click:["DirectGames.closeInviteBox",!1],is_icon:!0,inner:Object(g.default)(Object(j.getCancelOutline28Icon)())}),{tag:"span",class:"DirectGamesInviteBox__headerLabel",inner:[Object(l.getLang)("vkapps_connect_invite_header")]},Object(b.default)({theme:"header",class:"DirectGamesInviteBox__headerButton DirectGamesInviteBox__headerButton--done",on_click:["DirectGames.closeInviteBox",!0],is_icon:!0,inner:Object(g.default)(Object(P.getDoneOutline28Icon)())})]},{class:"DirectGamesInviteBox__content",inner:[(e={class:"DirectGamesInviteBox__search",input_id:"DirectGamesInviteBox__search",placeholder:Object(l.getLang)("vkapps_connect_search_placeholder")},{class:[e.class,C.default.class("SearchPanel",{hasQuery:!!e.hasQuery})],tag:"label",attrs:{"data-id":e.id},inner:[{class:"SearchPanel__inputWrap",inner:{class:"SearchPanel__input",tag:"input",placeholder:e.placeholder,value:e.query||"",oninput:["SearchPanel._onInput","this",e.on_change],"data-scrollviewposition":"top",attrs:{id:e.input_id}}},{class:"SearchPanel__clear",onclick:["SearchPanel._onClearClick","this"],inner:s.default.wrap(Object(R.default)({mix:"SearchPanel__clearIcon",icon:"close20"}))},Object(b.default)({class:"SearchPanel__submit",inner:Object(g.default)(Object(I.getSearchOutline20PrimaryIcon)())})]}),{class:"DirectGamesInviteBox__list filter_peer_wrap",id:"DirectGamesInviteBox__list"}]}]};var e}())),this.friendsIds={},this.props=e,this.search=null}var t=e.prototype;return t.init=function(){var e=this,t=this;this.search=new window.QuickSearch({action:"/apps?act=get_invited_friends&app_id="+cur.aid,al_action:"/apps?act=get_invited_friends&app_id="+cur.aid,container:"DirectGamesInviteBox__list",field:"DirectGamesInviteBox__search",top_len:30,init_offset:30,al_need:!0,item_tpl:function(e,n,r,a){return s.default.html(T({name:this.highlight(Object(o.htsc)(e)),id:n,img:r,href:a,selected:t.friendsIds[n]}))},null_tpl:function(e){var t=Object(l.getLang)("mobile_friends_search_not_found").replace("%s",Object(o.htsc)(e));return e||(t=Object(l.getLang)("mobile_share_list_no_friends")),'\n            <div class="service_msg_box">\n                <div class="service_msg service_msg_null">'+t+"</div>\n            </div>"}}),this._initEventsListeners(),cur.destroy.push((function(){e._removeEventsListeners()}))},t.show=function(){this.box=u.default.open(this.box,!0),this.init()},t.toggleFriend=function(e){this.friendsIds[e]?delete this.friendsIds[e]:this.friendsIds[e]=!0},t.close=function(e){var t=Object.keys(this.friendsIds);e&&t.length?Object(o.isFunction)(this.props.onSuccess)&&this.props.onSuccess({friends_ids:t}):Object(o.isFunction)(this.props.onFail)&&this.props.onFail("cancel"),u.default.close(this.box),this._removeEventsListeners()},t._initEventsListeners=function(){Object(o.addEvent)(Object(S.$)(".DirectGamesInviteBox"),"click",this._handleItemClick),Object(o.addEvent)(Object(S.$)(".DirectGamesInviteBox__content"),"scroll",this._onListScroll)},t._removeEventsListeners=function(){Object(o.removeEvent)(Object(S.$)(".DirectGamesInviteBox"),"click",this._handleItemClick),Object(o.removeEvent)(Object(S.$)(".DirectGamesInviteBox__content"),"scroll",this._onListScroll)},e}();function x(e){return{class:"DirectGamesRequestBox",inner:[{class:"DirectGamesRequestBox__header",inner:[{tag:"span",class:"DirectGamesRequestBox__friendName",inner:[e.friend.name]},{tag:"span",class:"DirectGamesRequestBox__headerDesc",inner:[" ",Object(l.getLang)("vkapps_connect_request_box_subtitle")]}]},{class:"DirectGamesRequestBox__request",inner:[{tag:"img",class:"DirectGamesRequestBox__ava",src:e.user.photo},{class:"DirectGamesRequestBox__requestContent",inner:[{tag:"span",class:"DirectGamesRequestBox__authorName",inner:[e.user.name]},{tag:"span",class:"DirectGamesRequestBox__message",inner:[e.message]}]},{tag:"img",class:"DirectGamesRequestBox__ava DirectGamesRequestBox__gameAva",src:e.pic}]},{class:"DirectGamesRequestBox__footer",inner:[Object(b.default)({on_click:["DirectGames.closeRequestBox",!1],inner:Object(l.getLang)("mobile_cancel"),class:"DirectGamesRequestBox__btn",theme:"secondary"}),Object(b.default)({on_click:["DirectGames.closeRequestBox",!0],inner:Object(l.getLang)("vkapps_connect_request_box_send"),class:"DirectGamesRequestBox__btn"})]}]}}var L=function(){function e(e){this.props=e;var t=new x(e),n=Object(c.default)({class:"ModalMenu--directGamesRequestBox",on_overlay_click:["DirectGames.closeRequestBox"],items:[t]});this._modal=Object(o.ceFromString)(s.default.html(n))}var t=e.prototype;return t.show=function(){this._modal=u.default.open(this._modal,!0)},t.close=function(e){e&&Object(o.isFunction)(this.props.onSuccess)?this.props.onSuccess({friend_id:this.props.uid,message:this.props.message,request_key:this.props.requestKey}):Object(o.isFunction)(this.props.onFail)&&this.props.onFail("cancel"),u.default.close(this._modal,!0)},e}(),B=n("RQ7Z"),F=n("I3vf"),H=n("V4qE"),V=n("zouF"),U=function(){function e(){}return e.init=function(){if(e._isInit)console.warn("DirectGames already init");else{e.initMenu(),e.initHistory(),e._isInit=!0,e.checkConfirmOrder(),Object(v.onOrientationChanged)((function(){setTimeout((function(){e.hideMenu(),e.hideQr(),e.initMenu()}),300)})),e.onBeforeGoHandler=function(){e.destroy(),nav.onBeforeGo.off(e.onBeforeGoHandler)},nav.onBeforeGo(e.onBeforeGoHandler);var t=parseFloat(window.browser.version);e._isOldIosBrowser=(window.browser.ipad||window.browser.iphone)&&t<=9,window.cur&&window.cur.is_enabled_confirm_close&&(e._isEnabledCloseConfirm=!0)}},e.initMenu=function(){e._modalMenu.init()},e.initHistory=function(){e._historySupported=window.history&&window.history.pushState,e._historySupported&&(e._initPath=nav.path,cur.processNav=function(t){return t.nav.path===e._initPath},e.popStateHandler=function(){e._isOldIosBrowser&&!e._firstPopStatePassed||(e._firstPopStatePassed=!0,window.location.pathname===e._initPath&&(e.hasOpenedBox()?e.closeAll(!0):e.goBack(!0)))},e._initHistoryLen=window.history.length,nav.onPopState(e.popStateHandler))},e.confirmClose=function(){statlogsValueEvent("confirm_close_popup","exit_game_dialog_confirmed",+window.cur.aid),B.screenfull.isFullscreen&&B.screenfull.exit(),nav.go("/games")},e.rejectClose=function(){statlogsValueEvent("confirm_close_popup","exit_game_dialog_rejected",+window.cur.aid)},e.goBack=function(){if(e._isEnabledCloseConfirm)return statlogsValueEvent("confirm_close_popup","exit_game_dialog_show",+window.cur.aid),Object(V.Confirm)(getLang("mobile_apps_confirm_close_popup_title"),"DirectGames.confirmClose(); Popup.close(this);","DirectGames.rejectClose(); Popup.close(this);",{theme_accept_btn:"secondary",theme_close_btn:"regular",yes_label:getLang("mobile_direct_games_close")});B.screenfull.isFullscreen&&B.screenfull.exit(),nav.go("/games")},e.goBackHistory=function(t){if(e._historySupported){nav.onPopState.off(e.popStateHandler),cur.processNav=null;var n=e._initHistoryLen-window.history.length;t||n--,!n||window.history.length<=2?nav.go("/games"):window.history.go(n)}else nav.hard_go("/games")},e.destroy=function(){e.closeAll(),nav.onPopState.off(e.popStateHandler),cur.processNav=null,e._firstPopStatePassed=!1},e.onBoxOpen=function(t){e._historySupported&&(window.history.pushState({DGPopupOpened:!0},"",null),e._hasActiveBox=!0,t&&(e._latUIBox=t))},e.onBoxClose=function(){e._historySupported&&(window.history.pushState({DGPopupOpened:!1},"",null),e._hasActiveBox=!1,delete e._latUIBox)},e.showMenu=function(){e._modalMenu.show(),e.onBoxOpen()},e.showQr=function(){e.onBoxClose(),e.onBoxOpen(),e._modalMenu.showQr()},e.hideQr=function(){e._modalMenu.qrClosed||(e.onBoxClose(),e._modalMenu.closeQr())},e.hideMenu=function(){e._modalMenu.closed||(e._modalMenu.close(),e.onBoxClose())},e.showLeaderBoard=function(t){e._leaderBoard||(e.closeAll(),e._leaderBoard=new k(t),e._leaderBoard.show(),e.onBoxOpen())},e.closeLeaderBoard=function(){e._leaderBoard&&(e._leaderBoard.close(),delete e._leaderBoard,e.onBoxClose())},e.showInviteBox=function(t){void 0===t&&(t={}),e._inviteBox||(e.closeAll(),e._inviteBox=new M(t),e._inviteBox.show(),e.onBoxOpen())},e.closeInviteBox=function(t){e._inviteBox&&(e._inviteBox.close(t),delete e._inviteBox,e.onBoxClose())},e.showRequestBox=function(t){void 0===t&&(t={}),e._requestBox||(this.closeAll(),e._requestBox=new L(t),e._requestBox.show(),e.onBoxOpen())},e.closeRequestBox=function(t){e._requestBox&&(e._requestBox.close(t),delete e._requestBox,e.onBoxClose())},e.closeAll=function(t){e.hideMenu(),e.closeLeaderBoard(),e.closeInviteBox(),e.closeRequestBox(),e.hideQr(),e._latUIBox&&(e._latUIBox.props.onlyButtonHide&&t?e.onBoxOpen(e._latUIBox):e._latUIBox.close())},e.hasOpenedBox=function(){return e._hasActiveBox},e.checkConfirmOrder=function(){if(window.orderBoxHandler=new F.default({}),window.cur&&window.cur.app&&(window.cur.app.options.need_confirm_order||window.cur.app.options.need_make_order)){var e=new F.default({}),t="app_"+window.cur.aid+"_container";e.orderId=window.cur.app.options.need_order_id,e.confirmHash=window.cur.app.options.need_order_hash,e.orderHash=window.cur.app.options.need_order_confirm_hash;var n={appId:window.cur.aid,containerId:t};e.setData({containerId:t,item:window.cur.app.options.need_order_item_id},n),e.callback=function(e){Object(p.sendMessage)(e,window.cur.app.cont)},window.cur.app.options.need_make_order&&e.makeOrder(),window.cur.app.options.need_confirm_order&&e.confirmOrder()}},e.removeGame=function(){e.hideMenu(),Object(V.Confirm)(getLang("vkapps_game_remove_confirm"),["DirectGames.confirmRemoveGame","this"])},e.confirmRemoveGame=function(e){u.default.close(e),window.cur&&window.cur.app&&ajax.post("apps",{act:"vkapps_quit",app_id:window.cur.aid,quit:1,hash:window.cur.app.options.hash,from:"app"},{onDone:function(e){e&&(Object(H.init)({text:getLang("vkapps_game_removed")}),setTimeout((function(){nav.hard_go("/games")}),1e3))}})},e}();U._modalMenu=new D,U._leaderBoard=void 0,U._inviteBox=void 0,U._requestBox=void 0,U._initPath=void 0,U._initHistoryLen=void 0,U._hasActiveBox=!1,U._isEnabledCloseConfirm=!1,U._latUIBox=void 0,U._isInit=void 0,U._historySupported=void 0,U._isOldIosBrowser=!1,U._firstPopStatePassed=!1;var W=n("+cqQ"),K={favoriteChanged:Object(W.default)("appId","success"),initVkApp:function(e,t,n,r){K.initVkConnect("app_"+e+"_container",n,r,t,cur.app),K.initVkAppMvk()},initVkAppMvk:function(){if(cur.app){cur.app.isDirectGame?(window.DirectGames=U,U.init(),cur.destroy.push((function(){window.DirectGames&&(window.DirectGames.destroy(),delete window.DirectGames)}))):(document.body.classList.add("vk_app_layout"),"android"===cur.VKApp.platform&&document.body.classList.add("vk_app_android")),f.initVkAppModal(),f.initVkAppQRModal();var e=function(e){e&&cur.VKApp&&(cur.VKApp.isFavorite=!cur.VKApp.isFavorite),window.DirectGames&&window.DirectGames.initMenu()};K.favoriteChanged(e),cur.destroy.push((function(){K.favoriteChanged.off(e)}))}},initVkConnect:function(e,t,n,r,a){Object(m.default)(e,t,n,r,a)},addVkAppToCommunity:function(e,t,n){ajax.post("/apps",{act:"vkapps_add_to_community",api_hash:n,app_id:t,group_id:e},{onDone:function(e){e.hasOwnProperty("status")&&1===e.status?cur.vkAppAddToCommunitySuccessHandler({group_id:e.group_id}):cur.vkAppAddToCommunityErrorHandler(e)},onFail:function(e){cur.vkAppAddToCommunityErrorHandler(e)}})},allowNotifications:function(e,t){var n=Boolean(t)?1:0;b.default.setLoading(e,!0),ajax.post("apps.php",{act:"vkapps_allow_notifications",app_id:cur.aid,allow:n,hash:cur.app.options.hash},{onDone:function(n){cur.VKApp.notificationsEnabled=n,b.default.setLoading(e,!1),e.firstElementChild.innerText=cur.VKApp.notificationsEnabled?getLang("vkapps_disable_notifications"):getLang("vkapps_allow_notifications"),e.setAttribute("onclick","return VKApps.allowNotifications(this, "+!cur.VKApp.notificationsEnabled+");"),cur.VKApp.closeModal&&cur.VKApp.closeModal();var r=t?_.CONNECT_EVENTS.ALLOW_NOTIFICATIONS:_.CONNECT_EVENTS.DENY_NOTIFICATIONS;Object(p.sendMessage)({type:h(r,_.EVENT_STATES.SUCCESS),data:{result:!0}},cur.app.cont)}})},deleteApp:function(e,t){b.default.setLoading(e,!0);ajax.post("apps",{act:"vkapps_quit",app_id:cur.aid,quit:t?1:0,hash:cur.app.options.hash,from:"app"},{onDone:function(t){cur.app.isDirectGame&&nav.hard_go("/apps"),cur.VKApp.canQuitVkApp=t,t||nav.hard_go("/feed"),u.default.close(f.VkAppModal,!0),b.default.setLoading(e,!1),f.initVkAppModal()}})},cancelSettings:function(){hide("apps_box"),val("apps_box",""),show("apps_test_id"),cur.allowMessagesFromCommunityBox=!1,Object(o.isFunction)(cur.app.vkMiniAppShareFail)&&cur.app.vkMiniAppShareFail()},share:function(){return cur.app.funcs.shareBox("https://vk.com/app"+cur.aid,cur.appShareParams.sharePhoto,cur.appShareParams.shareTitle,cur.appShareParams.shareDesc),window.DirectGames&&window.DirectGames.hideMenu(),!1},toggleFavorite:function(e,t){cancelEvent(t),window.DirectGames&&window.DirectGames.hideMenu();var n=+e.dataset.isFavorite,r=e.dataset.hash,a=+e.dataset.appId,i=e.dataset.appName,o=function(e,t){var n;n=e?t?getLang("vkapps_game_added_to_favorite"):getLang("vkapps_game_removed_from_favorite"):t?getLang("vkapps_service_added_to_favorite"):getLang("vkapps_service_removed_from_favorite");return n}(+e.dataset.isDirectGame,!n);if(n){var s=getLang("vkapps_confirm_remove_from_favorite_text").replace("{app}",i);Object(V.Confirm)(s,["VKApps.confirmToggleFavorite","this",a,r,o],null,{title:getLang("vkapps_confirm_remove_from_favorite_title")})}else this.toggleFavoriteRequest(a,r).then((function(){Object(H.init)({text:o})})).catch((function(e){Object(H.init)({text:e})}))},confirmToggleFavorite:function(e,t,n,r){u.default.close(e),K.toggleFavoriteRequest(t,n).then((function(){Object(H.init)({text:r})})).catch((function(e){Object(H.init)({text:e})}))},toggleFavoriteRequest:function(e,t){return new Promise((function(n,r){ajax.post("apps",{act:"toggle_favorite",app_id:e,hash:t},{onDone:function(t,a){t?(K.favoriteChanged(!0,e),n(t)):(K.favoriteChanged(!1,e),r(a))},onFail:function(){K.favoriteChanged(!1,e),r()}})}))}};window.VKApps=K},"v+Uj":function(e,t,n){"use strict";n.r(t),n.d(t,"getCurrentElementIndex",(function(){return h})),n.d(t,"getElements",(function(){return _})),n.d(t,"scrollToElem",(function(){return p})),n.d(t,"_onWheel",(function(){return b}));var r=n("z9sQ");var a=function(e){return{class:[r.default.class("Slider",{snapping:!!e.snapping},"--"),e.class||e.mix],id:e.id,inner:{class:["Slider__scroll","_preventMenuOpen"],attrs:e.attrs,onwheel:["Slider._onWheel","event","this"],inner:{class:"Slider__line",attrs:{role:"presentation"},inner:e.inner}}}},i=n("OcsD"),o=n("UxAg"),s=n("jk6M");window.Slider={scrollToElem:p,nextElem:f,prevElem:m},Slider._onWheel=b,onDOMReady(g),onDOMReady((function(){onBodyResize(v)}));var c=".Slider",u=".Slider--snapping",l=".Slider__scroll",d=".Slider__line";function p(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n="center"),e){var r=e.closest(l),a=e.offsetLeft;"center"===n&&(a-=r.offsetWidth/2-e.offsetWidth/2);var o=0;if(window.getComputedStyle){var s=getComputedStyle(e);(s.scrollMarginLeft||s.scrollSnapMarginLeft)&&(o+=Object(i.toInt)(s.scrollMarginLeft||s.scrollSnapMarginLeft))}t&&r.scrollTo?(Object(i.domData)(r,"left",a-o),r.scrollTo({left:a-o,behavior:"smooth"})):r.scrollLeft=a-o}}function _(e){return e=Object(i.ge)(e),Object(o.$)(d,e).childNodes}function h(e,t){var n=Object(o.$)(l,e);return t||(t=_(e)),Array.from(t).map((function(e,t){return{index:t,scrollLeft:Math.abs(e.offsetLeft-n.scrollLeft)}})).sort((function(e,t){return e.scrollLeft-t.scrollLeft}))[0].index}function f(e,t,n){void 0===t&&(t=!1);var r=_(e=Object(i.ge)(e)),a=r[h(e,r)+1];f&&p(a,t,n)}function m(e,t,n){void 0===t&&(t=!1);var r=_(e=Object(i.ge)(e)),a=r[h(e,r)-1];a&&p(a,t,n)}function b(e,t){e.preventDefault();var n=e.deltaX,r=e.deltaY;Math.abs(n)>Math.abs(r)&&(t.scrollLeft+=n)}function v(){var e=Object(o.$$)(u);Array.from(e).forEach((function(e){var t=Object(o.$)(l,e);t.scrollLeft=t.scrollLeft}))}function g(){(s.default.ios||s.default.msie_edge)&&(onDOMReady(D),window.page&&window.page.onChange(D),window.MutationObserver&&onDOMReady((function(){document.body&&new MutationObserver(A).observe(document.body,{subtree:!0,childList:!0})})))}function A(e){e.forEach((function(e){e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&e.$$(c).forEach(O)}))}))}function D(){Object(o.$$)(c).forEach(O)}function O(e){var t=getComputedStyle(e),n=Number(t.paddingTop.replace("px","")),r=Number(t.paddingBottom.replace("px",""));e.style.overflow="hidden",e.style.height=e.offsetHeight-n-r+"px",e.$(l).style.paddingBottom="20px"}t.default=a;window.Slider=a,Object(i.extend)(a,{scrollToElem:p,nextElem:f,prevElem:m,_onWheel:b})},vOib:function(e,t,n){"use strict";n.r(t);var r=n("UWnA"),a=n("8ZMO"),i=n("KiYr"),o=n("z9sQ"),s=n("fdw3");function c(e){var t=[e];return Object(s.isArray)(e)&&(t=Object(s.wdToFlatArray)(e)),t.join("")}function u(e){var t=c(e);return!t||"<div></div>"===t}var l=function(e){if(void 0===e&&(e={}),e.content_only)return{outerHTML:c(e.content)};var t=e.title,n=e.corner||{},s=e.inner||e.content||e.children,l=e.anchor,d=e.alert,p=e.style||{},_=e.attrs||{},h=e.noShadow,f="gray";null!==e.count&&(f="black");var m=e.pageBlock?"PageBlock PageBlock--separate":"",b=[t];if(null!==e.count){var v={inner:[e.count],class:"Pad__count",tag:"span"};b.push(v)}return{tag:e.tag||"div",class:[e.class||e.mix,o.default.class("Pad",{empty:u(s),noBorder:e.no_border,noCapsTitle:e.no_caps_for_title,style_extraTopPadding:p.extra_top_padding,theme:f,noShadow:h}),m],ref:e.ref,attrs:_,"data-id":e.name||e.id,inner:[l?Object(a.default)({mix:"Pad__anchor",id:l}):null,d?Object(r.default)({inner:[Object(i.default)({inner:[d],class:"Pad__alert",theme:e.alert_theme})],style:{tiny_padding_bottom:!0}}):null,t?Object(r.default)({inner:[e.isHeaderPage?{inner:[b],class:"Pad__title",tag:"h1"}:{inner:[b],class:"Pad__title",tag:"h3"},n.url?{inner:[n.text],href:n.url,onClick:n.onclick,attrs:n.attrs,class:["Pad__corner",n.class],tag:"a"}:{inner:[n.text],href:n.url,onClick:n.onclick,attrs:n.attrs,class:["Pad__corner",n.class],tag:"div"}],class:"Pad__header"}):null,t?{inner:[s],class:["Pad__content",e.content_mix],tag:"div"}:s]}};t.default=l},vWwi:function(e,t,n){"use strict";n.r(t),n.d(t,"disableBodyScroll",(function(){return u})),n.d(t,"enableBodyScroll",(function(){return l}));var r,a=n("OcsD"),i=n("jk6M"),o=!1,s=null,c=null;function u(e,t){if(void 0===t&&(t={}),window.MutationObserver&&!o){window.nav.saveScrollPosition();var n=document.body;s=n.style.overflow,o=!0,i.default.ios||i.default.ipad||(n.style.overflow="hidden"),t.forceScrollDisable&&(n.style.height="100%",document.documentElement.style.overflow="hidden"),c=new MutationObserver((function(){n.contains(e)||l()})),r=Object(a.scrollTop)(),document.body&&(document.body.classList.add("fixed"),Object(a.setStyle)(document.body,{top:"-"+r+"px"}),i.default.safari&&Object(a.getCw)()<882&&document.scrollingElement&&(document.scrollingElement.scrollTop=r||0,setTimeout((function(){document.scrollingElement&&(document.scrollingElement.scrollTop=r||0)}),100),setTimeout((function(){document.scrollingElement&&(document.scrollingElement.scrollTop=r||0)}),300))),c.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}}function l(e,t){void 0===t&&(t={}),window.MutationObserver&&o&&(document.body.style.overflow=s,(null==t?void 0:t.forceScrollDisable)&&(document.documentElement.style.overflow="initial"),null==c||c.disconnect(),document.body&&(document.body.classList.remove("fixed"),Object(a.setStyle)(document.body,{top:""}),Object(a.scrollTop)(r)),o=!1)}},vhZE:function(e,t,n){"use strict";n.r(t);var r=n("z9sQ"),a=n("z1UI"),i=n("Y6JH"),o=n("+7CI"),s=n("xTMR"),c=n("1W7h"),u=n("HaOv");var l=function(e){void 0===e&&(e={});var t={},n=e.raw||"",l=e.hash||"",d=e.text||"";"album"===(e.attachment_type||"")&&(e.height-=60),e.type&&"blur"!==e.type||(e.width>=250&&e.height>=250?e.type="blurWithText":e.type="blur"),("blur"===e.type||e.only_icon)&&(delete e.button,delete e.title),e.type&&(t[e.type]=!0);var p,_=r.default.class("PostPhotoRestriction",t,"--");"blur"!==e.type&&"blurWithText"!==e.type||(p=e.width<100||e.height<100?Object(i.default)({icon:Object(o.getHideOutline28Icon)()}):Object(i.default)({icon:Object(s.getHideOutline56Icon)()})),"block"===e.type&&(!e.forceText&&(e.width<300||e.height<250)&&(delete e.title,delete e.text),p=e.width<100||e.height<100?Object(i.default)({icon:Object(c.getBlockOutline28Icon)()}):Object(i.default)({icon:Object(u.getDoNotDisturbOutline56Icon)()})),p={inner:[p],class:"SplashScreen__icon",tag:"div"},"block"!==e.type||e.title||(e.title=e.text);var h="PostPhotoRestriction.clear(this, event, '"+d+"', '"+e.button+"', '"+n+"', '"+l+"')";return{inner:[{inner:[Object(a.default)({title:e.title,icon_raw:p,more_text:e.button,more_type:"outlineMono",more_onclick:h,more_ontouchend:h,more_native_onclick:!0})],class:"PostPhotoRestriction__splash",tag:"div"}],class:_,tag:"div"}},d=n("he4e"),p=n("OcsD");window.PostPhotoRestriction={clear:d.clear,onClearConfirm:d.onClearConfirm,onClearDecline:d.onClearDecline};t.default=Object(p.extend)(l,{onClear:d.onClear,isCleared:d.isCleared})},vk58:function(e,t,n){"use strict";n.r(t);var r=n("29dZ"),a=n("fdw3"),i=n("z9sQ");var o=function(e){var t=e.btns||e.inner||[],n=e.mode||"horizontal",o=e.align||"start";Object(a.isArray)(e.inner)&&1===e.inner.length&&e.inner[0].length>1&&(t=e.inner[0]),e.nowrap&&(t=t.map((function(e){return e.nowrap=!0,e})));var s,c=i.default.class("BtnStack",{stretchOnSmallScreens:e.stretch_on_small_screens,table:e.nowrap,mode:n,align:o}),u=t.map((function(e){if(!e)return null;var t=["BtnStack__btn"];if(e.class&&t.push(e.class),e.mix&&t.push(e.mix),e.class=Object(a.arrayUnique)(Object(a.arrayFlat)(t)),!!e._&&e._.__is_wd_internal_data||Object(a.arrayIncludes)(t,"CellButton")||(e=Object(a.extend)(Object(r.default)(e),{nowrap:e.nowrap,is_icon:e.is_icon})),e.nowrap){var n=i.default.class("BtnStack__cell",{icon:e.is_icon});return delete e.nowrap,{inner:[e],class:n,tag:"div"}}return e}));return e.after&&(s={class:i.default.class("BtnStack__cell",e.after_mix),inner:e.after}),{inner:[u[0]?u:null,s],class:c,tag:"div"}};t.default=o},vkmG:function(e,t,n){"use strict";n.r(t),n.d(t,"symbols",(function(){return r})),n.d(t,"escape",(function(){return a})),n.d(t,"encodeHTMLEntities",(function(){return i})),n.d(t,"decodeHTMLEntities",(function(){return o}));var r=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function a(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(r,"ig"),n)}),e)}function i(e){return a(e).replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function o(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}},wMVj:function(e,t,n){"use strict";n.r(t);var r=n("UxAg"),a=n("+cqQ"),i=n("jk6M"),o=n("OcsD"),s=n("a0wW"),c=n("eGQV"),u=n("izth"),l=n("wkhI"),d=n("VzJG"),p=function(){if(!window.storybook){var e=!(!window.history||!history.pushState),t=se((function(){return _}));onDOMReady((function(){s.default.setFlag(s.FLAG_SUPPORTS_HISTORY_API,e)}));var n={},_=null,h=[],f=!1;if(e)addEvent(window,"popstate",(function(e){if(window.isNewMail&&p.onPopState())return preventEvent(e),void stopEvent(e);var t=extend({no_push:!0,need_restore:!0});if(e.state&&e.state.nav){var n=e.state.nav,a=n.tab,i=n.prev_tab;t=extend(t,{tab:a,prev_tab:i})}cur.share&&cur.share.destroy&&cur.share.destroy();var o=Object(r.$)(".Popup_open");location.href.includes("#pop_")||Popup.close(o),P(location,null,t)}));else{var m=location.hash||"";"#/"==m.substr(0,2)&&I(m.substr(1),null,{replace:!0});var b=function(e){(e=(e||"").substr(1))&&"/"==e.substr(0,1)||(e=location),P(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?addEvent(window,"hashchange",(function(){b(location.hash||"")})):(!function e(){var n=location.hash||"";_!==n&&(_=n,t(!0)),setTimeout(e,100)}(),t((function(e){b(e)})))}var v=(location.pathname||"").replace(/^\/+/,"/"),g=location.search||"",A=location.hash||"";return{onBeforeGo:Object(a.default)(),onBeforeGo2:Object(a.default)(),onPopState:Object(a.default)(),go:P,al_go:j,app_go:function(e,t,n){if(!n)return!0;if(checkEvent(t))return!0;remove("app_go_frame");var r=getHref(e),a=ce("iframe",{id:"app_go_frame",src:n,onload:function(){remove("app_go_frame"),r&&p.hard_go(r)}},{display:"none"});return window.bodyNode.appendChild(a),!1},hard_go:I,go_after:function(e,t){return!Object(o.ajaxLayoutEnabled)()||(!!checkNav(t.target,{skip_onclick:!0,skip_clicable:!0})||(!1===e||p.go(e,t)||cancelEvent(t),!1))},page_set:function(e,t,n){C(e,t,n)},page_get:function(e,t){return void 0===t&&(t=Tabbar.getCurrentId()),function(e,t){for(var n=E(t),r=n.length-1;r>=0;--r){var a=n[r];if(a.h===e||a.a===e)return a.d}return!1}(e,t)},saveScrollPosition:function(){var e=S();e&&e.d&&(e.d.st=scrollTop())},set:M,checkUrl:R,tryHistoryBack:function(){var e=f;return e&&history.go(-e),f=!1,!!e},zInit:function(){var e=qs2obj(p.params);e.z&&T(e.z)},getPostParams:x,cur:v+g+A,path:v,params:g.substr(1),hash:A,clear:function(){n={},p.initStore(),h=[],Tabbar.setHistory(n)},hasUpdate:function(e,t,n){if(!e||!e.need_check_updates)return!1;var r=t,a=k(E(e.tab),r);if(!a||!n.html)return!1;var i=a.d.lm.check_updates,o=n.lm.check_updates;return!(!i&&!o)&&(o!==i&&{currentCache:a})},needUpdate:function(e,t,n){if(!e||!e.need_check_updates)return!0;var r=t,a=k(E(e.tab),r);if(!a||!n.html)return!0;var i=a.d.lm.check_updates,o=n.lm.check_updates;return!i&&!o||o!==i},updateCurrentPage:function(){var e=S();page.set(e.h,e.d,{forceUpdate:!0})},isTabHaveCache:function(e,t){var n=E(e);return!!n&&!!k(n,t)},getQuery:function(e){var t=qs2obj(p.params);return e?t[e]||null:t},getNotifierScrollTop:function(){var e=h.find((function(e){return"/settings?act=notifier"===e.h}));return e?e.d.st:null},reload:function(){return p.go(p.cur)},tryBack:function(){var e=h.slice(-2)[0];return!!e&&(p.go(e.h,null,{need_restore:!0}),!0)},backToTabHistory:function(e){var t=y(),n=t.findIndex((function(e){return!0===e.current})),r=e&&hasClass("al_back",e),a=e&&e.classList.contains("mh_back_replace"),i=attr(e,"href"),o=t[n-1];if(o)return t.splice(n,t.length),p.go(o.h,null,{need_restore:r});if(i)return w(Tabbar.getCurrentId()),p.go(i,null,{replace:a});var s=Tabbar.getCurrentId(),c=Tabbar.getDefaultURL(s);return w(s),p.go(c,null,{replace:a})},openInNativeApp:function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),this._openAppInProgress)return!1;cancelEvent(t);var o={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},s=r?n.href:"vk://vk.com"+(ge("vk_wrap").offsetWidth<882&&p.prev_cur?p.prev_cur:p.cur),c=i.default.mi?1500:300;i.default.safari&&(c=10===i.default.ios?1100:i.default.ios>10&&i.default.ios<12?0:i.default.ios>=12&&i.default.ios<13?2800:i.default.ios>=13?1800:300);var u=Date.now(),l=setTimeout((function(){a._openAppInProgress=!1,Date.now()-u>c+200||!document.hasFocus()||(n&&n.href?p.hard_go(n.href):p.hard_go(o[e]))}),c);if(addEvent(window,"blur",(function e(){clearTimeout(l),a._openAppInProgress=!1,removeEvent(window,"blur",e)})),i.default.ios){addEvent(window,"focus",(function e(){window.menu&&window.menu.close(),removeEvent(window,"focus",e)}))}else window.menu&&window.menu.close();return this._openAppInProgress=!0,p.hard_go(s),statlogsValueEvent("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!isVkWebView()){var e=geByClass1("mmi_open_in_app");e&&addClass("supported",e)}},initStore:function(){window.store&&(window.store.tabs=n)},getPageJs:function(){var e=Object(r.$)("#page_script");return e?e.innerText:h.length&&h[h.length-1].d.js||""},onMenuItemClick:function(e,t){var n=getW("vk_wrap")>=882?"full_version":"mobile";if(t&&Object(d.recordClick)(t),statlogsValueEvent("mvk_navigation_pages","click","tabbar",e,n),"/wall"===p.cur.substr(0,5)&&"add"===p.getQuery("act")){var a=Object(r.$)("#feed_add_form"),i=qs2obj(a.action.split("?")[1]),o=a.getAttribute("data-hash")||i.hash;o&&post.saveDraft(null,o)}},setFvLink:function(e){p.fv_link=e}}}function D(){Tabbar.setHistory(n)}function O(e){var t=window.Tabbar;if(!t)throw new Error("Tabbar is not defined: "+JSON.stringify(e));if(e.lm&&e.lm.tab&&e.lm.is_tab_page||e.options&&e.options.forceSetCurrent){var n=t.getCurrentId(),r=e.lm&&e.lm.tab||e.options.tab;t.setCurrentId(r),n!==r&&D()}else e.lm&&!e.lm.tab&&(e.lm.tab=t.getCurrentId())}function w(e){n[e]=[]}function E(e){return!!n[e]&&n[e]}function y(){return E(Tabbar.getCurrentId())}function k(e,t){var n=(e||[]).filter((function(e){return e.d===t||e.h===t}));return!(!n||!n[0])&&n[0]}function S(){var e=(y()||[]).filter((function(e){return!0===e.current}));return!(!e||!e[0])&&e[0]}function C(e,t,r){var a;t.options&&t.options.is_fast&&t.options.prev_tab?a=E(t.options.prev_tab):(O(t),a=y(),t.lm&&t.lm.is_tab_page&&(a=!1));var i=function(){var e=S();return e&&e.d&&e.d.options&&e.d.options.replaceState}()||function(e){return e&&e.options&&e.options.replacePrevPage}(t),o=!1;if(a){for(var s=-1,c=a.length-1;c>=0;c--)if(a[c].h===e||a[c].a===e){s=c;break}s>-1&&a.splice(s+1,a.length);for(var u=a.length-1;u>=0;u--){var l=a[u];l.h===e||l.a===e?(a[u]={h:e,d:t,a:r,current:!0},o=!0):a[u].current=!1}}if(!o){var d={h:e,d:t,a:r,current:!0};if(a){var p=a[a.length-1],_=p&&p.d&&p.d.options&&p.d.options.removeAfterNextResponse;(i||_)&&a.pop(),a.push(d),a.length>20&&a.shift()}else{var h=Tabbar.getCurrentId(),f=S();if(f&&f.d&&f.d.options&&f.d.options.need_check_updates&&d.d.lm.check_updates){var m=d.d.html,b=f.d.page;d.d.page=b,d.d.newHTML=m}n[h]=[d]}}if(isArray(a)){for(var v=-1,g=a.length-1;g>=0;g--)if(!0===a[g].current){v=g;break}if(v>0){var A=v-1;a[A].h.includes("/like?act=publish")&&function(e,t){e.splice(t,1)}(a,A)}}}function R(e){var t;if(t=/^(https?:)\/\/([^:\/]+)?(?::(\d+))??(\/+\\+)?(.*)$/i.exec(e)){if(t[1]!==location.protocol)return!1;if(t[2]&&t[2]!==location.hostname)return!1;if(t[3]&&t[3]!==location.port)return!1;e=t[5]||""}var n=e.match(/[^\/|\\|\s+]+\/\S+/g);return e=n?n[n.length-1].trim():e}function I(e,t,n){if(checkEvent(t))return!0;if(n&&n.push_only)return!0;if(n&&n.replace)location.replace(e);else if(e){var r=getHref(e);r===location.href.replace(location.origin,"")?location.reload():location.href=r}return!0}function j(e,t,n){cancelEvent(t);var r=getHref(e);if(Object(o.ajaxLayoutEnabled)()){if(n&&n.push_only)return!0;if(ajax.nav(r,n))return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!0}I(r,t,n)}function P(t,n,r){var a,i,o=window.Tabbar;if(t&&t.href){if(/vk\.com\/vkui\/([a-zA-Z_]+)/.test(t.href))return I(t.href,n,r),!1;if(i=t.href,t.getAttribute&&t.getAttribute("data-change-location-with-post-away")){var s={};return(a=x(t)).post_id&&(s.post=a.post_id,a.ad_data&&(s.post_ad_data=a.ad_data),a.post_click_cc_key&&(s.cc_key=a.post_click_cc_key),i="/away.php?to="+encodeURIComponent(i)+"&"+obj2qs(s).substr(1)),I(i,n,r),!1}}if(t&&t.href&&t.dataset&&t.dataset.setFrom&&(t.href=Url.make(t.href,{from:p.cur})),p.onBeforeGo(t,n,r))return!1;if(r=extend({no_push:!1,push_only:!1,replace:!1},r),checkEvent(n))return!stopEvent(n);if(!t)return!0;e&&(r.no_push||r.need_restore)&&(f=!1);var c=t,d="",_="",h="";function m(e){return"a"===tag(e)?e:gpeByTag("a",e)}!t.href&&t.getAttribute&&(c=t.getAttribute("data-href"));var b=n&&m(n.target)||t&&t.tagName&&m(t);if(("input"==tag(t)||"button"==tag(t))&&("submit"==t.type||"image"==t.type)&&t.form){if(t.disabled)return!0;var v=t.form,g={},A=v.action||"",D=!1;if(each(v,(function(e,n){return!(n.name&&!n.disabled&&!Object(l.isFieldIgnored)(n))||("radio"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==t||("image"===n.type&&n!==t||("file"===n.type?(D=!0,!1):"checkbox"===n.type?(g[n.name]=n.checked?1:0,!0):void(g[n.name]=n.value))))))})),"image"==t.type&&(g[t.name]=t.value,g[t.name+".x"]=1,g[t.name+".y"]=1),D||"multipart/form-data"==attr(v,"enctype"))return function(e){var t=ce("iframe");attr(t,"id","upload_iframe"),attr(t,"name","upload_iframe"),attr(t,"width","0"),attr(t,"height","0"),attr(t,"border","0"),attr(t,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),append(t,e.parentNode),window.frames.upload_iframe.name="upload_iframe",t=ge("upload_iframe");var n=!1;return each(e,(function(e,t){if("submit"===t.type)return n=t,!1})),addEvent(t,"load",(function e(){removeEvent(t,"load",e),setTimeout((function(){remove(t),unlockButton(n)}),2e3)})),Object(u.setDocumentDomain)(),attr(e,"target","upload_iframe"),attr(e,"method","post"),attr(e,"enctype","multipart/form-data"),attr(e,"encoding","multipart/form-data"),append(ce("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),setTimeout((function(){lockButton(n),remove("__extra")})),!1}(v);if(!(c=R(A)))return!0;v.method&&"get"!=v.method?r.params=g:c=c.split("?",1).shift()+obj2qs(g)}if(hasClass("al_need_login",t)&&(r.redirectToLoginPage=!0),"string"!=typeof c){if(!c)return!0;"/"!==(d=(c.pathname||"").replace(/^\/+/,"/")).substr(0,1)&&(d="/"+d),_=c.search.substr(1),h=c.hash,c=d+c.search+h;if(/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(d.substr(1))&&window.cur&&window.cur.module){var w=window.cur.module;if("feed"===w)"search"===qs2obj(p.params).section&&(w="feed_search");_+="&ref="+w}}else{var E=c.split("#"),y=E.shift();h=E.length?"#"+E.join("#"):"",d=(y=y.split("?")).shift(),_=y.join("?"),!h&&!_||d||(d=p.path,y||(_=p.params),c=d+(_?"?"+_:"")+h)}var k=qs2obj(_);function S(e,t,n){var r=n&&k[t];return!(!e||r)&&(k[t]=e,!0)}if(S((a=x(b,!!k._post_click_type)).post_id,"_post",!0),S(a.post_click_type,"_post_click_type",!0),k._post_click_type&&(S(a.post_click_mention_id,"_post_click_mention_id",!0),S(a.post_click_cc_key,"_post_click_cc_key",!0),S(a.post_click_url,"_post_click_url",!0),S(a.ad_data,"_post_ad_data",!0)&&S(a.ad_block_unique_id,"_post_ad_block_unique_id")),-1!==location.pathname.indexOf("/groups_catalog")&&0!==c.indexOf("/")&&(c="/"+c),0!==location.pathname.indexOf("/app")&&0===d.indexOf("/app")&&k&&k.act&&"app_r"===k.act)return!!n||(I(t,n,r),!1);if(_=obj2qs(k).substr(1),n&&c&&p.cur&&c.split("#").shift()==p.cur.split("#").shift()&&h&&!r.force&&(scrollToHash(h),r.push_only=!0),r.no_push&&p.cur==c&&!r.force)return!1;if(r.push_only)return M(extend(r,{nav:{push:c,path:d,params:_,hash:h}})),!1;if(addClass("active",r.link||t),hasClass("al_back_history",t))return addClass("al_back",r.link||t),removeClass("al_back_history",r.link||t),p.backToTabHistory(r.link||t);if((A||r.isForm)&&(r.removeAfterNextResponse=null==r.removeAfterNextResponse||r.removeAfterNextResponse),t.classList&&(t.classList.contains("al_tab")||t.classList.contains("SliderTabs__tab")||t.classList.contains("Unfold__item_replaceState"))&&(r.replaceState=!0),hasClass("al_back",t)){var C=k.act;window.isNewMail&&"/mail"===location.pathname&&!C||"show"===C&&!geByClass1("messenger")?r.need_restore=!1:r.need_restore=!0}var P=attr(t,"data-tabbar");if(P){var N=o.getCurrentId();N!==P?(P!==o.TAB_ID_MESSAGES&&0===o.getTabCounter(P)&&(r.need_restore=!0),P===o.TAB_ID_FEED&&"/feed"===c&&(r.need_check_updates=!0),r.tab=P,r.prev_tab=N,r.forceSetCurrent=!0):(r.tab=P,r.prev_tab=P,r.replace=!0),O({lm:{tab:P,is_tab_page:!0}})}else if(r.tab)r.native_prev=o.getCurrentId(),r.is_native_back=!0,r.forceSetCurrent=!0,O({lm:{tab:r.tab,is_tab_page:!0}});else{var L=o.getCurrentId();r.tab=L;var B=!(!this||!isString(this.cur))&&this.cur.substr(1);o.TAB_IDS.includes(B)?r.prev_tab=B:r.prev_tab=L}var F=function(e){var t=window.cur,n=window.menu,r=qs2obj(e.nav.params),a=qs2obj(p.params);if((a.z||r.z)&&a.z!=r.z){if(p.path==e.nav.path){var i=copy(r),o=copy(a);if(delete i.z,delete o.z,i=obj2qs(i),o=obj2qs(o),i==o)return T(r.z,!1,e),M(e),n.close(null,!0),!1}e.zProcess=function(t,n){T(r.z,t,extend({},e,{no_push:!0}),n)}}if(e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&t.processNav&&t.processNav(e))return M(e),n.close(null,!0),!1;return j(e.nav.push,null,e),!1}(extend(r,t.tagName?{target:t}:{},{nav:{push:c,path:d,params:_,hash:h}}));return F||cancelEvent(n),F}function T(e,t,n,r){var a,i=window.photo,o=window.zlayer;if(e){if(a=/^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i.exec(e)){if(!0===r)return!1;var s=a[1]||"",c=a[2]||"";return i.zopen(!1,null,s,c,{no_push:(n||{}).no_push}),o&&!1!==t&&void 0!==t&&(o._st=t),QRPhotoPosting&&QRPhotoPosting.close(),!0}if(a=/^story(-?\d+_\d+)(\/([a-z0-9_-]+))?(\/?[a-z0-9_:]+)?$/i.exec(e)){var u=window.Stories;if(!0===r)return!1;if(!u.opened){var l=a[1]+(a[2]?a[2]:"/"+a[1])+(a[4]?a[4]:"");u.init(l)}return!0}if(a=/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?$/i.exec(e)){window.Stories;if(!0===r)return!1;var d=a,p=d[1],_=d[2],h=d[3];return window.showNarrative(p,_,h,"",{source:"narrative_link"}),!0}if(a=/^\/?doc(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e))return!0!==r&&(i.zopen(null,null,a[1]+"_"+a[2],"",{no_push:(n||{}).no_push,isDoc:!0,hasVideo:!1,hash:a[4]}),o&&!1!==t&&void 0!==t&&(o._st=t),!0);if(a=/^\/?publish_photo(-?\d+)?$/i.exec(e)){if(!0===r)return!1;QRPhotoPosting&&QRPhotoPosting.show()}}return!1!==r&&(o&&o.close(),Stories&&Stories.opened&&Stories.close({isPopState:!0,closeAll:!0}),QRPhotoPosting&&QRPhotoPosting.close(),!0)}function N(t,n,r){if(void 0===r&&(r=null),e)!function(e,t,n){var r=window.Tabbar.getCurrentId(),a={nav:{tab:t.tab||r,prev_tab:t.prev_tab}};window.isNewMail?t.replace?history.replaceState(extend({},n,a),null,e):history.pushState(extend({},n,a),null,e):t.replace?history.replaceState(a,null,e):history.pushState(a,null,e)}(t,n,r);else{var a="/"==t.substr(0,1)?t:"/"+t,i="#"+a,o=location.pathname+location.search+i;ge("base").href=a,n.replace?location.replace(o):(_=i,location.href=o)}}function M(t){if(!t.no_push&&p.cur!=t.nav.push){if(!window.isBasicOffline&&Object(c.isOfflineCapable)()&&!1===navigator.onLine&&!t.push_only)return I(t.nav.push,null,t);try{window.isNewMail?N(t.nav.push,t,t.historyState):N(t.nav.push,t),e&&!t.no_push&&(t.nav_init||t.nav_incr)?(t.nav_init&&(f=0),t.nav_incr&&!1!==f&&f++,f>30&&(f=!1)):f=!1}catch(e){return I(t.nav.push,null,t)}}p.cur!==t.nav.push&&(p.prev_cur=p.cur,p.prev_fv_link=p.fv_link),p.cur=t.nav.push,p.path=t.nav.path,p.params=t.nav.params,p.hash=t.nav.hash,p.path&&0!==p.path.indexOf("/")&&(p.path="/"+p.path)}function x(e,t){var n=!(!e||!e.getAttribute),r={};if(!n)return r;var a=e.getAttribute("data-post-id");a&&(r.post_id=a);var i=e.getAttribute("data-post-click-type");i&&(r.post_click_type=i);var o=e.getAttribute("mention_id");o&&(r.post_click_mention_id=o);var s=e.getAttribute("data-post-click-cc-key");s&&(r.post_click_cc_key=s);var c=[e.getAttribute("href"),e.getAttribute("data-href")];if(each(c,(function(e,t){if(t&&"#"!==t)return r.post_click_url=t,!1})),!!i||t){var u=gpeByClass("_ads_block_data_w",e),l=(u=u||gpeByClass("_ads_promoted_post_data_w",e))&&u.getAttribute("data-ad"),d=u&&u.getAttribute("data-ad-block-uid");l&&(r.ad_data=l),d&&(r.ad_block_unique_id=d)}return r}}();onDOMReady((function(){window.storybook||(p.initOpenInNativeAppBtn(),p.initStore())})),window.nav=p,t.default=p},wTgh:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=0);var n=32768&t;return e=(e=e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g,(function(e){return'<a href="mailto:'+e+'">'+e+"</a>"}))).replace(/(https?:\/\/)?(([A-Za-zА-Яа-яЁё0-9@][A-Za-zА-Яа-яЁё0-9@\-\_\.]*[A-Za-zА-Яа-яЁё0-9@])(\/([A-Za-zА-Яа-я0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi,(function(){var e=arguments[3],t=arguments[2],r=arguments[0],a=arguments[1]||"http://";if(-1==e.indexOf(".")||-1!=e.indexOf(".."))return r;var i=e.split(".").pop();if(i.length>7||-1==indexOf("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,рф,укр,сайт,онлайн,срб,cat,pro,local".split(","),i))return r;if(-1!=r.indexOf("@"))return r;try{r=decodeURIComponent(r)}catch(e){}return r.length>55&&(r=r.substr(0,53)+".."),r=htsc(r),!n&&e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/)?'<a href="'+(a+(t=replaceEntities(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent))).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+r+"</a>":'<a href="/away?to='+encodeURIComponent(a+replaceEntities(t))+'" target="_blank">'+r+"</a>"}))}n.r(t),n.d(t,"wrapLinks",(function(){return r}))},wkhI:function(e,t,n){"use strict";n.r(t),n.d(t,"setFieldIgnored",(function(){return a})),n.d(t,"isFieldIgnored",(function(){return i}));var r=n("OcsD"),a=function(e,t){void 0===t&&(t=!0),Object(r.attr)(e,"data-ignore-field",!!t&&"true")},i=function(e){return"true"===Object(r.attr)(e,"data-ignore-field")}},z1UI:function(e,t,n){"use strict";n.r(t);var r=n("k+Df");t.default=r.default},z9sQ:function(e,t,n){"use strict";n.r(t);n("OcsD");var r={class:function(e,t,n){void 0===t&&(t={});void 0===n&&(n="_");var r=[e];return Object.keys(t).forEach((function(i){if(a(i)){var o=t[i];!0===o?r.push(""+e+n+i):a(o)&&r.push(""+e+n+i+n+o)}})),r.join(" ")},setMod:function(e,t,n){var r,i=new RegExp("\\s*"+t+"(_[-a-zA-Z]+)?");r=!0===n?" "+t:a(n)?" "+t+"_"+n:"";i.test(e.className)?e.className=e.className.replace(i,r):e.className+=r}};function a(e){return"number"==typeof e||"string"==typeof e&&e}t.default=r;window.Bem=r},zouF:function(e,t,n){"use strict";n.r(t),n.d(t,"Confirm",(function(){return c}));var r=n("TYsd"),a=n("Po+v"),i=n("fdw3"),o=n("29dZ"),s=n("UxAg");function c(e,t,n,s){void 0===s&&(s={});var c=r.default.preactElemFromTemplate(Object(a.default)({id:s.id,class:"Confirm",scrollable:!0,header:{title:s.title||Object(i.getLang)("mobile_warning_header")},on_overlay_click_native:n,content:[e,{class:"Popup__buttons",inner:[Object(o.default)({onClick:t,use_native_onclick:!0,class:"Popup__button",theme:s.theme_accept_btn||"regular",url:s.yes_href,inner:s.yes_label||Object(i.getLang)("mobile_continue")}),Object(o.default)({onClick:n||"Popup.close(this, event)",use_native_onclick:!0,class:"Popup__button",theme:s.theme_close_btn||"secondary",url:s.no_href,inner:s.no_label||Object(i.getLang)("mobile_cancel")})]}]}));return a.default.open(c,!0,{withoutCloning:s.withoutPopupCloning})}window.page&&window.page.onChange((function(){Object(s.$$)(".Confirm").forEach((function(e){return a.default.close(e)}))})),window.Confirm=c},zq7H:function(e,t,n){"use strict";n.r(t),n.d(t,"COUNTERS_POS_NOTIFICATIONS",(function(){return r})),n.d(t,"COUNTERS_POS_MESSAGES",(function(){return a})),n.d(t,"COUNTERS_POS_APPS",(function(){return i})),n.d(t,"DESKTOP_WIDTH",(function(){return o}));var r=2,a=3,i=10,o=882},zvhO:function(e,t,n){"use strict";function r(e){return"number"==typeof e&&!isNaN(e)}n.r(t),n.d(t,"isNumber",(function(){return r}))}},[[29,"runtime","vendors","icons","b-82d9927df0978c64fbba746460792e53","b-bb8a45b66effa6a9a720f7c1b25cb90c"]]]);